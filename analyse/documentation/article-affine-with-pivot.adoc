= Extended affine operation in musical set theory
<olivier.capuozzo@gmail.com>
Affiliation, City, Country
:revdate: 2025-07-12
:doctype: article
:encoding: utf-8
:lang: fr
:numbered:
:toc: left
:toclevels: 2
:sectids:
:sectnums:
:stem:
:imagesdir: ./assets/images
:icons: font

== Abstract


This article addresses a topic related to musical set theory, and particularly to basic operations: inversion, transformation by cycles of fifths and fourths (M7 and M5).

It demonstrates the need to be able to choose the axis, or more precisely the pivot point around which the transformations are applied, in order to overcome the negative influence of pitch zero in these operations.

The solution proposed here takes David Lewin's idea for inversion (I^u^) and generalizes it to the other M5 and M7 transformations.

Finally, the extended affine function has a new parameter, but remains fully compatible with current usage, through a logic that automatically assigns a default pivot value, similar to the "moveable-DO" system.

The code for the affine function with pivot is provided (TypeScript).


Keywords: musical set theory, pcs, basic operators, fixed zero problem, label, label free, M11, M5, M7, Affine mapping from Z~n~ to Z~n~


== Usual operations

In context of twelve-tone equal temperament, more specialy in pitch-class space, we note stem:[ZZ_12] the set stem:[ZZ"/"12ZZ], which reduces any number in stem:[ZZ] to one of the 12 pitch-class numbers, according to the modulo rule, like a 12-hour clock allowing the interpretation of a time position in a 24-hour day.

stem:[ ZZ_12 = {0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11}]

.Illustration modulo 12:{nbsp} -11 = 1  (and{nbsp} +11 = -1)
image::circle-modulo.png[]

.Example of numbers _i_ in stem:[ZZ] mapped into stem:[ZZ_12:] stem:[forall i in ZZ, i |->  i - n xx floor(i/n)]
[.nowrap]
----
...
 24   25   26  27  28 ...                         <- i - 12 * 2
 12   13   14  15  16  17  18  19  20  21  22  23 <- i - 12 * 1
  0    1    2   3   4   5   6   7   8   9  10  11 <= 12 pitch-class numbers
-12  -11  -10  -9  -8  -7  -6  -5  -4  -3  -2  -1 <- i + 12 * 1
              ... -20 -19 -18 -17 -16 -15 -14 -13 <- i + 12 * 2
 ...
----

Example of some cases:

* 25 modulo 12 = *1* +
stem:[25 - n xx lfloor 25/n rfloor] = 25 - 12 × Math.floor(25/12) = 25 - (12 × 2) = *1*
* 13 modulo 12 = *1*  {nbsp}(13 - 12*1)
* -3 modulo 12 = *9* {nbsp}(-3 + 12*1 )
* -11 modulo 12 = *1* {nbsp}(-11 + 12*1)
* -13 modulo 12 = *11* {nbsp}(-13 + 12*2) +
stem:[-13 - n xx lfloor (-13)/n rfloor] = -13 - 12 × Math.floor(-13/12) = -13 + (-12 × -2) = -13 +24 = *11*
* -17 modulo 12 = *7* {nbsp}(-17 + 12*2)




.Example: labeling of tones in Z and with the pitch-class numbers by <<Fripertinger>>
image:score-modulo.png[]

=== Basic operations

In musical set theory, into context of twelve-tone equal temperament (n=12), the basic operations are generally represented by ( <<Rahn>> <<Fripertinger>> <<Moreno-Argon>> and more):

* *Transposition* : stem:[T_k : ZZ xx ZZ_12 → ZZ_12 , x |-> T_k(x) := x + k]
* *Inversion* : stem:[I : ZZ_12 → ZZ_12 , x |-> I(x) := -x]
* *Cycle transformation*:
** Cycle fourth transformation : stem:[M_5 : ZZ_12 → ZZ_12 , x |->  M_5(x) := 5x]
** Cycle fifths transformation : stem:[M_7 : ZZ_12 → ZZ_12 , x |->  M_7(x) := 7x]

If we look carefully, we have a multiplication (inversion as stem:[-1x], stem:[M_5] and stem:[M_7]) and one addition (transposition).

We can combine these operations in the form of an affine operation, _ax + b_, of _Z~n~_ into _Z~n~_

include::affine-operation.adoc[]

include::affine-with-pivot.adoc[]

== Conclusion

* After observing the so-called "fixed zero problem", we were led to introduce a new parameter to the affine function acting on PCS, to improve the consistency of affine transformation operations such as inversion (M11) and transformation by cycle of fifths and fourths (M5 and M7).

* The concept of a default value for the pivot has been introduced, allowing the parameterized affine function to substitute for the usual affine function. This provides general consistency, and allows the benefits of group action (construction of orbits and stabilizers) to continue to be enjoyed.

include::reference-article-pivot.adoc[]
