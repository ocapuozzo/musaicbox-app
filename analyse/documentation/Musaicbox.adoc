= MusaicBox
Another toolbox for musical composition
From 88musaics.org project
:description: Musaicbox frontend app
:icons: font
:listing-caption: Listing
:toc: left
:toclevels: 4
// :table-caption!:
:stem:
:docinfo: shared
// nice to extend default css, with docinfo.html file in same directory
// see : https://docs.asciidoctor.org/asciidoctor/latest/html-backend/default-stylesheet/#customize-extend

// :author: Olivier Capuozzo <olivier.capuozzo@gmail.com>
// :url-quickref: https://docs.asciidoctor.org/asciidoc/latest/syntax-quick-reference/

//  for custom css, edit docinfo.html and put,
// into file.adoc, add [.new-class-name] before content asciidoc concerned
// into terminal :
//  asciidoctor -a docinfo=shared Musaicbox.adoc

ifdef::backend-pdf[]
:source-highlighter: rouge
endif::[]
ifndef::backend-pdf[]
:source-highlighter: highlight.js
endif::[]
:imagesdir: ./assets/images

Musaicbox application is intended to be a POC for main concepts defined and illustrated on https://88musaics.org[88musaics.org] site, plus others (modes, scales, chords...). The implementation chosen for this application are detailed, and some concepts from Musical Set Theory are discussed.

== Introduction

The idea behind this application is to offer the user a UI/UX to concretely manipulate abstract concepts, highlight relationship (morphism) between logic spatial and sound structures (_Pitch Class Set_) .

We hope that user will make use of this tool in his composition and instrumental practice activities.

=== For which audience ?

Musician eager to add to his source of inspiration a muse of a scientific nature, based on idea of reducing any combination of sounds to a set of pitch classes, called _pitch class set_ (PCS).footnote:[provided that they accept the postulate of the decomposition of an octave into 12 "equal parts".]

=== Use Cases

4 entries (four main pages)

* PCS page (with undo/redo.footnote:redo[redo:Back to the future only possible if the past has not been updated])
====
Useful from one PCS, explore modes, possible chords and other PCS in geometrical transformation relationship (with animation), Forte number, invariant class, and more....
[.float-group]
--
[.left]
.17 PCS LT in Cyclic Prime Form
image::pcs-page.png["PCS page example" float="left",align="center"]
--

====

* ZnExplorer page
====
Explore orbits resulting of various group action.

A good illustration of mathematics concepts.

Example : Get Limited Transposition PCS in Cyclic Prime Form : Select only `M1` operation and click on button with label :  _Show orbits (352) grouped by Stabilizer signature_. On 352 PCS representatives, 335 are 12 uniques transposed, 17 are less than 12 (called PCS in Limited Transposition)
[.float-group]
--
[.left]
.17 PCS LT in Cyclic Prime Form
image::PCS-LT-17.png["17 PCS LT in Cyclic Prime Form" float="left",align="center"]
--

====

* 88 musaics page
====

Explore musaics shearing same meta-stabilizer.footnote:[A stabilizing operation is a transformation operation which conserve intervallic structure], having same *octotropes* (partition) and search musaic that include a PCS given (search form on top right menu)

[.float-group]
--
[.left]
.Example page 88 musaics
image::page88musaics.png["page 88 musaics" float="left",align="center"]
--



[.float-group]
--
[.left]
.Octotrope, a geometric figure for meta-stabilizer classes
image::octotrope.png["Octotrope def" float="left",align="center"]
--

Example : There is 6 musaics which are invariant by complement operation (a stabilizer) : Select only `CM1` operation (C for _complement_ M1 for _neutral multiplication operation_). Set of these 6 musaics is partitioned by 3 octotropes (meta-stabilizer classes) : `M1,M5,CM1,CM5`, `M1,M11,CM1,CM11` and `M1,M5,M7,M11,CM1,CM5,CM7,CM11`

image:octotrope-cm1.png[]

Push selection musaics to "Whiteboard" page (right click), or explore one musaic into "PCS" page.

[.float-group]
--
[.left]
.Musaics invariant by CM1 pushed on Whiteboard page
image::6MusaicsInvariantByCplt.png["6 musaics invariant by Cplt" float="left",align="center"]
--


====

* whiteboard page (with Undo/Redo.footnote:redo[] and Copy/Cut/Paste)
====

Organize PCS in various representations on 2D surface.

Give the musician the ability to add text, organize PCS (multiple selection, position, representation, zoom, …), save page content to a file and restore content from a local file.

[.float-group]
--
[.left]
.Example Whiteboard page 1
image::pageWhiteboard1.png["Example Whiteboard page 1" float="left",align="center"]
--

[.float-group]
--
[.left]
.Example Whiteboard page 2
image::pageWhiteboard2.png["Example Whiteboard page 2" float="left",align="center"]
--



====

== PCS

=== Pitch Class Abstraction

In equal-tempered music, any musical fragment can be reduced to a combination of pitch classes, whether that fragment is melodic (horizontal) or harmonic (vertical).

* Equivalence of pitch classes

image:equiv-pc.png[equiv pitch class]

* Enharmonic equivalence

image:equiv-enhar.png[equiv enharmonic]

* Without reference to rythme

image:equic-repet.png[equiv]

* Insensitive to the order and repetitions of notes within the fragment, whether melodic or harmonic...

image:equiv-hv.png[equiv pitch class]

If we make the pitch class of C correspond to the class modulo 12 named stem:[bar 0], pitch class C# by stem:[bar 1] , … , and so on up to B by the pitch class number stem:[bar 11].

* stem:[bar 0] is the pitch class that represents all C's, and their enharmonics (B#, Dbb, ...) all octaves combined.

* stem:[bar 1] represents all C#'s, and their enharmonics (B##, Db, ...) in any octave.

etc.

The resulting set of pitch classes is: stem:[Z//12Z] or stem:[Z_12]

stem:[Z_12 = {bar 0, bar 1, bar 2, bar 3, bar 4, bar 5, bar 6, bar 7, bar 8, bar 9, bar 10, bar 11 } ]

[NOTE]
====
It is customary, *for convenience*, *not* to use the barred notation for pitch classes, i.e.  stem:[0] instead of {nbsp} stem:[bar 0]

=> This way of doing things will have unsuspected repercussion... this problem is studied later in this document.
====

We can easily establish a correspondence between the set of integers modulo 12 and the set of pitch classes name (without bar).

This is the logic established by the Musical Set Theory and its leading authors such as <<Forte>> and <<Rahn>>.

So, there are *12 pitch classes*, numerical represented  by integers from 0 to 11footnote:[Sometimes 10 and 11 are noted A, B or t, e (for ten and eleven)].

image::cicrleFullV2.png[]

=== Enumeration

With set of 12 elements stem:[E = {0,1,2,3,4,5,6,7,8,9,10,11}]

The set of all subsets of stem:[E] is called https://en.wikipedia.org/wiki/Power_set[powerset], denoted stem:[P(E)], and has stem:[2^12] = 4096 elements (subsets).

In the context of Musical Set Theory, a subset, element of stem:[P(E)], is called *PCS*, for _Pitch Class Set_.

Is there 2^12^ = *4096 pcs*, from empty set `{}` to ful set `{0,1,2,3,4,5,6,7,8,9,10,11}` passing by all possible ordered pcs configurations as `{}`, `{0}`, `{1}`, ..., `{0,4,7}`, `{1,5,7}`,... , etc

4096 pcs can be ordered by their number of pitch classes (cardinality).

* Empty set : 1 pcs (with no pitch class)
* Monad set : 12 pcs (seen in the circle)
* Dyad set  : 66 pcs
* Triad     : 220 pcs (among them, the 12 major triads)
* ...
* Full set : 1 pcs (chromatic set)

Their distribution by cardinality is given by line 12 of Pascal's triangle below.

.Pascal's triangle
image::pascal-triangle-12.png[pascal-triangle-12,width=50%,height=50%]

This classification is not very practical for us, because it is semantically poor (based on the cardinality of PCS).

One of the major goals of the application is to refine the
classifications.

But before that, it seems useful to focus on the different representations of a PCS.

== PCS Representations

A _Pitch Set Class_ (PCS, or pcs) may have multiple representations.

=== Textual

A PCS is, by definition, an unordered set of PC, even if, in practice, by convention, we always present them textually ordered, in ascending order.

Let's take the PCS [0, 4, 7], C, E and G. Formally the textual representations below are all equal.

image::set-047-repr.png[_0_4_7_set_repr]

Example for C,E,G :  `[0,4,7]` or `[0 4 7]` (without comma)

=== Vector

It is a binary representation of a pcs, by a |E|-dimensional vector.

Example for [0 4 7]  (C major):  `[*1*,0,0,0,*1*,0,0,*1*,0,0,0,0]`  (ordered list of 12 binary values) :

image:vector-047.png[]

This vector, of _n_-dimension, is constructed by placing `1` at the index corresponding to each pitch class present in the pcs studied, and `0` at the index of the others. By convention, the index  corresponds to the pitch class name (which turns out to be very practical for algorithms).

To convert a PCS to a binary vector, we define a bijective function named _pcsToVector_.

====
[.text-center]
--
*_pcsToVector_*

stem:[P(Z_n) -> {0,1}^n] {nbsp}

stem:[tt"pcsToVector(A)" := \[f_A(0), f_A(1),...,f_A(n-1)\] ]

// stem:[tt"toVector(A)" = \[v_0,v_1,...,v_(n-1)\] ] where stem:[v_i = f_A(i)]

where stem:[f_A] (also known as stem:[chi_A]), is the *characteristic function* :

stem:[f_A : Z_n -> {0,1}]

stem:[f_A(bar i) := { (1  if bar i in A), (0  if bar i notin A) :}]
--
====


So, for _n = 12_, any pcs stem:[A] of stem:[P(Z_12)] corresponds a unique vector stem:[v] defined as follows:

stem:[v = \[f_A(bar 0), f_A(bar 1), f_A(bar 2) , f_A(bar 3) , f_A(bar 4) , f_A(bar 5) , f_A(bar 6) , f_A(bar 7) , f_A(bar 8) , f_A(bar 9)  , f_A(bar 10) , f_A(bar 11)\] ]


Example :

toVector (0, 4, 7]) stem:[ = \[ v_0, v_1, v_2 , v_3 , v_4 , v_5 , v_6 , v_7 , v_8 , v_9 , v_10 , v_11\] ]

where stem:[v_i="f"_"(0,4,7)"(bar i)], so we obtain vector stem:[\[1, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0\] ]

IMPORTANT: We can clearly see the use of the name of Pitch Class stem:[bar i] as an index stem:[i] in vector (as stem:[v_i]) We will see that this dual role is subject to caution.

[NOTE]
====
To get complement of a vector representation, we use inverse of characteristic function :
[.text-center]
--
stem:[f_A^"-1" : Z_n -> {0,1}]

stem:[f_A^"-1"(bar i) := 1 - f_A(bar i) ]
--

which transforms stem:[0] to stem:[1], and vice versa, pitch class representation into vector at index stem:[i].
====


The fragment framed below is characterized by the pitch classes set [0, 4, 7].

.Analysis example of a musical fragment.
image::fragment-047.png[]

There is an inverse function _vectorToPcs_  defined by :

[#vector-to-pcs]
====
[.text-center]
--

*_vectorToPcs_*

stem:[ZZ^n -> P(ZZ_n)]

stem:["vectorToPcs(V)" := { bar i | V_i = 1 and 0 <= i < n} ]

NOTE: Note the *dual role* of index _i_ : a position of element in the vector and Pitch Class name, _i_ and stem:[bar i]
--
====
Example of reinterpretation of a vector representation

image::vector-reinterpr-047.png[047-vector-reinterpr]

=== Integer

Yes, we can represent, identify, any PCS by a unique integer. Let's see how.

From binary vector representation, we will do the sum of power of 2, where value is 1 into vector. This algorithm, known as _polynomial function_, which we will call, in the context of this project, _polynomial identifier : pid_.

stem:["pid" : {0,1}^12 -> N]  {nbsp} defined by :

stem:["pid("v")" = sum_(i=0)^(n-1) v_i 2^i ] {nbsp} (so add powers of 2 where stem:[v_i] is non-zero)

[NOTE]
====
Since there exists a function (toVector) which gives the vector image of any PCS, we can also define function _pid_ with this domain of definition  stem:["pid" : P(Z_12) -> N]

====
Example for [0, 4, 7] :  `1 + 16 + 128` = `145`  (decimal value)

[%header,cols="^h,,,,,,,,,,,,,"]
.Examples of Polynomial Identifier (first row is power of 2)
|===
|PCS|1| 2| 4| 8| 16| 32| 64| 128| 252| 512| 1024| 2048| _pid_
|[0,4,7]|*1*|0|0|0|*1*|0|0|*1*|0|0|0|0|
|_pid_|*1*|0|0|0|*16*|0|0|*128*|0|0|0|0|*_145_*
||||||||||||||
|[0,3,7]|*1*|0|0|*1*|0|0|0|*1*|0|0|0|0|
|_pid_  |*1*|0|0|*8*|0|0|0|*128*|0|0|0|0|*_137_*
|===

Examples :

 pid('[]') = 0 (empty set)
 pid('[0,1,2,3,4,5,6,7,8,9,10,11]') = 4095 (chromatic set)
 pid('[1,3,5,7,9,11]') = 2730 (whole tone scale)

NOTE: As each pcs into the 4096 is unique, each of these pcs has a unique integer value by polynomial function.

=== Geometry
Example with pcs [0,4,7]

==== Linear

&#9632;&#9633;&#9633;&#9633;&#9632;&#9633;&#9633;&#9632;&#9633;&#9633;&#9633;&#9633;

==== Circle / Clock

Optional with polygon inscribed.

[.float-group]
--
image::pcs-047.png["_0_4_7_clock-names",float="left",align="center"]
image::clock-047.png["_0_4_7_clock",float="left",align="center" ]
--

Polygon inscribed into circle denote the intervallic structure of the PCS.

Other example, a minor 7 and its intervallic structure (3, 4, 3, 2) :

image:minor7-circle-is.png[minor7-circle-is]

TIP: Sum of intervals into intervallic structure is always _n_. For pcs : [0 4 7] this is (4, 3, 5)

==== Musaic

A musaic is, by default, based on a 2D geometric structure.

////

// not the good place for this hypothesis !

TIP: (simple hypothesis) We think that the dimension (2D) is deduced from _n_. This would be the number of generators of all prime numbers with _n_, whose number is always even (for all _n_ > 2). Number of primes with _n_ is known as stem:[phi(n)], so for _n_ = 12, stem:[(phi(12)) /2 = 2 ], therefore 2D structure.
////


Musaic is instance of a dual interval space <<DIS>>, as two-dimensional array of pitches where “rows” are separated by the same interval and the “columns” by an other but also same (non-zero) interval (regular interface).

By default, we take as intervals step the "generator prime form" of _n_, these are those in the first half of the prime integers with n. For n=12 these are 1 and 5 from [`*1*, *5*, n-5, n-1`].

[NOTE]
====
Wy take prime form with n ?

Because, each of them is a n-step generator, they guarantee to traverse the structure in its entirety, while preserving the _n_-specific characteristics (notably the invariants). They also guarantee the cardinality of PCS.

====

.Example of musaic representation of [0 4 7]
[.float-group]
--
image::musaic-047-names.png["_0_4_7_musaic-names",float="left",align="center"]
image::musaic-047.png["_0_4_7_musaic",float="left",align="center" ]
--

[NOTE]
====
There are many others types of representation, such as Thor, Tonnetz and others <<DIS>> with one interval step not in prime...

Examples : DIS(y,x) where y is row interval and x is column interval. Violin is DIS(1,7), guitar in P4 Tuning is DIS(1,5), Tonnetz is DIS(4, 7), etc.
====

// NOTE: Instrument in DIS(x,y) are in _regular interface_ family.

=== Together

All PCS representations are interchangeable by bijective connections (one-to-one relationship).

.Example with Set, Integer, Vector, musaic, clock and score notation.
[.float-group]
--
image::together-representation-fleches.png["together-representation-fleches",float="left",align="center"]
--

== Transformation operations

Here we are interested in transformation operations that transform any PCS into other PCS, i.e. : stem:[P(E) -> P(E)].

[TIP]
====
PCS are elements stem:[P(E)]. So writing stem:[P(E) -> P(E)] means that transformation operations take a pcs and return a pcs.
====

We will retain the following operations:

• *Transposition* (**T**), which geometrically corresponds to a translation in the plane and musically to the transposition of a given step
• *Multiplication* (**M**) by a prime number with cardinal of E, which geometrically corresponds to a half-rotation around an axis, and musically corresponds to a "symmetry". Inversion est given by multiplication by _n-1_, so 11 when n=12.
• *Complementation* (**C**), which geometrically and musically corresponds to a complementarity.

From Musical Set Theory, these algebraic definitions provide a precise framework for analyzing the relationships between sets of pitch classes in atonal and post-tonal music.

We present these transformation operations below.

=== Transposition

Operation name is {nbsp} stem:[T_k]

====

[.text-center]
--

*Transposition*

stem:[T_k  :  P(E) xx NN -> P(E)]

{nbsp} stem:[T_k(A) := {\  (x + k) mod |E| \ },  forall   x in A]
--

====

//Operation is {nbsp}   stem:[T_k  :  P(E) -> P(E)]

//defined by {nbsp} stem:[T_k(A) = {\  (x + k) mod |E| \ },  forall   x in A]

Motivation: Allows us to establish an equivalence relationship "up to transposition" - an equivalence unanimously recognized in the musical field.

Examples when stem:[E = {0, 1, ..., 11}]  (cardinal of stem:[E\ is\ |E| = 12])

* Example1 : {nbsp} stem:[T_1("["0 4 7\]) ->"["1 5 8\]] {nbsp} (C Maj -> C# Maj)

* Example2 : {nbsp} stem:[T_5("["0 4 7\]) -> "["0 5 9\]] {nbsp} (C Maj -> F Maj - [5 9 12] = [5 9 0] = [0 5 9])

* Example3 : {nbsp} stem:[T_0("["0 4 7\]) ->"["0 4 7\]] {nbsp} (neutral operation)

==== Illustration

* Example1 : {nbsp} stem:[T_1("["0 4 7\]) ->"["1 5 8\]] {nbsp} (C Maj -> C# Maj)

image::T1-047.png[T1-047]

.Transformations by PCS page
image::Transf-047.png[Transf-047 ops UI]

.[0 4 7]
image:T1-047-Mus.png[T1-047 Musaic]

.[1 5 8] after click on T right
image:T1-158-Mus.png[T1-158 Musaic]



=== Multiplication

Operation name is {nbsp} stem:[M_a]

====

[.text-center]
--

*Multiplication*

// stem:[ul "Multiplication"]

stem:[M_a  :  P(E) xx NN -> P(E)]

stem:[M_a(A) := {\ (a * x) mod |E| \ },  forall   x in A]

_Where a is prime with |E|, and stem:[*] is multiplication operator_.
--
====

// defined by {nbsp} stem:[M_a(A) = {\ (x * a) mod |E| \ },  forall   x in A]


Motivation: allows to establish an equivalence relation "up to a symmetry", *including inversion and other substitutions.*

Examples when stem:[E = {0, 1, ..., 11}]  (cardinal of stem:[E\ is\ |E| = 12])

* Example M11 : {nbsp} stem:[M_11("[0 4 7\]") ->"[0 5 8\]"] {nbsp} (C Maj -> Fm/5th - *inversion*)

* Example M5 : {nbsp} stem:[M_5("[0 4 7\]") ->"[0 8 11\]"] (*M5 substitution*){nbsp}

* Example M7 : {nbsp} stem:[M_7("[0 4 7\]") ->"[0 1 4\]"] {nbsp}(*M7 substitution*)

* Example id : {nbsp} stem:[M_1("[0 4 7\]") ->"[0 4 7\]"] {nbsp} (*neutral operation*)

==== Illustration

* Example M11 : {nbsp} stem:[M_11("[0 4 7\]") ->"[0 5 8\]"] {nbsp} (C Maj -> Fm/5th - *inversion*)

.[0 4 7] M11 -> [0 5 8]
image:M11-047.png[M11-047]

.[0 4 7] M11 -> [0 5 8] (Musaics with reversed motif)
image:M11-047-Mus.png[M11-047 Musaic]


* Example M5 : {nbsp} stem:[M_5("[0 4 7\]") ->"[0 8 11\]"] (*M5 substitution*){nbsp}

.[0 4 7] M5 -> [0 8 11]
image:M5-047.png[M5-047]

.[0 4 7] M5 -> [0 8 11] (Musaics with reversed motif)
image:M5-047-Mus.png[M5-047 Musaic]

* Example M7 : {nbsp} stem:[M_7("[0 4 7\]") ->"[0 1 4\]"] {nbsp}(*M7 substitution*)


.[0 4 7] M5 -> [0 1 4]
image:M7-047.png[M7-047]

.[0 4 7] M5 -> [0 1 4] (Musaics with reversed motif)
image:M7-047-Mus.png[M7-047 Musaic]


=== Complement

Operation name is {nbsp} stem:[C]

====

[.text-center]
--

*Complement*

stem:[C : P(E) -> P(E)]

stem:[C(A) := A^c = E\  \\ A = { x in E | x notin A }]
--

====

Motivation: “up to the complement” equivalence

Particularly because we have the equality : stem:[Stab(Orbit(A)) = Stab(Orbit(A^c))] (Property studied later in this document)

Examples when stem:[E = {0, 1, ..., 11}],  cardinal of stem:[E\ is\ |E| = 12].

* Example1 : {nbsp}  stem:[C("[0 2 4 5 7 9 11\]") ->"[1 3 6 8 10 \]"] {nbsp} Major scale to Pentatonic scale
* Example2 : {nbsp}  stem:[C("[0 2 4 6 8 10\]") ->"[1 3 5 7 9 11\]"] {nbsp} Whole tone scale to Whole tone scale

==== Illustration

* Example1 : {nbsp}  stem:[C("[0 2 4 5 7 9 11\]") ->"[1 3 6 8 10 \]"] {nbsp} Major scale to Pentatonic scale


.Major scale  -> Pentatonic scale
image:Cplt-MajorScale.png[Cplt-MajorScale]

.[0 2 4 5 7 9 11] Complement -> [1 3 6 8 10] (Musaics complemented motif)
image:Cplt-MajorScale-Mus.png[Cplt-MajorScale Musaic]


=== Conclusion

We have just defined 3 primitive operations which are _Transposition_, _Multiplication_ and _Complementarity_.

Let's see how to use them in a Group structure.

== Unified operation

We will now combine our these three primitive operations (C, M and T)  into one single operation with the aim of creating a group.

=== Special Affine Operation

Multiplication and Transposition may be grouped into one special affine operation stem:[ (ax + k)] that operates on stem:[P(E)].

Operation name will be represented by  stem:[M_aT_k] (_M_~a~  for multiplication by _a_ and _T_~k~ for transposition by a step of _k_).

====
[.text-center]
--
*Special Affine Operation*

stem:[M_aT_k  :  P(E) xx NN xx NN -> P(E)]

stem:[M_aT_k(A) := {\ (ax + k) mod |E| \ },  forall  x in A]

_Where *a* is prime with |E| (and *k* a step of transposition)_
--
====

Examples when stem:[E = {0, 1, ..., 11}]  (cardinal of stem:[E\ is\ |E| = 12])

. Example M1-T5 : {nbsp} stem:[M_1T_5("[0 4 7\]") -> "[5 9 12\]"] so  stem:["[0 5 9\]"] Transposition of 5 halftones (T5)
. Example M11-T0 : {nbsp} stem:[M_11T_0("[0 4 7\]") ->"[0 5 8\]"] {nbsp} (C Maj -> Fm/5th - Multiplication only - M11 is inversion)

. Example M1-T0 : {nbsp} stem:[M_1T_0("[0 4 7\]") -> "[0 4 7\]"] {nbsp} (neutral op)

. Example M5-T5 : {nbsp} stem:[M_5T_5("[0 4 7\]") -> "[1 4 5\]"] {nbsp} Multiplication and Transposition

=== Extended Special Affine Operation

If we add the complementarity operation to the special affine function, we obtain the following operation: *stem:[c * (ax + k)]* that operates on stem:[P(E)]. It is with this unified operation that we will work.

Operation name is {nbsp} stem:[C_cM_aT_k]

====
[.text-center]
--

*Extended Special Affine Operation*

stem:[ "C"_cM_aT_k : P(E) xx {false, true} xx NN xx NN -> P(E) ]

stem:["C"_cM_aT_k(A) := { ({\ (ax + k) mod |E| \ }  forall x in A \ \ \ \ \ \ \ \  if c = false), (E\ \\ \ {\ (ax + k) mod |E| \ }  forall x in A \  if c = true) :}]
--

or, if we use the special affine operation seen previously :
[.text-center]
--
stem:["C"_cM_aT_k(A) := { (M_aT_k(A) \ \ \ \ \ \ \ if c = false), (E\  \\ \ M_aT_k(A)  if c = true) :}]
--

====

[CAUTION]
====
In practice, we will not mention C when its value is stem:[false], so these writings are synonymous :

stem:[C_"false"M_aT_k] , will be denoted by *MA-TK*

stem:[C_"true"M_aT_k] , will be denoted by *CMA-TK*
====

Examples when stem:[E = {0, 1, ..., 11}]  (cardinal of stem:[E\ is\ |E| = 12]) :

* *M1-T0* {nbsp}:{nbsp}  stem:[C_"false"M_1T_0("[0 4 7\]") -> "[0 4 7\]"] {nbsp} (neutral op)

* *M1-T1* {nbsp}:{nbsp} stem:[C_"false"M_1T_1("[0 4 7\]") -> "[1 5 8\]"] {nbsp} (transposition of 1 halftone only)

* *M5-T0* {nbsp}:{nbsp} stem:[C_"false"M_5T_0("[0 4 7\]") -> "[0 8 11\]"] {nbsp} (M5 only)

* *CM5-T4* {nbsp}:{nbsp} stem:[C_"true"M_5T_4("[0 4 7\]") -> "[1 2 5 6 7 8 9 10 11\]"] {nbsp} (M5,  T4 and Complement)

* *CM1-T1* {nbsp}:{nbsp} stem:[C_"true"M_1T_1("[0 2 4 6 8 10\]") -> "[0 2 4 6 8 10\]"] {nbsp} (T1 and Complement)

* *CM1-T0* {nbsp}:{nbsp} stem:[C_"true"M_1T_0("[0 3 6 9\]") -> "[1 2 4 5 7 8 10 11\]"] {nbsp} (Complement only : Dim7 -> Dim scale)

// * *CM1-T0* {nbsp}:{nbsp} stem:[C_"true"M_1T_0("[0 2 4 5 7 9 11\]") -> "[1 3 6 8 10\]"] {nbsp} (complement only)


etc.

NOTE: Extended Special Affine Operation is called _MusaicOperation_ into MusaicBox project.

== Group

To define a group, we need to have:

* a transformation operation (we have it, it is _MusaicOperation_) =  stem:[c * (ax + k)].

* a function composition stem:[@] that we define as : stem:[(c,a,k) @ (c',a',k') = ] ( stem:[underbrace(bb "c ⊕ c'")_("part to check"), underbrace(aa', ak' + k)_(@ " Affine")])

This function composition stem:[@], extend function composition of special Affine group, where stem:[a and a'] is prime with stem:[n] and stem:[oplus] the logical operator XOR.


=== Group Axioms

Let us check that the function composition stem:[@] satisfies four expected properties (group axioms)

* *Law of composition*

For all _g_ and _g'_ operations of _G_, the result stem:[(g @ g')] is also an operation in _G_.

stem:[forall g, g' in G, (g @ g') in G]

If we take stem:[g = (c,a,k)] and stem:[g' = (c',a',k')] then stem:[g @ g' = ] (  stem:[underbrace(bb "c ⊕ c'")_(in {true,false}), underbrace(aa', ak' + k)_("Special Affine Op")])

Since stem:[a] and stem:[a'] are prime with stem:[n], stem:[(aa' mod n) = 1] which is also prime with n.

Therefore stem:[(g∘g') in G]

* *Associative*

stem:[forall (a,b,c) in G, (a @ b) @ c = a @ (b @ c)]

This is true for stem:[(aa', ak' + k)] (law of composition of affine group)

It remains to elucidate the case of the XOR operation.

stem:[forall (a,b,c) in {0, 1}^3, (a oplus b) oplus c = a oplus (b oplus c)]

|===
|a|b|c|stem:[(a oplus b)]|stem:[(b oplus c)]|stem:[(a oplus b) oplus c]|stem:[a oplus (b oplus c)]

|0
|0
|0
|0
|0
|#0#
|#0#

|0
|0
|1
|0
|1
|#1#
|#1#

|0
|1
|0
|1
|1
|#1#
|#1#

|0
|1
|1
|1
|0
|#0#
|#0#

|1
|0
|0
|1
|0
|#1#
|#1#

|1
|0
|1
|1
|1
|#0#
|#0#

|1
|1
|0
|0
|1
|#0#
|#0#

|1
|1
|1
|0
|0
|#1#
|#1#

|===

We have shown that the XOR operator is associative, because for all combinations of _a_, _b_, _c_, the two expressions stem:[(a oplus b) oplus c] and stem:[a oplus (b oplus c)] always give the same result.

We can therefore say that stem:[( c oplus c', aa', ak' + k)] is *associative*.

* *Neutral element*

There exists an element stem:[e in G]{nbsp} such that, for every stem:[g] in stem:[G] one has {nbsp} stem:[e @ g = g] {nbsp} and {nbsp} stem:[g @ e = g].

This neutral element is :  stem:[(c, a, k) |-> (false, 1, 0) ] {nbsp} denoted by {nbsp} *M1-T0*

stem:[e @ g = g] {nbsp} : {nbsp} stem:[(false, 1, 0) @ (c',a',k')  = ( false oplus c' ,a', k')]

and

stem:[g ⋅ e = g] {nbsp} : {nbsp} stem:[(c,a,k) @ (false, 1, 0) = ( c oplus false, a, k)]


In its affine part, M1-T0, neutral operation use neutral values (1 for multiplication and 0 for addition). Let's see for stem:[oplus] if stem:[ (false oplus x) = (x oplus false) = x], whatever stem:[x] ?

|===
|{nbsp}stem:[x]|stem:[false] (fixed) |stem:[(x oplus false)] {nbsp} (or stem:[(false oplus x)] )

|#false#
|false
|#false#

|#true#
|false
|#true#

|===

Thus, by setting c' to false we ensure that c will stay the same  (stem:[AA c in {true, false}, (c oplus false) = c]).

Therefore, we can say that stem:[(false, 1, 0)] is *the neutral element* of stem:[G].

* *Symmetry element (inverse)*

There exists an element stem:[e in G]{nbsp} such that, stem:[ AA a in G, EE b in G ->  a @ b = b @ a = e], where stem:[e] is neutral element (other name for *identity element*)

so stem:[AA (c,a,k),  EE (c',a',k') => ( c oplus c', aa', ak' + k) =  (false, 1, 0)]

We must therefore determine stem:[(c',a',k')] which satisfies the equation :

[.text-center]
stem:[(c oplus c', aa', ak' + k) = (false, 1, 0)]

Solution : stem:[(c', a', k') = (c , a , -k * a^-1)]

Because :

* stem:[ c oplus c = false, AA c in {true, false}]

* stem:[aa = 1] because stem:[(a^2 mod n) = 1,  AA a " prime with " n]

* stem:[ (-k * a^-1) (mod n)] {nbsp} is value of stem:[k'] which solves the equation stem:[ak' + k = 0] {nbsp} ( _a_^-1^ is the modular inverse of _a_)

Examples with stem:[n = 12] : {nbsp} (reminder : M1-T0 is stem:[C_"c=false"M_"a=1"T_"k=0"])

* M1-T0 stem:[@] *M1-T0* = M1-T0  {nbsp} (stem:[e . e = e])
* *M1-T7* stem:[@] M1-T5 = M1-T0
* M1-T5 stem:[@] *M1-T7* = M1-T0
* M5-T5 stem:[@] *M5-T11* = M1-T0
* CM5-T5 stem:[@] *CM5-T11* = M1-T0

etc.

We can therefore say that stem:[(c , a , -k * a^-1)] is *the symmetric element* of any stem:[(c,a,k) in G].

=== Conclusion

We have defined an extended special affine group stem:[G] with complementarity  , from unified operation stem:[c * (ax + k)] intended to act on stem:[P(ZZ_n)] defined by :

* Its elements are triplets stem:[(c, a, k)] , in reference to extend special operation :  stem:[c * (ax + k)]

* Function composition (stem:[@])  is stem:[(c,a,k) @ (c',a',k') = (c oplus c', aa', ak' + k)]

where stem:[n>2], stem:[a] prime with stem:[n] and stem:[c in {true, false}]



// https://fr.wikipedia.org/wiki/Action_de_groupe_(math%C3%A9matiques)[]


== Group Action

Consider the action of stem:[G] on set stem:[P(E)], with stem:[E = ZZ "/" nZZ = ZZ_n] and stem:[P(E)], a set of stem:[2^|E| = 2^n].

Let us now consider stem:[E = ZZ_12] = {0,1,2,3,4,5,6,7,8,9,10,11}, the twelve pitch classes.

stem:[P(E)] is set of stem:[2^|E| = 2^12 = bb 4096] *PCS elements* (4096 subsets of _E_)

=== Context

https://88musaics.org/[88musaics project] presents different operations, when n = 12, as *geometrical transformations by rotation of half a turn*. M5 is left diagonal and M7 is right diagonal transformation, M11 (inversion) around central point, M1 is neutral operation anc C is a change of perspective of point of view (or permutation of color).

Into Musaicbox application project (https://musaicbox.org/) , primitives operations are implemented by permutations of values into vector representation of PCS, i.e. stem:[ NN^n -> NN^n].

.Example of different points of view of basics transformation operations
image::diff-4operations.png[diff-4operations]

For transformations by multiplication, see also : https://en.wikipedia.org/wiki/Multiplication_(music)[wikipedia multiplication and music]

The complementarity operation is also the object of great attention in musical set theory (<<Forte>>).

=== Discovering operations of G

The composition function stem:[@] allows us to determine all instances of MusaicOperation (stem:[C_cM_aT_k]) whe stem:[G] acts on stem:[P(ZZ_12)]. For this we will use the algorithmic structure of Cayley table.

To begin with, we can focus on a few operations that will allow us to generate all possible transformation operations in stem:["T0"], i.e. stem:[C_cM_aT_0]. Several configurations of generating operations are possible, all of which lead to the same result. For now, we will arbitrarily take :  *{M1-T0, CM1-T0, M5-T0, M7-T0}*.

[cols="^h,,,,"]
.First step to discover operations
|===
|{nbsp} stem:[@] |M1-T0 |CM1-T0 |M5-T0 |M7-T0

|M1-T0
|M1-T0
|CM1-T0
|M5-T0
|M7-T0

|CM1-T0
|CM1-T0
|M1-T0
|#CM5-T0#
|#CM7-T0#

|M5-T0
|M5-T0
|#CM5-T0#
|M1-T0
|#M11-T0#

|M7-T0
|M7-T0
|#CM7-T0#
|#M11-T0#
|M1-T0

|===

As we can see, three new operations are discovered (*M11-T0*, *CM5-T0* and *CM7-T0*), we add them to the table structure (M11, CM5 and CM7), perform the calculations and repeat this process until no new operations are discovered, which gives, in fine:

[cols="^h,,,,,,,,"]
.All operations in T-0, but suffix -T0 is omitted (id = M1-T0)
|===
|{nbsp} stem:[@]|Id|M5|M7|M11|CM1|CM5|CM7|CM11

|Id
|[.klein1]#*Id*#
|[.klein1]#M5#
|[.klein1]#M7#
|[.klein1]#M11#
|[.klein2]#CM1#
|[.klein2]#CM5#
|[.klein2]#CM7#
|[.klein2]#CM11#

|M5
|[.klein1]#M5#
|[.klein1]#*Id*#
|[.klein1]#M11#
|[.klein1]#M7#
|[.klein2]#CM5#
|[.klein2]#CM1#
|[.klein2]#CM11#
|[.klein2]#CM7#

|M7
|[.klein1]#M7#
|[.klein1]#M11#
|[.klein1]#*Id*#
|[.klein1]#M5#
|[.klein2]#CM7#
|[.klein2]#CM11#
|[.klein2]#CM1#
|[.klein2]#CM5#

|M11
|[.klein1]#M11#
|[.klein1]#M7#
|[.klein1]#M5#
|[.klein1]#*Id*#
|[.klein2]#CM11#
|[.klein2]#CM7#
|[.klein2]#CM5#
|[.klein2]#CM1#

|CM1
|[.klein2]#CM1#
|[.klein2]#CM5#
|[.klein2]#CM7#
|[.klein2]#CM11#
|[.klein1]#*Id*#
|[.klein1]#M5#
|[.klein1]#M7#
|[.klein1]#M11#

|CM5
|[.klein2]#CM5#
|[.klein2]#CM1#
|[.klein2]#CM11#
|[.klein2]#CM7#
|[.klein1]#M5#
|[.klein1]#*Id*#
|[.klein1]#M11#
|[.klein1]#M7#

|CM7
|[.klein2]#CM7#
|[.klein2]#CM11#
|[.klein2]#CM1#
|[.klein2]#CM5#
|[.klein1]#M7#
|[.klein1]#M11#
|[.klein1]#*Id*#
|[.klein1]#M5#


|CM11
|[.klein2]#CM11#
|[.klein2]#CM7#
|[.klein2]#CM5#
|[.klein2]#CM1#
|[.klein1]#M11#
|[.klein1]#M7#
|[.klein1]#M5#
|[.klein1]#*Id*#

|===

We note that no other element of the group is generated (no new transformation operation). So the first inventory, without transposition, gives *8 operations* :

[.text-center]
{ *M1, M5, M7, M11, CM1, CM5, CM7, CM11* }

TIP: We can observe the highlighting of symmetries, and a https://en.wikipedia.org/wiki/Klein_four-group[klein four-groups] (first square).

By composing each of these operations with the 12 possible transposition steps, we obtain *96* operations in the group.

[.text-center]
|{ T0, T1, ..., T11 }| x |{ M1, M5, M7, M11, CM1, CM5, CM7, CM11 }| = 12 x 8 = *96 operations*


In fact, number of operations in stem:[G] when it act on stem:[ZZ_n , n > 2], depends on stem:[n], and its formula is :

[.text-center]
====
*Formula cardinal of G*

stem:[ |G| = 2n * phi(n)].

Where stem:[phi] is Euler's function.

Example with n=12 => stem:[ |G| = 2 xx 12 xx 4 = 96]
====


=== Conclusion

We have seen that when the group stem:[G] acts on stem:[P(ZZ_12)], stem:[G] is composed of  *96* elements (operations)

When stem:[G] acts on  stem:[ZZ_12]  ,  stem:[G] = stem:[{ C_cM_a"-"T_k],
where stem:[c in {true, false}, a in { 1, 5, 7, 11 } and k in { 0, 1, ..., 11  } }]

stem:[G = { "M1-T0", "M1-T1",..., "CM1-T0", ..., "CM11-T10", "CM11-T11"}]


It is thanks to this group that we will be able to partition our 4096 PCS into remarkable subsets by action of this group on stem:[ZZ_12].


== Orbit

The orbit of an element stem:[pcs] of stem:[P(E)] is a set that gathers all the possible images of stem:[pcs] under action of stem:[G]. It is denoted stem:[G"⋅"pcs]


stem:[G"⋅"pcs = ]{stem:[underbrace(g cdot pcs)_(in P(E)) \  | g in G] },  a subset of stem:[P(E)]

Examples :

[example]
====
* Orbit of [0 2 4 6 8 10] is a set of PCS denoted by stem:[G cdot A], where stem:[A] = [0 2 4 6 8 10].
 +
stem:[G cdot "[0 2 4 6 8 10\]"] = stem:[{"[0 2 4 6 8 10\], [1 3 5 7 9 11\]"}]
 +
(a set of 2 PCS - whole tone scales - musaic n°88)

====

[example]
====
* stem:[G cdot "[0 2 4 5 7 9 11\]"] = stem:[{"[0 2 5 7 10\], ...,  [0 2 4 5 7 9 11\]"}]
 +
(a set of 48 PCS - musaic n°38)

====


[example]
====
* stem:[G cdot "[0 3 6 9\]"] = stem:[{"[0 3 6 9\], [1 4 7 10\], ...,  [0 1 3 4 6 7 9 10\]"}]
 +
(a set of 6 PCS - diminished 7th and "Messiaen Mod 2" scales - musaic n°37)

====




//
// We know (88musaics.org) that such a group action generates  *88 orbits*. However, we think it is more didactic to focus first on a smaller group, a subgroup of stem:[G].
//
// [NOTE]
// ====
// Later we will make an inventory of the possible subgroups of stem:[G] (we work with a finite set, which makes our work easier)
// ====


[#_stabilizer_and_fixed_pcs]
=== Stabilizer and Fixed PCS

PCS are fixed (i.e. unmodified, invariant) under action of one or more transformation operations of stem:[G], which contains 96.

For examples :

* Any pcs is fixed (stabilized) by `M0-T1` (id operation)
* Pcs [0 2 3 5 7 9 10] (dorian mode) is fixed by `M1-T0 M11-T0` (id and inverse)
* Pcs [0 4 8] (Augmented Triad) is fixed :
** in cyclic group, by `M1-T0 M1-T4 M1-T8` (limited transposition)
** in dihedral group by `M1-T0 M11-T0 M1-T4 M11-T4 M1-T8 M11-T8`
** in affine group by `M1-T0 M5-T0 M7-T0 M11-T0 M1-T4 M5-T4 M7-T4 M11-T4 M1-T8 M5-T8 M7-T8 M11-T8`


Operations in stem:[G] which do not transform some of its elements (it fixes them) are called _stabilizer_. Such operation in _G_ fix the concerned PCS in P(E)

====
[.text-center]
--
*Stabilizer*

A *stabilizer* of stem:[ "pcs" in P(E)] is a *subset* of stem:[G], denoted *_G~pcs~_*, having all its elements fixing stem:[pcs]

stem:[G_bb"pcs" := {g in G | g cdot pcs = pcs }]
--
====


Inversely,

====
[.text-center]
--
*Fixed Pcs*

stem:[Fixed_H] is the set of elements of stem:[P(E)] invariants under action of   stem:[H subseteq G]

stem:[Fixed_H := {pcs in P(E) | g cdot pcs = pcs, AA g in H}]

--
====

// stem:[Fixed_H := {A in P(E) | g cdot A = A, AA g in H}]

By correlation, the cardinality of an orbit is linked to the number of its stabilizers. Indeed, the more stabilizers an orbit has, the fewer elements the orbit has. This is the subject of a theorem known as https://en.wikipedia.org/wiki/Group_action#Orbit-stabilizer_theorem[orbit-stabilizer] :

Cardinality of an orbit stem:[G cdot pcs], is given by cardinality of group stem:[G] divided by number of stabilizers of stem:[pcs] :

stem:[|G"⋅"pcs| = (|G|) / (|G_(pcs)|)]

// stem:[|G"⋅"A| = (|G|) / (|G_A|)]

Knowing cardinality of one  orbit (stem:[|G"⋅"pcs|]), we can calculate the number of its stabilizers stem:[|G_(pcs)| = (|G|) / (|G"⋅"pcs|)].

From the 3 examples given previously :

* whole tone scales has 96/2 = 48 stabilizers
* major diatonic scale has 96/48 = 2 stabilizers :
* diminished 7th has 96/6 = 16 stabilizers

TIP: All these properties, and more, can be viewed on page : https://musaicbox.org/pcs[]


=== Equivalence relation

The set of orbits of P(E) under the action of G form a partition of P(E).

An equivalence relation, or more precisely a stem:[G"-equivalence"], is defined by saying stem:[x "~" y] if and only if there exists a stem:[g in G] with stem:[g⋅x = y].

The orbits are then the equivalence classes under this relation; two elements stem:[A] and stem:[B] of stem:[P(E)], are equivalent if and only if their orbits are the same, that is, stem:[G"⋅"A = G"⋅"B]

Example of stem:[Cyclic]_-equivalence_ : `CMajor triad` and `DMajor triad` are in  stem:[Cyclic]_-equivalence_ relationship, because they both belong to the same cyclic orbit. This is what we are going to see now.

=== Case study (cyclic group)

Before going further, Let us be interested in a subgroup of stem:[G], called the Cyclic group.

A subset of G has the status of a subgroup if its operations respect the group axioms.

Let's take stem:[{"M1-T0", "M1-T1"}]

[cols="^h,,"]
.First step to discover operations (Cayley table)
|===
|{nbsp} stem:[@] |M1-T0 |M1-T1

|M1-T0
|M1-T0
|M1-T1

|M1-T1
|M1-T1
|#M1-T2#

|===

As expected, a new operation has been generated, `M1-T2`, which we need to re-inject into the table. Continuing this process, we obtain the stable array of 12x12.

This is because the basic operation we selected (`M1-T1`), with a step of 1, generates 12. We could have chosen `M1-T5`, `M1-T7` or `M1-T11`, since 1, 5, 7, and 11 are prime with 12, we would arrive at the same result.

[cols="^h,,,,,,,,,,,,"]
.All operations in M1-Tk, but prefix M1-  is omitted (Rem : k + k' value is modulo n=12; Example : 4+9 = 1 modulo 12)
|===
|{nbsp} stem:[@] |T0|T1|T2|T3|T4|T5|T6|T7|T8|T9|T10|T11

|T0|T0|T1|T2|T3|T4|T5|T6|T7|T8|T9|T10|T11
|T1|T1|T2|T3|T4|T5|T6|T7|T8|T9|T10|T11|T0
|T2|T2|T3|T4|T5|T6|T7|T8|T9|T10|T11|T0|T1
|T3|T3|T4|T5|T6|T7|T8|T9|T10|T11|T0|T1|T2
|T4|T4|T5|T6|T7|T8|T9|T10|T11|T0|T1|T2|T3
|T5|T5|T6|T7|T8|T9|T10|T11|T0|T1|T2|T3|T4
|T6|T6|T7|T8|T9|T10|T11|T0|T1|T2|T3|T4|T5
|T7|T7|T8|T9|T10|T11|T0|T1|T2|T3|T4|T5|T6
|T8|T8|T9|T10|T11|T0|T1|T2|T3|T4|T5|T6|T7
|T9|T9|T10|T11|T0|T1|T2|T3|T4|T5|T6|T7|T8
|T10|T10|T11|T0|T1|T2|T3|T4|T5|T6|T7|T8|T9
|T11|T11|T0|T1|T2|T3|T4|T5|T6|T7|T8|T9|T10

|===

So, the group generate by stem:[{"M1-T0", "M1-T1"}] is

stem:[ H = {"M1-T0", "M1-T1","M1-T2",..., "M1-T10","M1-T11"}]

The sub-group stem:[H] has same neutral element, inverse element and composition function that stem:[G], and its cardinal is stem:[|H| = 12].

This group is interesting because, applied to stem:[P(E)], it places in the orbit of a pcs, all its transposed.

image::usecase-cyclic.svg[]

Orbit stem:[H cdot "[0 4 7\]" = {"[0 4 7\]", "[1 5 8\]", ..., "[3 6 11\]"}], so {DO MI SOL} and all this transposed (12 pcs).

Stabilizer stem:[H_"[0 4 7\]" = {"M1-T0"}] (only neutral operation : major triad is not in limited transposition)

.An other view on H ⋅ [0 4 7] (orbit cyclic of major triad)
image:cyclic-047-simple.png[cyclic]

Therefore, all pcs in orbit of stem:[H] are equivalent, *_up to transposition_*.

- Example1 : [0 4 7] ~ [2 6 9] ~ [0 3 8] because exists an operation g into H, that g . [0{nbsp}4{nbsp}7] = [2{nbsp}6{nbsp}9], it is M1-T2, and g . [0{nbsp}4{nbsp}7] = [0{nbsp}3{nbsp}8], it is M1-T8.
 +
 +
stem:[H "⋅ [0 4 7\]"] = stem:[H "⋅ [2 6 9\]"] = stem:[H "⋅ [0 3 8\]"] (same orbit).

A such group stem:[H] is called *Cyclic group*.

When orbit cyclic actes on stem:[P(ZZ_12)], its generate *352 orbits*. Each of these orbits represents a unique harmonic structure. Example Major triad, Minor triad, Diatonic Major, etc.

NOTE: We have thus reduced the field of study from 4096 to 352 elements !

The question then is how to represent an orbit? Any of its elements (pcs) would do, but it is customary to select the *smallest element*.

NOTE: The concept of the "smallest element" refers to the concept of "normal form" and "prime form" historically found in musical set theory.

In our case, we need to establish an order relation between elements of an orbit, and therefore in stem:[P(E)]. That has been done in the project ; detail in appendix <<Order relation>>.

The cyclic prime form of [0 4 7] is ... [0 4 7] itself, as well as cyclic prime form of [0 5 9] and 10 others PCS (major triads).

image::cyclic-047-motif.png[cyclic_motif]


Orbite stem:[H"⋅[0 4 7\]"] has 12 elements. Its number of stabilizers is stem:[|H_("[0 4 7\]")| = (|H|) / (|H"⋅[0 4 7\]"|)], so stem:[12/12 = 1]. It is stem:["M1-T0"] (neutral operation)

Of the 352 orbits,

* 335 orbits are composed of 12 elements, having exactly one stabilizer, stem:["M1-T0"], and their cardinal is equal to the number of operations in the group, i.e. 12.

* 17 very special orbits, which represent the structures with *"limited transpositions"*, have more than one stabilizing operation. Therefore, their cardinality is less than 12.


TIP: You can already explore the cyclic group in the musaicbox application: go to the "Z~n~ Explorer" tab and select M1 (meaning M1-T1) as operation and click on the "Show 352 orbits grouped by stabilizer" button.
 +
 +
 .17 Cyclic orbits of Limited Transposition PCS
 image:zn-explorer-cyclic-groupV2.png[zn-explorer-cyclic-group]

For understand reduced notation of stabilizer like `MI-T0~4*`, see in appendix <<Reduced Name>>.

Example of PCS in Limited Transposition : Augmented triad (4 PCS into cyclic orbit)

.[0 4 8] Augmented triad cyclic orbit
image:cyclic-048-eatl.png[eatl]

Cyclic orbit of augmented triad is : { stem:["[0 4 8\]", "[1 5 9\]","[2 6 10\]","[3 7 11\]"] }

Stabilizer cyclic orbit of augmented triad is : stem:[{"M1-T0~4*"}] = stem:[{"M1-T0", "M1-T4", "M1-T8"}]

Check this result by orbit-stabilizer theorem : stem:[|G"⋅"A| = (|G|) / (|G_A|)]

- Cardinality of augmented triad cyclic orbit : 4 (number of PCS in orbit)
- Cardinality of cyclic group : 12 (number of operations in group)
- Cardinality of stabilizers : 3 (number of operations that fix pcs of the orbit)

We have stem:[|G"⋅"A| = (|G|) / (|G_A|) => 4 = 12/3], it's OK !


Seventh Diminished is an other example of PCS in limited transpositions :  : image:dim7th-clock.png[50,50] There are 3 into orbit.

image::orbit-stab-fix-dim7thV2.svg[]

We can introduce a new property: Orbit stabilizer.

=== Orbit stabilizer

Orbit stabilizer is the union of the stabilizers of its elements (PCS).

More formally :

====
[.text-center]
--

*Orbit Stabilizer*

stem:[ "Orbit" -> Stabilizer]

stem:["Stabilizer(O)" := { G_"pcs" }, AA \ pcs in O ]

--
====

Examples, with _H_ = Cyclic group :

- Stab( _H_ ⋅[0 3 6 9] ) = `{ M1-T0,M1-T3,M1-T6,M1-T9 }`
- Stab( _H_ ⋅[2 5 8 11] ) = `{ M1-T0,M1-T3,M1-T6,M1-T9 }`
- Stab( _H_ ⋅[3 7 11] ) = `{ M1-T0,M1-T4,M1-T8 }`
- Stab( _H_ ⋅[0 4 7] ) = `{ M1-T0 }`

NOTE: Into an orbit of cyclic group, all pcs share the same stabilizer. This is generally not the case for other groups.
 +
Example with H = `{ M1-T0~1*, M11-T0~1* }` (dihedral group) :
 +
 image:orbit-stab-fix-diatMaj.svg[orbit-stab-fix-diatMaj]
 +
 Note : Diatonic major is in _Limited Transformation_ (its inverse is also a Diatonic major structure)

=== Conclusion

We have seen that the operations of the cyclic group only perform transpositions.

An action of the cyclic group on stem:[ZZ_12] generates a group with 12 transposition operations and 352 orbits. This action has made it possible to highlight the sets of PCS with limited transpositions.

A PCS, resulting from an action of the cyclic group, has the following properties:

* It belongs to one and only one orbit.

* It is stabilized by at least one transformation operation (M1-T0)

An orbit can be characterized by the set of stabilizers of its PCS.

The cyclic group is not the only possible subgroup of G. It's time to take inventory of G subgroups.

== Inventory of subgroups

We have seen that stem:[G] extend special affine group with complementarity : stem:[c * (ax + k)]

Where stem:[G] actes on stem:[P(ZZ_12)], stem:[G] is composed of 96 operations :

[.text-center]
{ T0, T1, …​, T11 } x { M1, M5, M7, M11, CM1, CM5, CM7, CM11 }

The smallest subgroup of G is `M1-T0`  and the largest is `G` itself.

For generate stem:[G], a restricted set of *generator operations* is sufficient (ref. Caley table algorithm), the same goes for its subgroups.

For example, cyclic sous-group of G can be denote by this *subgroup generator* `M1-T1`, because is one of the 4 generators of the cyclic group `{M1-T0, M1-T1, M1-T2, ..., M1-T11}`

NOTE: The four generators are `M1-T1`, `M1-T5`, `M1-T7`, `M1-T11`, and by convention, it is "the smallest" that takes precedence, as for prime form of an orbit.

Some common and remarkable subgroups and one subgroup generator selected:

- Trivial  subgroup : `M1-T0` (4096 orbits)
- Dihedral subgroup : `M11-T1` (224 orbits)
- Affine subgroup : `M5-T1, M7-T1` (158 orbits)
- G extended affine group : `M5-T1, M7-T1, CM1-T1` (88 orbits)

The classification of pcs allows the implementation multiple equivalence relations, beyond the well-known "up to one transposition".

[#classification-table]
=== A classification table of P(Z~12~)

Here is an inventory published in the collective work "Autour de la Set Theory".

_"The table [below] shows the 13 different classifications of sets determined by the different definitions of the term "equivalence". The list includes all sets, the empty set, and the so-called trivial cardinalities 1, 2 (and 10, 11), as well as the aggregate. The classification problem posed by trivial cardinalities was widely discussed in the 1950s <<PERLE>>" ( source : <<LVERDI>>)._

[#LVerdi-Table]
.From "Autour de la Set Theory" (<<LVERDI>>), page 41 (author Luigi Verdi)
image:tableau-sous-groupes-ircam.png[tableau-sous-groupes-ircam]

//
// .From https://www.emis.de/journals/SLC/opapers/s26fripert.pdf (Andreatta ircam)
// image:common-groups.png[common groups]

=== 17 subgroups computed

A calculation was carried out in order to inventory all possible subgroups of our reference group stem:[G] with its 96 operations. This results in 16+1 subgroups (+ 1 for trivial group), visible in the appendix (<<_subgroups_and_their_generators>>) and listed below.

NOTE: All operation are with suffixe -T1, for include all steps of transposition and to be sure to inject the neutral operation (M1-T0) into the group.
 +
 As any subgroup includes the neutral operation in its elements, suffixe "-T1", being implied, is omitted.
 +
Example : [M1-T1 M11-T1] => [M1 M11]

.Enumeration of subgroups, by cardinality
[%header,frame=ends,grid=rows, cols="8h,^1,^1,^1,^1,^1,^1,^1,^1,^1,^1,^1,^1,^1,>1s,^1e,^4"]
|===
.^|SubGroup/Card .^|0 .^|1 .^|2 .^|3 .^|4 .^|5 .^|6 .^|7 .^|8 .^|9 .^|10 .^|11 .^|12 .^|stem:[sum_("orbits")] .^|#Ops .^|name

|[M1-T0]
|1
|12
|66
|220
|495
|792
|924
|792
|495
|220
|66
|12
|1
|4096
|1
|Trivialstem:[""_(ZZ_12)]

|[M1]
|1
|1
|6
|19
|43
|66
|80
|66
|43
|19
|6
|1
|1
|* 352
|12
|Cyclicstem:[""_(ZZ_12)]

|[M1 M7]
|1
|1
|5
|13
|28
|40
|50
|40
|28
|13
|5
|1
|1
|226
|24
|

|[M1 M11]
|1
|1
|6
|12
|29
|38
|50
|38
|29
|12
|6
|1
|1
|* 224
|24
|Dihedralstem:[""_(ZZ_12)]

|[M1 M5]
|1
|1
|5
|12
|28
|38
|48
|38
|28
|12
|5
|1
|1
|218
|24
|

|[M1 CM11]
|1
|1
|6
|19
|43
|66
|56
|(66)
|(43)
|(19)
|(6)
|(1)
|(1)
|192
|24
|

|[M1 CM5]
|1
|1
|6
|19
|43
|66
|50
|(66)
|(43)
|(19)
|(6)
|(1)
|(1)
|186
|24
|

|[M1 CM7]
|1
|1
|6
|19
|43
|66
|46
|(66)
|(43)
|(19)
|(6)
|(1)
|(1)
|182
|24
|

|[M1 CM1]
|1
|1
|6
|19
|43
|66
|44
|(66)
|(43)
|(19)
|(6)
|(1)
|(1)
|* 180
|24
|

|[M1 M5 M7 M11]
|1
|1
|5
|9
|21
|25
|34
|25
|21
|9
|5
|1
|1
|* 158
|48
|Affinestem:[""_(ZZ_12)]

|[M1 M7 CM5 CM11]
|1
|1
|5
|13
|28
|40
|38
|(40)
|(28)
|(13)
|(5)
|(1)
|(1)
|126
|48
|


|[M1 M11 CM1 CM11]
|1
|1
|6
|12
|29
|38
|35
|(38)
|(29)
|(12)
|(6)
|(1)
|(1)
|122
|48
|

|[M1 M11 CM5 CM7]
|1
|1
|6
|12
|29
|38
|33
|(38)
|(29)
|(12)
|(6)
|(1)
|(1)
|120
|48
|

|[M1 M5 CM7 CM11]
|1
|1
|5
|12
|28
|38
|35
|(38)
|(28)
|(12)
|(5)
|(1)
|(1)
|120
|48
|

|[M1 M7 CM1 CM7]
|1
|1
|5
|13
|28
|40
|30
|(40)
|(28)
|(13)
|(5)
|(1)
|(1)
|118
|48
|

|[M1 M5 CM1 CM5]
|1
|1
|5
|12
|28
|38
|31
|(38)
|(28)
|(12)
|(5)
|(1)
|(1)
|116
|48
|

|[M1 M5 M7 M11 CM1 CM5 CM7 CM11]
|1
|1
|5
|9
|21
|25
|26
|(25)
|(21)
|(9)
|(5)
|(1)
|(1)
|* 88
|96
|G = stem:[Aff_cZZ_12]
|===

Only 5 are identified out of the 13 classifications in the table : <<LVerdi-Table>>.

Other view, the lattice of subgroups, without trivial group, identified by their cardinality.

.Subgroups lattice - prefix "M" and "M1" are omitted (M1 CM11 => C11) (J-Y. Fusil - 2009)
image::lattice-subgroups12.png[lattice-subgroups12]

NOTE: 4 of its 5 known subgroups are located on the central vertical axis.


== PCS Revisited



=== V1 : With _iPivot_

<<_for_better_basic_operations>>

=== V2 : With _mapping_

<<_for_better_projection>>

[#_for_better_basic_operations]
== For better basic operations

As they stand, the generally accepted basic operations of musical set theory pose a logic problem that we raise here.

=== Understanding what's wrong

Let's take the inversion operation as an example.

In the literature on post-tonal analysis, inversion operation can be found expressed in two forms :

- stem:[InverseA(Pcs) = { (n - x) mod n | x ∈ Pcs }] // basic version <<Forte>>

- stem:[InverseB(Pcs) = { (n - 1) * x mod n | x ∈ Pcs }] // https://en.wikipedia.org/wiki/Multiplication_(music)[multiplicative version M11]

Example : C Major scale `[0 2 4 5 7 9 11]`

* InverseA(`[0 2 4 5 7 9 11]`) :

`0` -> `12 - 0` -> `#0#`

`2` -> `12 - 2` -> `#10#`

`4` -> `12 - 4` -> `#8#`

`5` -> `12 - 5` -> `#7#`

`7` -> `12 - 7` -> `#5#`

`9` -> `12 - 3` -> `#3#`

`11` -> `12 - 11` -> `#1#`

This gives : InverseA(`[0 2 4 5 7 9 11]`) -> `[#0 1 3 5 7 8 10#]`


* InverseB(`[0 2 4 5 7 9 11]`) :

`0` -> `11 x 0` -> `#0#`

`2` -> `11 x 2` -> 22 mod 12 -> `#10#`

`4` -> `11 x 4` -> 44 mod 12 -> `#8#`

`5` -> `11 x 5` -> 55 mod 12 -> `#7#`

`7` -> `11 x 7` -> 77 mod 12 -> `#5#`

`9` -> `11 x 3` -> 33 mod 12 -> `#3#`

`11` -> `11 x 11` -> 121 mod 12 -> `#1#`

This gives : InverseB(`[0 2 4 5 7 9 11]`) -> `[#0 1 3 5 7 8 10#]`

As expected, _inverseA_ and _inverseB_ are *same logic* : [.underline]#CMajor is transformed in III degree of its VIb Major# (Ab Major)

.M11 on C Major = III degree of VIb Major
image::CMajor-M11-noPivot.png[CMajor-M11]

Now that we have seen how the PCS Do Diatonic Major behaves, let's take C# Major / Db Major : `[0 1 3 5 6 8 10]`


* The inverse of C# Major, _inverse_(`[0 1 3 5 6 8 10]`) :

`0` -> `12 - 0` -> `#0#`

`1` -> `12 - 1` -> `#11#`

`3` -> `12 - 3` -> `#9#`

`5` -> `12 - 5` -> `#7#`

`6` -> `12 - 6` -> `#6#`

`8` -> `12 - 8` -> `#4#`

`10` -> `12 - 10` -> `#2#`

InverseA(`[0 1 3 5 6 8 10]`) = InverseB(`[0 1 3 5 6 8 10]`) -> `[#0 2 4 6 7 9 11#]`

image::DbMajor-M11-noPivot.png[DbMajor-M11]

#⚠# Oh!, how come the treatment of inversion for a C#/Db Major *differs* from that of a C Major?

The expected correct answer of Inverse(`[0 1 3 5 6 8 10]`)  should have been `[#1 2 4 6 8 9 11#]`, III degree of A Major (the VIb Major of Db Major) and not `[0 2 4 6 7 9 11]`.

Other example, with a _Limited Transposition_ scale : _C Dim7_

image::CDim7-infos.png[CDim7-infos]

As you might expect, a diminished seventh chord is *very strongly symmetrical*. Observe its stabilizers, there are 16 of them and 4 are in T0 (highlighted in yellow in the screenshot above) : `#M1-T0#` of course, and  `#M5-T0#`, `#M7-T0#` and `#M11-T0#`.

// docinfo.html has a rule css for error red

[.text-center]
--

[#zero-fixed-problem]
.Basic operations in Musical Set Theory
[%header,cols="^,^,^,^,^"]
|===
|Scale|M11-T0 (inversion) |M5-T0|M7-T0|Dim7 waiting as strongly invariant

|image:clock-0369.png[]|image:clock-0369.png[]|image:clock-0369.png[]|image:clock-0369.png[]| #OK#

|[0 3 6 9]|[0 3 6 9]|[0 3 6 9]|[0 3 6 9]| #OK#

|image:clock-14710.png[]|image:clock-25811.png[]|image:clock-25811.png[]|image:clock-14710.png[]|  #[2 5 8 11] should be [1{nbsp}4{nbsp}7{nbsp}10]#

|[1 4 7 10]|#[2 5 8 11]#|#[2 5 8 11]#|[1 4 7 10]| #???!#
|===

--

Obviously [2 5 8 11] is an intruder! business logic is not good. But then why is he here???

=== The "fixed zero problem"

The basic operations of musical set theory, which are the standard in the field, have a peculiarity: *they are always centered on 0 (zero)*, thus defining it as a fixed point we call the *_"fixed zero problem"_*.

The bad result we observed comes from the fact that the algorithms confuse index and Pitch Class name, both being expressed by integers (a very useful confusion, by the way).

Calculations performed directly with these values leads to a falsely controlled side effect.

Example : `[1 4 7 10] x 11 = [11 44 70 110] modulo 12 = [11 8 5 2] => #[2 5 8 11]#`


====
[.text-center]
*_"fixed zero problem"_*.

This inconsistency doesn't seem to bother the people who gravitate toward the _Musical Set Theory_ (?).

This can be explained by :

* An approach guided by the results pre-determined by the authors, authors who do not attach importance to the logic of the tools they use.

* The fact that the "intruder PCS", resulting from bad calculation logic, are, however, *part of the same orbit as the reference PCS*. So, result is "up to transformation", which is not precise enough, not fair enough for our needs.

In our case, this is a problem, because we want :

* *Consistency between geometric transformations and algebraic transformations*
* Maintain integrity of a PCS along its affine transformations. The main rule is the pivot must be a PC *belonging* to the PCS, and this is not the case when the pivot is always set to zero.
// * *That what an instrumentalist observes in fingering of phrasing must echo a harmonic structure*

====

As any musician would expect, the main characteristics of a PCS *should be insensitive to the transposition step* : the characteristics of a PCS remain unchanged compared to those of the same PCS transposed by a _k-step_.

D-Major PCS shares same structural characteristics as any Major PCS.

These characteristics include:
_Interval structure, Interval vector, Forte number, limited meta-transposition status, limited transposition status, stabilizer_...

[NOTE]
--
Let's note that the "fixed zero problem" does not exist on PCS in Prime Form, because, expect the empty element, all PCS in Prime form have zero as their first pitch class.

We also do not know whether solving the _fixed-zero-problem_ can have repercussions on transformational theory (David Lewin), which, we think, is not limited to PCS in Prime Form.

--

[#understand-fixed-point-algorithm]
=== Idea of solution

The points fixed by the transformation operations depend essentially on _n_. For _n_ = 12, these fixed points are represented by this figure :

.Template of fixed points (n = 12)
image::fixed-indexes-n12.png[fixed-indexes-n12]

**
It therefore becomes necessary to use this fixed points template wisely.
**

Without questioning everything, especially the arithmetic of PCs, a general solution would be to transpose any PC undergoing a transformation operation, by a step _k_ that brings it back to the zero origin point, BEFORE the transformation, to perform the transformation, then to return to its starting point, transposition of _k-inverse_, AFTER the transformation. That is three operations instead of just one. This is the price to pay for good consistency. That is :

. Transpose, by a step ok _-k_, the PCS to make one of its PCs coincide with zero
. Apply the requested transformation (_ax + t_)
. perform an inverse transposition (_k_)

Some examples :

Example1 Dim7 : `M11-T0` on `[1 4 7 10]`

. `[1 4 7 10]` transpose with `k = -1` => `[0{nbsp}3{nbsp}6{nbsp}9]`
.  `[0 3 6 9]` x 11 modulo 12 => `[0{nbsp}3{nbsp}6{nbsp}9]`
. `[0 3 6 9]` transpose with `k = 1` => `#[1{nbsp}4{nbsp}7{nbsp}10]#`

Example2 Major scale : `M11-T0` on  D Major `[1{nbsp}2{nbsp}4{nbsp}6{nbsp}7{nbsp}9{nbsp}11]`

. `[1{nbsp}2{nbsp}4{nbsp}6{nbsp}7{nbsp}9{nbsp}11]` transpose with `k = -2` => `[0{nbsp}2{nbsp}4{nbsp}5{nbsp}7{nbsp}9{nbsp}11]`
. `[0{nbsp}2{nbsp}4{nbsp}5{nbsp}7{nbsp}9{nbsp}11]` x 11 modulo 12 =>
`[{nbsp}1{nbsp}3{nbsp}5{nbsp}7{nbsp}8{nbsp}10]`

. `[0{nbsp}1{nbsp}3{nbsp}5{nbsp}7{nbsp}8{nbsp}10]` transpose with `k = 2` => `#[0{nbsp}2{nbsp}3{nbsp}5{nbsp}7{nbsp}9{nbsp}10]#`

The solution consists of defining the value of _k_ to be applied, which will be used by all transformation operations.

Choosing the "smallest PC" of the PCS is not decisive: it works in the case of C# dim7, but not on D major, [1{nbsp}2{nbsp}4{nbsp}6{nbsp}7{nbsp}9{nbsp}11], because its first and minimum PC is 1 (C#), the seventh of the scale, and not its root, as in C major.

*We must therefore choose to add a new property to the very concept of PCS.*

=== Extended PCS with pivot

Solution to resolve mismatch basic operations is to add a mobile pivot property to PCS (Extended PCS)

The solution consists, for a PCS given, of selecting a Pitch Class that :

- Serves as a _index pivot_ (not necessary "zero")
- Belongs to the PCS being studied
- Doesn't change the nature of a PCS, just expands the concept by making it *slightly less abstract*.
- Default "the smallest PC" of PCS, or undefined if PCS is empty set. By correlation, PCS in prime form have zero as their pivot value by default.

For this, we are going to add a new feature to the PCS, what we call  *_iPivot_* (pivot index or pivot pitch class, or fixed pitch class, or root pitch class...)

This property can be *optionally* brought to the user's attention by mentioning it in *suffix*, as subscript, after the textual representation of the PCS. Ex : `[0 4 7]`~`4`~

The presence of a movable pivot allows us to answer questions like: _How do you represent a G Major with a PCS?_
The answer consists of giving the PCS that includes only the PCs of the expected scale (`[0 2 4 6 7 9 11]`), and positioning the pivot on the root (G = 7), so : `[0 2 4 6 7 9 11]`~`7`~

Other examples :

.PCS with pivot
[%header,cols="^,^,^,^"]
|===
|PCS|Textual|Clock|Comment

|CDim7 (iPivot = 0)
|`[0 3 6 9]`~`0`~
|image:pcs-0369-pivot0.png[pcs-0369-pivot0]
|The pivot is indicated by a red color

|EbDim7 (iPivot = 3)
|`[0 3 6 9]`~`3`~
|image:pcs-0369-pivot3.png[pcs-0369-pivot3]
|idem

|C#Dim7 (iPivot = 1)
|`[1 4 7 10]`~`1`~
|image:pcs-14710-pivot1.png[pcs-14710-pivot1]
|idem

|D Major (iPivot = 2)
|`[1{nbsp}2{nbsp}4{nbsp}6{nbsp}7{nbsp}9{nbsp}11]`~`2`~
|image:pcs-DMajor-pivot2.png[pcs-DMajor-pivot2]
|idem
|===

IMPORTANT: We do not have integrated this property, _iPivot_, in the logical identity. Thus, `[0{nbsp}3{nbsp}6{nbsp}9]`~`0`~ and `[0{nbsp}3{nbsp}6{nbsp}9]`~`3`~ will be considered identical PCS `[0{nbsp}3{nbsp}6{nbsp}9]` (same id)
+
+
*Therefore an extended PCS remains a (common) PCS.*

.Red Pitch Class, in Clock view, denote _iPivot_ property
image::big-major-cyclic-orbit.png[Major cyclic orbit]

=== Resume

* Extended PCS is a classic PCS augmented by _iPivot_ property.

* This property will allow to fix a PC, pointed by _iPivot_, like the traditional "zero fixed", in order to make the transformation operations more consistent.

* Moreover, the _iPivot_ property allows us to take a particular look at a PCS, as a scale, a chord according to a reference note (tonic, root, etc.)

It then remains for us to revisit the general affine which uses the iPivot property. This is what we will do now.

[#design-affine-pivot]
=== Affine with pivot on Extended PCS

Now that we have a property that allows us to designate a transformation pivot, we can get on with enriching the affine transformation function.

We have seen that when an transformation operation acts on an extended PCS, in order to take into account a particular fixed point (and not just zero), it will involve a series of three operations instead of a single one (M1-Tp, Ma-Tk then M1-T-p). We call this operation _"AffinePivot"_

====
[.text-center]
--
*_AffinePivot_~a,k~ : Composition of 3 affine operations*

stem:["AffinePivot"_(a,k)  : Extended\ PCS xx NN xx NN -> Extended\ PCS]

stem:["AffinePivot"_(a,k)(A) := M_1T_p(A) @ M_aT_k(A) @ M_1T_-p(A)]

Where stem:[p] is _iPivot_ value of stem:[A]
--
====

=== AffinePivot reduced

We are now preparing to establish a condensed version of the function.

stem:["AffinePivot"_(a,k)(A) := M_1T_p(A) @ M_aT_k(A) @ M_1T_-p(A)]

Recall : The affine function stem:[M_aT_k] is defined by  stem:[(ax + k)] that we can denote stem:[(a, k)] for the sake of simplification.

The affine composition function, that define one single function from composition of two functions, is well known, is : stem:[(a, k) @ (a', k') = (aa', ak' + k)].

We will use this reduction to reduce the composition of 3 functions, stem:[M_1T_p(A) @ M_aT_k(A) @ M_1T_-p(A)], to a single one.

* = stem:[(1, p) @ (a, k) @ (1,-p)]
* = stem:[(1, p) @ (a, -ap + k)]
* = stem:[(a, -ap + k + p)]
* = stem:[(a, -(a-1)p + k)]
* = #stem:[(a, p(1 - a) + k)]#  <= solution

// a * (x - pivot) + pivot + t // 1 mut 1 sous 2 add


Unsurprisingly, only the transposition step is affected.


.Examples
--

* With _p_ = 0

- stem:[(a, p(1 - a) + k)]
- stem:[(a, k)]  // ok this is initial function composition affine

* With _p_ = 0 and _a_ = 1

- stem:[(a, p(1 - a) + k)]
- stem:[(1, k)]  // ok, simple transposition

* With _p_ = _0_ and _a_ = _1_ and _k_ = _0_

- stem:[(a, p(1 - a) + k)]
- stem:[(1, 0)]  // ok, neutral operation (id)

* With _p_ = 2 and _a_ = 11  and _k_ = _3_

- stem:[(a, p(1 - a) + k)]
- stem:[(11, 2 * (1 - 11) + 3)]
- stem:[(11, -17)]
- stem:[(5, 7)] // modulo 12

--
We can now define the operation that acts on Extended PCS.

====
[.text-center]
--
*AffPivot : An action on Extended PCS*

stem:["AffPivot"_(a,k)(A) := {\ (ax + p(1 - a) + k) mod |E| \ },  forall  x in A]

or better (with minimum operations)

stem:["AffPivot"_(a,k)(A) := {\  a(x - p) + p + k mod |E| \ },  forall  x in A]

// a * (x - pivot) + pivot + t // 1 mut 1 sous 2 add

_Where *a* is prime with |E|, *k* a step of transposition, *p* the iPivot of A_

--
====

[IMPORTANT]
====
_MusaicBox_ works with Extended PCS and implements affine function with _iPivot_, as defined by _affinePivot_ algorithm, and implement as a permutation function stem:[P(E) -> P(E)].

Although the affine function has replaced the usual affine functions in the project ... It should not be lost in sight that it is only a contraction of a composition of functions: `M1-T~p~ ∘ M~a~-T~k~ ∘ M~1~-T~-p~` or `M1-T~p~(M~a~-T~k~(M~1~-T~-p~( pcs )))`
as explained here design-affine-pivot>>.
====


// And yet, the AffineMivot function has taken the place of the usual Affine functions in the project... Obviously to be clarified...

//
// === Composition function of (a, p(1 - a) + k)
//
// Composition function of traditional affine operation is
//
// stem:[(a,k) @ (a',k') = (aa', ak' + k)]
//
// which we apply to our extended function.
//
// Function composition stem:[@] is :
//
// - = stem:[(a, p(1 - a) + k) @ (a', p'(1 - a') + k')]
// - = stem:[(aa', a * (p'(1 - a') + k') + p(1 - a) + k)]
// - = stem:[(aa', -aa'p' + ap' +ak' -ap + p + k)]
// - = #stem:[(aa', -ap'(a + 1) + p(1-a) + ak' + k)]# <= solution
//
// Examples
//
// * With _p_ = 0 and p' = 0:
//
// - stem:[(aa', -ap'(a + 1) + p(1-a) + ak' + k)]
// - stem:[(aa', ak' + k)]  // ok this is initial function composition affine
//
// * With _p_ = _p'_ = 0 and _a_ = 1 and _a'_ = 1
//
// - stem:[(aa', -ap'(a + 1) + p(1-a) + ak' + k)]
// - stem:[(1, k' + k)]  // ok, simple transposition
//
// * With _p_ = _p'_ = _0_ and _a_ = _a'_ = _1_ and _k_ = _k'_ = _0_
//
// - stem:[(aa', -ap'(a + 1) + p(1-a) + ak' + k)]
// - stem:[(1, 0)]  // ok, neutral (or id) operation
//
// * With _p_ = 1 _p'_ = 2 and _a_ = 5  _a'_ = 7 and _k_ = 2 _k'_ = _3_
//
// - stem:[(aa', -ap'(a + 1) + p(1-a) + ak' + k)]
// - stem:[(35, -10(5 + 1) + (1-5) + 15 + 2)]
// - stem:[(11, 1)] // modulo 12

Examples of new transformations taking into account the pivot :

.Revisited operations of Musical Set Theory
[%header,cols="^,^,^,^,^"]
|===
|Scale|M11-T0 (inversion) |M5-T0|M7-T0|Dim7 waiting as strongly invariant

|image:pcs-0369-pivot0.png[]|image:pcs-0369-pivot0.png[]|image:pcs-0369-pivot0.png[]|image:pcs-0369-pivot0.png[]| #OK#
 +
 +
 Cdim7

|[0 3 6 9]|[0 3 6 9]|[0 3 6 9]|[0 3 6 9]| #OK#

|image:pcs-14710-pivot1.png[]|image:pcs-14710-pivot1.png[]|image:pcs-14710-pivot1.png[]|image:pcs-14710-pivot1.png[]|{nbsp}
 +
 C#dim7

|[1 4 7 10]|[1 4 7 10]|[1 4 7 10]|[1 4 7 10]|OK
+
C#dim7 has same transformation types as Cdim7


|image:pcs-CMaj-pivot0.png[]|image:pcs-CMaj-M11-pivot0.png[]|image:pcs-CMaj-M5-pivot0.png[]|image:pcs-CMaj-M7-pivot0.png[]| CMajor transformations

|[0 2 4 5 7 9 11]|[0 1 3 5 7 8 10]|[0 1 7 8 9 10 11]|[0 1 2 3 4 5 11]|ok


|image:pcs-DMajor-pivot2.png[]|image:pcsDMaj-M11-Pivot2.png[]|image:pcsDMaj-M5-Pivot2.png[]|image:pcsDMaj-M7-Pivot2.png[]| DMajor transformations

|[1 2 4 6 7 9 11]|[0 2 3 5 7 9 10]|[0 1 2 3 9 10 11]|[1 2 3 4 5 6 7]| DMajor has same transformation types as CMajor

|===

=== Conclusion

* After observing the so-called "fixed zero problem", we were led to introduce a new property to the PCS concept, called _iPivot_, to improve the consistency of affine transformation operations (inversion, M5, and M7).

* The concept of default value for iPivot has been introduced, which allows for consistency and determinism in the group action (construction of P(E), orbits and stabilizers).

* The value of the iPivot property has no impact on the identity of a PCS, as defined in <<identity-pcs>>.

* The PCS, equipped with the iPivot property, made it possible to define the general affine function (for inversion, M5, M7) more precise, more coherent.

* These two features (iPivot and new affine function) enrich the concept of PCS, which we call _Extended PCS_ (100% compatible with the basic PCS concept).


////

Abstract général
  idée d'un POC du projet 88musaics.org
  Le POC, en retour, nous a obligé à résoudre des problèmes qui nous a amené à proposer une évolution du concept même de PCS et de ses opérations de bases associées (affine et complément)

https://www.reddit.com/r/AskAcademia/comments/2m64qo/what_is_the_difference_between_an_abstract_and_a/?tl=fr

Un résumé est un résumé de l'article et vous présentez le contexte et le raisonnement derrière le travail :

X est un problème parce que Y, nous avons donc fait Z et trouvé K.

X : Opérations affine de base
Y : inconsitence des opérations
Z : ajout au PCS une propriété nommées iPivot.
K : ... nous avons donc redéfini l'opération affine afin qu'elle exploite la donnée de pivot portée par le PCS sur lequel elle agit.



Une conclusion est ce que vous avez retenu de votre travail :

Après avoir fait Z et les expériences A, B et C, nous montrons K.

////

[#_for_better_projection]
== For better projection

For now, let's look at the configuration of the piano keyboard, over an octave.

Piano keyboard gives pride of place to n = 7, embodied by the C major diatonic scale.

.Piano keyboard configuration
image::clavier7notes.svg[]

.Other view of piano keyboard
image::clavier7notesCircle.svg[]

TIP: Seven PCS of diatonic design as a circle divided into 7 equal parts


Physically, *the white keys are equidistant from each other, but musically, this is not the case*. Example: C-D = 2 semitones, the same for D-E, but E-F = 1 semitone.

This is so, because the piano keyboard made is designed *to map 7 into 12*.

When user simultaneously presses the white keys C E G, that is, the keys [0 2 4], it produces the chord [0 4 7]. Such a system is an automatic correspondence of stem:[ZZ_7] to stem:[ZZ_12] ( characteristic of some chromatic instruments as piano).

.Regularity of 7 broken in 12 mapped
image::pcs-246-mapped-047.png[]


=== Mapping


When n is less than 12, interesting properties can be exploited. For example, with n=7, a prime number thus comprising many generating cycles. By examples:

* Steps of 2: for constructing chords 0 2 4 6 8 10 12 modulo 7 -> 0 2 4 6 1 3 5 -> C E G B D F A
* Steps of 3: chord progressions (C F B E A D G)

The major diatonic scale is special in that it is a sequence of 1 or 2 semitones : Major scale intervallic structure is (2,2,1,2,2,2,1)

Mapping system explained by figure below.

[#mapping-explained]
.Mapping 7 -> 12 Explained mapping from [0 2 4] to [0 4 7]
image::understand-mapping-system.svg[understand-mapping-system 7 to 12]

From there, studying n=7 as we did for n=12 is a short step. The number of possible combinations is 2^7 = 128.

* Trial group has 128 orbits
* Cyclic group has 20 orbits
* Affine group has 10 orbits
* Musaic (Complement+Affine) group has 5 orbits

.N=7
[cols="1,1,^3"]
|===
|Group name|Group operations|Orbits

|Trial group
|`M1-T0`
| cardinal = 128


|Cyclic group
|`M1`
|image:cyclic-group-n7.png[]

cardinal = 20


|Affine group
|`M1 M2 M3 M4 M5 M6`
|image:affine-group-n7.png[]

cardinal = 10

|Musaic group (Complement+Affine)
|`M1 M2 M3 M4 M5 M6 CM1 CM2 CM3 CM4 CM5 CM6`
|image:musaic-group-n7.png[]

cardinal = 5

|===

But Major Scale is not only one to have 7 pitches and only <1,2> as *generic interval* (see
https://en.wikipedia.org/wiki/Diatonic_set_theory[Diatonic Set Theory on wikipedia].

There are 29 PCSs with this characteristic, 13 of which have a cardinality between 5 and 8. See <<list-pcs-same-as-major-scale>>

* Why not focus on another major scale, like D Major, for example?

* Why focus only on this PCS with cardinality = 7?

* Why not explore other values of N?

This is how the idea of considering a PCS in a constant mapping situation came about.

=== Auto-Mapping

Let's take the example of a piano keyboard. Despite the predominance of N=7, the configuration integrates 7 into 12 (with the black keys). We say that this arrangement is a mapping of 7 over 12.

The AutoMap function can perform this mapping, and many more.

AutoMap transforms a given PCS _p_ of cardinality _x_, belonging to stem:[P(ZZ_12)], into a PCS _p'_ of stem:[P(ZZ_x)] mapped to stem:[P(ZZ_12)], having  *_p_* as *template mapping* - which explains the *"auto"* prefix of the function name. ( see <<mapping-explained>> )

To get the CM7 mapped in figure below, we need to perform two steps:

.  Select Automap from Diatonic Major scale
.  Select only 0 4 7 11 (by deselect 2 4 9)

And

[start=3]
. Add to WB page


image::CM7-mapped.png[]


On WhiteBoard page, let's consider CM7 as the PCS of stem:[P(ZZ_7)], with the C major diatonic scale as a reference. PCS [0 2 4 6] is mapped as [0 4 7 11].

Right click on this PCS, then _orbits->Cyclic orbit_, you get 7 other PCS, each mapped :

.CM7 mapped to Diatonic Major  (in orbit cyclic Z~7~)
image::CM7-mapped-diatonic-maj-cyclic-orbit.png[CM7-mapped-diatonic-maj-cyclic-orbit]


=== Auto-Mapping inverse

Inverse of automap is the _unmap_ function.

From a PCS _p_, mapped to stem:[ZZ_12], UnMap transform templateMapping of _p_  to an new PCS _p'_ *mapped to itself*. A PCS mapped to itself is considered as no mapped.

Return to PCS page, Go back to the PCS page, normally you should have the CM7 PCS Mapped. If not, map it.

Select UnMAp, you get a not mapped PCS [0 4 7 11] ([C E G B]), and let us ask for pcs in its cyclic orbit.

image::CM7-unmapped.png[CM7-unmapped]

Add it to WB page, and, again, do right click on this PCS, then _orbits->Cyclic orbit_, you get 12 other PCS :

.CM7 unmapped with its orbit cyclic (in Z~12~)
image::CM7-cyclic-orbit.png[CM7-cyclic-orbit]

TIP: You can Undo/Redo at any time.

=== Conclusion

* We introduced the concept of Mapping, which allows you to explore PCSs from a *subgroup* of stem:[ZZ_12].

* We introduced the autoMap and unMap functions.

* We discussed the use of the autoMap and unMap functions in the application and presented a use case involving the discovery of the natural chords, and their quality, from major diatonic scale.

* The mapping function extends the concept of PCS again.

* The mapping function further extends the concept of PCS.
By default, a PCS is mapped to itself, and therefore considered "unmapped."

Therefore, this new concept does not disrupt the basic concept of PCS defined by Musical Set Theory.

We even believe that, beyond its practicality, the doubly extended PCS increases the exploration potential of its abstract descriptions.

== Appendix


=== Stabilizer naming

As specified in the chapter <<_stabilizer_and_fixed_pcs>>, a stabilizer is inseparable from an orbit, it is even one of its components.

It turns out that possible several orbits share the same stabilizer. The best known of them is the only one to be composed of only one transformation operation is stem:["M1-T0"], the _identity operation_, also called _neutral operation_.

For example, concerning the cyclic group, composed of the 12 transposition operations (M1-T0, M1-T1, ... M1-T11), 335 of its orbits share this same stabilizer M1-T0.

As a result, grouping the orbits according to their stabilizer can be very relevant. Indeed, such a grouping criterion allows to quickly identify the scales with limited transposition.

In the "Z~n~ explorer" page, grouping by stabilizer is triggered by the button: image:button-show-orbits-grouped-by-stabilizer.png[Show orbits grouped by stabilizer]

Stabilizers of cyclic group are : `M1-T0~2*, M1-T0~1*, M1-T0~3*, M1-T0~4*, M1-T0~6*` and `M1-T0`.

Operations of stabilizer are here represented in a _reduced name format_.

==== Reduced Name

`M1-T0~1*` : Here represents the different transposed versions of the operation `M1`.

Suffix `T0~1*` means that all transpositions of step `1` are concerned, starting from `T0`.

Thus, `M1-T0~1*` is a reduced (compressed) version of : `M1-T0 M1-T1 M1-T2 ... M1-T10 M1-T11`

More formally :

====
[.text-center]
--

*Understand Reduced Stabilizer Name*

stem:[ "string " -> " Set of Operations"]

stem:["C"_b"M"_a"-T"_"i""~step*" :=  uuu_(k=0)^(n/"step") "C"_b"M"_a"-T"_(i+(k cdot "step"))]

where _step_ is a divisor of _n_
--
====

Examples :

- CM11-T0~6* = { CM11-T0, CM11-T6 }
- CM11-T1~6* = { CM11-T1, CM11-T7 }
- M1-T0~1* = { M1-T0, M1-T2, M1-T3, ..., M1-T10, M1-T11 }
- M5-T1~4* = { M5-T1, M5-T5, M5-T9 }

This type of representation increases the readability of a stabilizer. Empty pcs is the best case, because the set of stabilizer of G~[∅]~ is composed of 48 operations, and denoted M1-T0~1* M5-T0~1* M7-T0~1* M11-T0~1*, only 4 reduced names vs 48, a nice saving!


==== Meta-Stabilizer

A "meta-stabilizer" is a stabilizer "up to transposition", so, suffix `-Tk` is omitted.

.Meta-Stabilizer naming examples
|===
|Stabilizer|Meta-Stabilizer

|`M1-T0 CM11-T6`
|*M1 CM11*

|`M1-T0 M1-T6 M5-T0 M5-T6 M5-T1~4*`
|*M1 M5*

|`M1-T0`
|*M1*

|`M1-T0~1*`
|*M1*

|`M1-T0~1* M5-T0~1* M7-T0~1* M11-T0~1*`
|*M1 M5 M7 M11*
|===

With stem:[n=12], there are 8 meta-stabilizers : M1, M5, M7, M11, CM1, CM5, CM7, CM11.
A meta-stabilizer can be represented by a geometric figure, a polytrope :

==== Octotrope
Octotrope, a geometric figure for a combination of meta-stabilizers.

--
[.left]
image::octotrope.png["Octotrope def" float="left",align="center"]
--

An orbit can be fixed by one or more meta-stabilizer. Example, Diatonic major scale is meta-fixed by M1 and M11 (i.e. inverse of diatonic scale is also a diatonic structure) See Musaic n° 38. Set of meta-stabilizers linked to a musaic (an orbit) is represented by a octotrope. Examples :

* Major scale [0 2 4 5 7 9 11]  is meta-invariant by M1 and M11, represented by octotrope : image:octotropes/m1-m11.png[m1-m11]
* Diminished scale [0 3 6 9] is meta-invariant by M1, M5, M5 and M11 : image:octotropes/m1-m5-m7-m11.png[m1-m5-m7-m11]

With stem:[n=12], 88 orbits may be partitioned in 13 octotrope classes :

|===
|M1|M1 M5|M1 M7|M1 M11|M1 CM5|M1 CM11|M1 M5 M7 M11|M1 M5 CM1 CM5|M1 M5 CM7 CM11|M1 M7 CM5 CM11|M1 M11 CM1 CM11|M1 M11 CM5 CM7|M1 M5 M7 M11 CM1 CM5 CM7 CM11

|image:octotropes/m1.png[]
|image:octotropes/m1-m5.png[]
|image:octotropes/m1-m7.png[]
|image:octotropes/m1-m11.png[]
|image:octotropes/m1-cm5.png[]
|image:octotropes/m1-cm11.png[]
|image:octotropes/m1-m5-m7-m11.png[]
|image:octotropes/m1-cm1-m5-cm5.png[]
|image:octotropes/m1-cm7-cm11-m5.png[]
|image:octotropes/m1-m7-cm11-cm5.png[]
|image:octotropes/m1-cm1-m11-cm11.png[]
|image:octotropes/m1-cm7-m11-cm5.png[]
|image:octotropes/m1-cm1-m7-cm7-m11-cm11-m5-cm5.png[]

|===

////
[.float-group]
--
image:octotropes/m1.png[]
image:octotropes/m1-m5.png[]
image:octotropes/m1-m7.png[]
image:octotropes/m1-m11.png[]
image:octotropes/m1-cm5.png[]
image:octotropes/m1-cm11.png[]
image:octotropes/m1-m5-m7-m11.png[]
image:octotropes/m1-cm1-m5-cm5.png[]
image:octotropes/m1-cm7-cm11-m5.png[]
image:octotropes/m1-m7-cm11-cm5.png[]
image:octotropes/m1-cm1-m11-cm11.png[]
image:octotropes/m1-cm7-m11-cm5.png[]
image:octotropes/m1-cm1-m7-cm7-m11-cm11-m5-cm5.png[]
--
////

Un octotrope permet d'identifier rapidement la classe des invariants d'une gamme.

Example (PCS page https://musaicbox.org/pcs/pid/1613[0 2 3 6 9 10] ) : image:limited-transf-octotrope.png[]



TIP: On the MusaicBox app, go to page https://musaicbox.org/the88[88 Musaics] to see the different musaics related to their octotrope.

'''

=== Order relation

It would be useful to be able to sort the pcs among themselves. To do this, we need to define a total order relation that verifies:

// stem:[ ∀ x, y ∈ P(E), ( "id"(x) ≤ "id"(y) and "id"(y) ≤ "id"(x) ) => x = y ]

//see syntax https://asciimath.org/
stem:[ AA A, B in P(E)", " \   "id"(A) <= "id"(B) and "id"(B) <= "id"(A)  => A = B ]

In others all, if two PCS have same identity value, then we are dealing with the same PCS.

Question is : How to represent the identity relationship (id function)?

==== State
By definition, a PCS is a collection of PC. Type is not atomic, and may have some algorithmic efficiency problem, so we prefer a scalar identity.

==== Integer

To implement order relation, we use integer representation, to go through the order of natural integer.

==== Polynomial function pid()

Polynomial function (_pid_) is a good candidate for sorting the PCS among themselves.

stem:["pid("pcs")" = sum_(i=0)^(n-1) ""pcs""_"v[i\]" 2^i ] {nbsp} _(exploits the vector representation of a PCS - see PCS representation <<Integer>>)_


However, there remains a bias.

Examples with some pairs of pcs (pcs1 and pcs2), let's compare pid(pcs1) and pid(pcs2) to determine if pcs1 "is less than" pcs2 :

[%header]
.Example problem when compare identity with Polynomial Identifier
|===
|pcs1| pcs2| pid(pcs1) | pid(pcs2)| pcs1 < pcs2
| [ ]| [0]| _0_ | _1_ | **_true_**
|[0 4 7]| [1 5 8]| _145_ | _290_ | **_true_**
|[0 3 7]| [2 6 11]| _137_ | _2116_ | **_true_**
|[0 11] | [0 3 7] | _2049_ |_137_ | **_false_** (???)

#_waiting true_#
|===

In the first line, we admitted that a pcs with a smaller cardinal than another pcs will be considered smaller than the latter. But this is contradicted by the last line, counterintuitive.

We admit that when two PCS are compared, the one with the smaller cardinality will always be considered inferior to the other, which can be defined by :

stem:[forall (pcsA, pcsB) in P(Z_n)^2, |pcsA| < |pcsB| => pcsA  < pcsB]

We have seen, on an example, that _pid_ does not respect this property : stem:["pid"_("[0, 11\]") >  "pid"_("[0, 3, 7\]")]

We need to find another function.

[#identity-pcs]
==== Identity of PCS : id()

To take into account the cardinal in the general order relation that we are looking for, we introduce, independently of _pid_ , a function stem:[w] : stem:[ P(Z_12) -> NN ] {nbsp} defined by :

stem:[w(A) = m cdot |A| ]

In order to give significant weight to _w_ function, independently of _pid_, we take as the value of _m_ (the multiplicative coefficient of the cardinal of _A_) a value greater than the upper limit of the domain of _pid_ which is stem:[\[0..2^12[] {nbsp}, so the first next value outside _pid_ domain is  stem:[m=2^12].

So,  stem:[w(A) = 2^n cdot |A| ]

Augmented polynomial function, which called _id_, taked into account the cardinal, is :

// stem:[id_A = "pid"_A + w_A = "pid"_A + 2^n * |A| ]

====

[.text-center]
--
*id function*

stem:["id" : {0,1}^12 -> N]  {nbsp} defined by :

stem:["id("v")" = "pid"_A + w_A = sum_(i=0)^(n-1) v_i 2^i + 2^n * sum_(i=0)^(n-1) v_i   ]
--
====

[NOTE]
====
Since there exists a function (toVector) which gives the vector image of any PCS, we can also define function _id_ with this domain of definition  stem:["id" : P(ZZ_12) -> N]

Total order relation is definitely implemented by id function :
stem:[forall (pcsA, pcsB) in P(Z_n)^2, "id"(pcsA) <= "id"(pcsB) and "id"(pcsB) <= "id"(pcsA) => pcsA = pcsB]

====

The lower bound is stem:[0] obtained for the vector stem:[[0, 0, ... ,0\]]

The upper bound is stem:[2^n -1 + n2^n = 2^n(n+1)-1], for stem:[n=12], we obtain the vector stem:[[1, 1, ... ,1\]] and value stem:[53247].

An order relation on P(Zn) can be established, which is based on the order relation of natural numbers:

stem:[AA (A, B) in P(ZZ_n)^2 \ \ A <= B <=> "id"(A) <= "id"(B)]

Some properties :

stem:[AA (A, B) in P(ZZ_n)^2 \ \ A <= B and B <= A => "id"(A) = "id"(B)] {nbsp} so stem:[A = B] {nbsp} (_total order_)

stem:[AA (A, B) in P(ZZ_n)^2 \ \ A sube B => id(A) <= id(B) ] {nbsp} (_inclusion compatible_, note : inverse is not true).

stem:[forall (A, B) in P(ZZ_n)^2, |A| <= |B| <=> id(A) <= id(B)] {nbsp} (_cardinality compatible_)

[%header]
.Example Compare with Augmented Polynomial Identifier (id)
|===
|pcs1| pcs2| id(pcs1) | id(pcs2)| pcs1 < pcs1
| [ ]| [0]| _0_ | _4097_ | **_true_**
|[0 4 7]| [1 5 8]| _12433_ | _12578_ | **_true_**
|[0 3 7]| [2 6 11]| _12425_ | _14404_ | **_true_**
|[0 11] | [0 3 7] | _10241_ |_12425_ | **_true_** (ok)
|===

NOTE: In MusaicBox code, Augmented Polynomial Identifier is called _id_, and _pid_ is kept because is commonly used.

==== Application example

Example of application of the id function on a finite set: stem:[E = { "do, "mi", sol" }]

The set of subsets of E is :

[.text-center]
--
stem:[P(E) = { O/, {do},{mi},{sol},{do,mi},{do,sol},{mi,sol}, E }]
--

The figure below, presents (thin black arrow) the set inclusion relation, for example stem:[{do} sube {do, mi}], in minimal coverage, that is to say without transitivities, (for example the relation stem:[{do} sube {do, mi, sol}] is not arrowed - it is a lattice).

The *total order relation* is represented by the black arrow *and* the red arrow.

It is the minimal coverage of the relation defined by the _id_ function. Example: stem:[{do} < {mi} < {sol}].

.Minimal coverage of the relation id in lattice
image:relationOrdreTreilliV3.png[total order relation]

////
== Orbit


Example of _proposition_ : "_To be a major triad_"

There are only 12 pcs, among the 4096 pcs, where this proposition is true.

[%header]
.Different representations of _major triad_
|===
|structure name| intervals | clock | musaic
| Major triad | major third then perfect fifth then perfect forth |specific inscribed polygon image:major-triad-polygone.png[major-triad-polygone]|specific motif image:major-triad-motif.png[major triad motif]
|===

Such proposition can take form of an _equivalence relation_ : _R_ = "_to share same structure_"

Some characteristics of _R_ :

* symmetric : stem:[∀ x, y ∈ P(E), x\ R\ y => y\ R\ x ]

* reflexive : stem:[∀ x ∈ P(E), x\ R\ x ]

* transitive : stem:[∀ x, y, z ∈ P(E), (x\ R\ y and y\ R\ z) => x\ R\ z ]

=== Orbit
Orbit is a set where all of its elements (pcs) are connected by the same equivalence relation.footnote:[see _setoid_ or _bishop set_]

Example : Orbit cyclic of major triad as `{ C,E,G }` is a set with equivalence relations "_having same structure of major triad_". This set is composed of 12 elements (`{ C, E, G }, { Cb, F, Ab }, ..., { B, D#, F# }`)

[.float-group]
--
[.left]
.Orbit Cyclic in score view and Major Triad Motif
image::maj-triad-orbit-score.png["Orbit cyclic" float="left",align="center"]
--

Below, same, with clock representation.

[.float-group]
--
[.left]
.Orbit Cyclic in clock view and their inscribed polygon
image::maj-orbit-clock2.png["Orbit cyclic", float="left", align="center"]
--

If we organize the 4096 pcs set into subsets with equivalence relation "_having same structure (of inscribed polygon)_", we obtain 352 types of polygonsfootnote:[and not 4096/12, because some pcs have less than 12 transposed - limited transposition] therefore 352 subsets (orbits) forming a partition of 4096 pcs set.

[%header]
.Enumeration via line 12 of Pascal triangle
|===
|PCS cardinal|Orbit cardinal 6+^|_Coefficient of Transposition_|Pascal triangle line 12
|||1|2|3|4|6|12|_line 12_
|0|1|1||||||1
|1|1||||||1|12
|2|6|||||1|5|66
|3|19||||1||18|220
|4|43|||1||2|40|495
|5|66||||||66|792
|6|80||1||1|3|75|924
|7|66||||||66|792
|8|43|||1||2|40|495
|9|19||||1||18|220
|10|6|||||1|5|66
|11|1||||||1|12
|12|1|1||||||1
|total|*352*|2|1|2|3|9|335|*4096*
||352 orbits of cyclic group (17 + 335) 5+^|_17 cyclic orbits PCS in Limited Transposition_ (cardinal < 12)| 335 orbits of cardinal 12|4096 orbits of cardinal 1 (trivial group)

|===

Set of all these sets is known as `_P(E)_` (*power set*), and `cardinal(_P(E)_) = 2^n^ = *4096*`, cardinality ordered by line 12 of Pascal triangle.

// More formally, orbits are the result of the action of a group (cyclic, affine, dihedral, ..., musaic) on Z/nZ.

// By example : A4 (440 hz) and their lower and upper octaves share same characteristic : "having a frequency related to be a multiple of 2 of 440 Hz"
//

Pour partitionner l'ensemble des 4096 PCS,

En musique, il est généralement admis que nous pouvons changer la hauteur d'une oeuvre sans en changer fondamentalement sa nature. Dans la musique tonale, cette action est appelée "changement de tonalité".

Exemple : petite mélodie en 2 tonalités

On peut avoir 12 versions de cette mélodie (dans les 12 tonalités). L'ensemble de ces 12 versions est

Equivalence relation : "Having same prime form"

En identifiant n'importe quel son à une meme classe de hauteur (octave), modulo _n_, nous pouvons réduire tout extrait musical à un ensemble classes de hauteur.

It is about gathering all the elements sharing the same characteristic, in the same set called *equivalence orbit*, or *X orbit*, or *orbit* if equivalence context is clear.

TIP: An orbit is a set which can be empty (contains empty pcs) or contain all elements. For a given equivalence relation, an element belongs to only one orbit. Orbits, as a result of a group action, form  a partition of the set on which it acts (4096 PCS).

=== Octave/Enharmonic equivalence

Reduce to 12 pitches class and its 4096 PCS combinaisons (2^12^).

*Trivial group* has *4096* orbits, each orbit has max only one pcs (cardinal = 1)

=== Intervallic structure equivalence up to shift

This is form a cyclic group (group action on Z12).

All pcs of a given orbit share *same intervallic structure up to circular shift*, *obtained by transposition*.

In other words, PCS in clock representation having the *same inscribed polygon*.

Cyclic group has *352* orbits.footnote:[352 > 4096 / 12, because somme pcs are there cardinal cyclic orbit smaller than 12 (pcs in *limited transposition*)]

=== Dihedral equivalence

In this group, all PCs of a given orbit share the same interval structure of itself or its *inverse*.

Dihedral group has *224* orbits.

=== Affine equivalence

In this group, any pcs of a given orbit share with others pcs into this orbit, same intervallic structure of itself or this inverse or this transformed by *multiplication by 5 or 7 and their inverse*.

Affine group has *156* orbits.

=== Musaic equivalence

In this group, any pcs of a given orbit are in affine equivalence with itself or *affine complement*.

Musaic group has *88* orbits.
////

=== Prime Form

A quality that allows, without ambiguity, to designate a representative among the elements of an orbit.

To put it simply, it is the *smallest element of an orbit*.

////
TIP: Can be represented by a function PrimeForm : EquivalenceRelation x pcs -> pcs (from an equivalence relation and a pcs given we obtain one and oly one pcs representative of equivalence relation orbit.
 +
 +
Given R, an equivalence relation, and pcs1, pcs2 (two pcs), if PrimeForm(R, pcs1) == PrimeForm(R, pcs2), then pcs1 and pcs2 belong to the same R equivalence orbit.
////

==== What Prime Form is

Given an equivalence relation orbit (of pcs), there will always be a unique pcs _smaller_ than others into same orbit (thanks to the order relation).

Originally <<Forte>>, prime denotes a pcs in normal form and "most packed on the left (0)"

<<Rahn>> John Rahn proposes a more rational approach, based on vector representation of a pcs (and its image function in an integer result of polynomial function)

*From there to saying that Prime Form quality is the minimum of an orbit, there is only one step, which we are taking !*

So, we cannot talk about Prime Form without giving its context.

NOTE: In musical set theory, historically, the default context of Prime Form is the dihedral group and prime form of the cyclic group is called Normal Form.

==== What Prime Form is not

Prime form is a "technical" characteristic of one element into an orbit, *without musical resonance*.

In absolute terms, any pcs into an orbit can be a representative of their orbit. By convention, we select the _minimal element_

==== Symmetry prime form

A symmetry prime form of a given pcs, is a minimum pcs of its cyclic orbit that, if possible, highlights its axial symmetries (else is cyclic prime form).

NOTE: Symmetry prime form concept is invented, specific to this project.

Example on pcs : [2 3 5 7 8] :

[.float-group]
--
[.left]
.Symmetry and cyclic prime form
image::pcs_2_3_5_7_8_V3.png["Symmetry and cyclic prime form" float="left",align="center"]
--

[.float-group]
--
[.left]
.Cyclic prime form
image::pcs_2_3_5_7_8-PF-V3.png["Cyclic prime form" float="left",align="center"]
--

[.float-group]
--
[.left]
.Symmetry prime form
image::pcs_2_3_5_7_8-MPF-V3.png["Symmetry prime form" float="left",align="center"]
--

Below, cyclic orbit of [2 3 5 7 8], or [0 2 3 9 10], or ... 12 choices !

[.float-group]
--
[.left]
.Cyclic orbit and his symmetry and prime form
image::pcs_023910-cyclic-symmetry-pf.png["Symmetry and cyclic prime form" float="left",align="center"]
--

Same orbit, in other views and order :

[.float-group]
--
[.left]
.Cyclic orbit and his modal and prime form
image::pcs_2_3_5_7_8-wb2.png["Modal and cyclic prime form" float="left",align="center"]
--

=== Subgroups and their generators

From folder `src/app/laboratory` folder, unit test : _it('n=12 - Explore all sub-groups of musaic group - up to transposition'_

[literal]
----

'== Generators family (subgroups) ==================================='
'n=12 [M1-T0] card = 1'
' generators (1) ='
['M1-T0']
'====================================='
'n=12 [M1] card = 12'
' generators (1) ='
['M1-T1']
'====================================='
'n=12 [M1 M7] card = 24'
' generators (1) ='
['M1-T1', 'M7-T1']
'====================================='
'n=12 [M1 M11] card = 24'
' generators (1) ='
['M1-T1', 'M11-T1']
'====================================='
'n=12 [M1 M5] card = 24'
' generators (1) ='
['M1-T1', 'M5-T1']
'====================================='
'n=12 [M1 CM11] card = 24'
' generators (1) ='
['M1-T1', 'CM11-T1']
'====================================='
'n=12 [M1 CM5] card = 24'
' generators (1) ='
['M1-T1', 'CM5-T1']
'====================================='
'n=12 [M1 CM7] card = 24'
' generators (1) ='
['M1-T1', 'CM7-T1']
'====================================='
'n=12 [M1 CM1] card = 24'
' generators (1) ='
['M1-T1', 'CM1-T1']
'====================================='
'n=12 [M1 M5 M7 M11] card = 48'
' generators (4) ='
['M1-T1', 'M5-T1', 'M7-T1']
['M1-T1', 'M5-T1', 'M11-T1']
['M1-T1', 'M7-T1', 'M11-T1']
['M1-T1', 'M5-T1', 'M7-T1', 'M11-T1']
'====================================='
'n=12 [M1 M7 CM5 CM11] card = 48'
' generators (4) ='
['M1-T1', 'M7-T1', 'CM11-T1']
['M1-T1', 'M7-T1', 'CM5-T1']
['M1-T1', 'CM5-T1', 'CM11-T1']
['M1-T1', 'M7-T1', 'CM5-T1', 'CM11-T1']
'====================================='
'n=12 [M1 M11 CM1 CM11] card = 48'
' generators (4) ='
['M1-T1', 'CM1-T1', 'CM11-T1']
['M1-T1', 'M11-T1', 'CM11-T1']
['M1-T1', 'M11-T1', 'CM1-T1']
['M1-T1', 'M11-T1', 'CM1-T1', 'CM11-T1']
'====================================='
'n=12 [M1 M11 CM5 CM7] card = 48'
' generators (4) ='
['M1-T1', 'CM5-T1', 'CM7-T1']
['M1-T1', 'M11-T1', 'CM5-T1']
['M1-T1', 'M11-T1', 'CM7-T1']
['M1-T1', 'M11-T1', 'CM5-T1', 'CM7-T1']
'====================================='
'n=12 [M1 M5 CM7 CM11] card = 48'
' generators (4) ='
['M1-T1', 'M5-T1', 'CM11-T1']
['M1-T1', 'M5-T1', 'CM7-T1']
['M1-T1', 'CM7-T1', 'CM11-T1']
['M1-T1', 'M5-T1', 'CM7-T1', 'CM11-T1']
'====================================='
'n=12 [M1 M7 CM1 CM7] card = 48'
' generators (4) ='
['M1-T1', 'M7-T1', 'CM1-T1']
['M1-T1', 'M7-T1', 'CM7-T1']
['M1-T1', 'CM1-T1', 'CM7-T1']
['M1-T1', 'M7-T1', 'CM1-T1', 'CM7-T1']
'====================================='
'n=12 [M1 M5 CM1 CM5] card = 48'
' generators (4) ='
['M1-T1', 'M5-T1', 'CM1-T1']
['M1-T1', 'M5-T1', 'CM5-T1']
['M1-T1', 'CM1-T1', 'CM5-T1']
['M1-T1', 'M5-T1', 'CM1-T1', 'CM5-T1']
'====================================='
'n=12 [M1 M5 M7 M11 CM1 CM5 CM7 CM11] card = 96'
' generators (92) ='
['M1-T1', 'M5-T1', 'M7-T1', 'CM11-T1']
['M1-T1', 'M5-T1', 'M7-T1', 'CM1-T1']
['M1-T1', 'M5-T1', 'M7-T1', 'CM5-T1']
['M1-T1', 'M5-T1', 'M7-T1', 'CM7-T1']
['M1-T1', 'M5-T1', 'CM1-T1', 'CM11-T1']
['M1-T1', 'M7-T1', 'CM1-T1', 'CM11-T1']
['M1-T1', 'M5-T1', 'CM5-T1', 'CM11-T1']
['M1-T1', 'M7-T1', 'CM7-T1', 'CM11-T1']
['M1-T1', 'M5-T1', 'M11-T1', 'CM11-T1']
['M1-T1', 'M7-T1', 'M11-T1', 'CM11-T1']
['M1-T1', 'M7-T1', 'CM1-T1', 'CM5-T1']
['M1-T1', 'M5-T1', 'CM1-T1', 'CM7-T1']
['M1-T1', 'M5-T1', 'CM5-T1', 'CM7-T1']
['M1-T1', 'M7-T1', 'CM5-T1', 'CM7-T1']
['M1-T1', 'M5-T1', 'M11-T1', 'CM1-T1']
['M1-T1', 'M7-T1', 'M11-T1', 'CM1-T1']
['M1-T1', 'M5-T1', 'M11-T1', 'CM5-T1']
['M1-T1', 'M7-T1', 'M11-T1', 'CM5-T1']
['M1-T1', 'M5-T1', 'M11-T1', 'CM7-T1']
['M1-T1', 'M7-T1', 'M11-T1', 'CM7-T1']
['M1-T1', 'CM1-T1', 'CM5-T1', 'CM11-T1']
['M1-T1', 'CM1-T1', 'CM7-T1', 'CM11-T1']
['M1-T1', 'CM5-T1', 'CM7-T1', 'CM11-T1']
['M1-T1', 'M11-T1', 'CM5-T1', 'CM11-T1']
['M1-T1', 'M11-T1', 'CM7-T1', 'CM11-T1']
['M1-T1', 'CM1-T1', 'CM5-T1', 'CM7-T1']
['M1-T1', 'M11-T1', 'CM1-T1', 'CM5-T1']
['M1-T1', 'M11-T1', 'CM1-T1', 'CM7-T1']
['M1-T1', 'M5-T1', 'M7-T1', 'CM1-T1', 'CM11-T1']
['M1-T1', 'M5-T1', 'M7-T1', 'CM5-T1', 'CM11-T1']
['M1-T1', 'M5-T1', 'M7-T1', 'CM7-T1', 'CM11-T1']
['M1-T1', 'M5-T1', 'M7-T1', 'M11-T1', 'CM11-T1']
['M1-T1', 'M5-T1', 'M7-T1', 'CM1-T1', 'CM5-T1']
['M1-T1', 'M5-T1', 'M7-T1', 'CM1-T1', 'CM7-T1']
['M1-T1', 'M5-T1', 'M7-T1', 'CM5-T1', 'CM7-T1']
['M1-T1', 'M5-T1', 'M7-T1', 'M11-T1', 'CM1-T1']
['M1-T1', 'M5-T1', 'M7-T1', 'M11-T1', 'CM5-T1']
['M1-T1', 'M5-T1', 'M7-T1', 'M11-T1', 'CM7-T1']
['M1-T1', 'M5-T1', 'CM1-T1', 'CM5-T1', 'CM11-T1']
['M1-T1', 'M7-T1', 'CM1-T1', 'CM5-T1', 'CM11-T1']
['M1-T1', 'M5-T1', 'CM1-T1', 'CM7-T1', 'CM11-T1']
['M1-T1', 'M7-T1', 'CM1-T1', 'CM7-T1', 'CM11-T1']
['M1-T1', 'M5-T1', 'CM5-T1', 'CM7-T1', 'CM11-T1']
['M1-T1', 'M7-T1', 'CM5-T1', 'CM7-T1', 'CM11-T1']
['M1-T1', 'M5-T1', 'M11-T1', 'CM1-T1', 'CM11-T1']
['M1-T1', 'M7-T1', 'M11-T1', 'CM1-T1', 'CM11-T1']
['M1-T1', 'M5-T1', 'M11-T1', 'CM5-T1', 'CM11-T1']
['M1-T1', 'M7-T1', 'M11-T1', 'CM5-T1', 'CM11-T1']
['M1-T1', 'M5-T1', 'M11-T1', 'CM7-T1', 'CM11-T1']
['M1-T1', 'M7-T1', 'M11-T1', 'CM7-T1', 'CM11-T1']
['M1-T1', 'M5-T1', 'CM1-T1', 'CM5-T1', 'CM7-T1']
['M1-T1', 'M7-T1', 'CM1-T1', 'CM5-T1', 'CM7-T1']
['M1-T1', 'M5-T1', 'M11-T1', 'CM1-T1', 'CM5-T1']
['M1-T1', 'M7-T1', 'M11-T1', 'CM1-T1', 'CM5-T1']
['M1-T1', 'M5-T1', 'M11-T1', 'CM1-T1', 'CM7-T1']
['M1-T1', 'M7-T1', 'M11-T1', 'CM1-T1', 'CM7-T1']
['M1-T1', 'M5-T1', 'M11-T1', 'CM5-T1', 'CM7-T1']
['M1-T1', 'M7-T1', 'M11-T1', 'CM5-T1', 'CM7-T1']
['M1-T1', 'CM1-T1', 'CM5-T1', 'CM7-T1', 'CM11-T1']
['M1-T1', 'M11-T1', 'CM1-T1', 'CM5-T1', 'CM11-T1']
['M1-T1', 'M11-T1', 'CM1-T1', 'CM7-T1', 'CM11-T1']
['M1-T1', 'M11-T1', 'CM5-T1', 'CM7-T1', 'CM11-T1']
['M1-T1', 'M11-T1', 'CM1-T1', 'CM5-T1', 'CM7-T1']
['M1-T1', 'M5-T1', 'M7-T1', 'CM1-T1', 'CM5-T1', 'CM11-T1']
['M1-T1', 'M5-T1', 'M7-T1', 'CM1-T1', 'CM7-T1', 'CM11-T1']
['M1-T1', 'M5-T1', 'M7-T1', 'CM5-T1', 'CM7-T1', 'CM11-T1']
['M1-T1', 'M5-T1', 'M7-T1', 'M11-T1', 'CM1-T1', 'CM11-T1']
['M1-T1', 'M5-T1', 'M7-T1', 'M11-T1', 'CM5-T1', 'CM11-T1']
['M1-T1', 'M5-T1', 'M7-T1', 'M11-T1', 'CM7-T1', 'CM11-T1']
['M1-T1', 'M5-T1', 'M7-T1', 'CM1-T1', 'CM5-T1', 'CM7-T1']
['M1-T1', 'M5-T1', 'M7-T1', 'M11-T1', 'CM1-T1', 'CM5-T1']
['M1-T1', 'M5-T1', 'M7-T1', 'M11-T1', 'CM1-T1', 'CM7-T1']
['M1-T1', 'M5-T1', 'M7-T1', 'M11-T1', 'CM5-T1', 'CM7-T1']
['M1-T1', 'M5-T1', 'CM1-T1', 'CM5-T1', 'CM7-T1', 'CM11-T1']
['M1-T1', 'M7-T1', 'CM1-T1', 'CM5-T1', 'CM7-T1', 'CM11-T1']
['M1-T1', 'M5-T1', 'M11-T1', 'CM1-T1', 'CM5-T1', 'CM11-T1']
['M1-T1', 'M7-T1', 'M11-T1', 'CM1-T1', 'CM5-T1', 'CM11-T1']
['M1-T1', 'M5-T1', 'M11-T1', 'CM1-T1', 'CM7-T1', 'CM11-T1']
['M1-T1', 'M7-T1', 'M11-T1', 'CM1-T1', 'CM7-T1', 'CM11-T1']
['M1-T1', 'M5-T1', 'M11-T1', 'CM5-T1', 'CM7-T1', 'CM11-T1']
['M1-T1', 'M7-T1', 'M11-T1', 'CM5-T1', 'CM7-T1', 'CM11-T1']
['M1-T1', 'M5-T1', 'M11-T1', 'CM1-T1', 'CM5-T1', 'CM7-T1']
['M1-T1', 'M7-T1', 'M11-T1', 'CM1-T1', 'CM5-T1', 'CM7-T1']
['M1-T1', 'M11-T1', 'CM1-T1', 'CM5-T1', 'CM7-T1', 'CM11-T1']
['M1-T1', 'M5-T1', 'M7-T1', 'CM1-T1', 'CM5-T1', 'CM7-T1', 'CM11-T1']
['M1-T1', 'M5-T1', 'M7-T1', 'M11-T1', 'CM1-T1', 'CM5-T1', 'CM11-T1']
['M1-T1', 'M5-T1', 'M7-T1', 'M11-T1', 'CM1-T1', 'CM7-T1', 'CM11-T1']
['M1-T1', 'M5-T1', 'M7-T1', 'M11-T1', 'CM5-T1', 'CM7-T1', 'CM11-T1']
['M1-T1', 'M5-T1', 'M7-T1', 'M11-T1', 'CM1-T1', 'CM5-T1', 'CM7-T1']
['M1-T1', 'M5-T1', 'M11-T1', 'CM1-T1', 'CM5-T1', 'CM7-T1', 'CM11-T1']
['M1-T1', 'M7-T1', 'M11-T1', 'CM1-T1', 'CM5-T1', 'CM7-T1', 'CM11-T1']
['M1-T1', 'M5-T1', 'M7-T1', 'M11-T1', 'CM1-T1', 'CM5-T1', 'CM7-T1', 'CM11-T1']

----

[#list-pcs-same-as-major-scale]
=== PCS having same generic intervals as the Major Scale

Major scale having only 1 and 2 semitones has interval between 2 pitch classes neighboring.

Here are the set of scales that share this characteristic :

----
'PCS having same generic intervals that Major Scale (29) for 24 musaics'

'(1,1,1,1,1,1,1,1,1,1,2 )  in Mus n° 2'
'(1,1,1,1,1,2,1,1,1,2   )  in Mus n° 3'
'(1,1,1,1,1,1,1,1,2,2   )  in Mus n° 4'
'(1,1,1,1,1,1,1,2,1,2   )  in Mus n° 5'
'(1,1,1,1,1,1,2,1,1,2   )  in Mus n° 6'
'(1,1,1,1,2,1,1,1,1,2   )  in Mus n° 7'
'(1,1,1,2,1,1,1,2,2     )  in Mus n° 8'
'(1,1,1,1,1,2,1,2,2     )  in Mus n° 9'
'(1,2,1,1,1,1,1,2,2     )  in Mus n° 9'
'(1,1,1,2,1,1,2,1,2     )  in Mus n° 10'
'(1,1,2,1,1,1,2,1,2     )  in Mus n° 10'
'(1,1,1,1,1,1,2,2,2     )  in Mus n° 11'
'(1,1,1,1,2,1,1,2,2     )  in Mus n° 14'
'(1,1,2,1,1,1,1,2,2     )  in Mus n° 14'
'(1,1,1,1,2,1,2,1,2     )  in Mus n° 15'
'(1,1,2,1,1,2,1,1,2     )  in Mus n° 16'
'(1,1,1,2,2,1,2,2       )  in Mus n° 17'
'(1,1,1,2,1,2,2,2       )  in Mus n° 18'
'(1,2,1,1,1,2,2,2       )  in Mus n° 18'
'(1,2,1,1,2,1,2,2       )  in Mus n° 19'
'(1,1,2,1,2,1,2,2       )  in Mus n° 26'
'(1,2,1,2,1,1,2,2       )  in Mus n° 26'
'(1,1,1,1,2,2,2,2       )  in Mus n° 28'
'(1,1,2,1,1,2,2,2       )  in Mus n° 35'
'(1,1,2,2,1,1,2,2       )  in Mus n° 36'
'(1,2,1,2,1,2,1,2       )  in Mus n° 37'
'(1,2,2,1,2,2,2         )  in Mus n° 38' <- Major scale switched
'(1,2,1,2,2,2,2         )  in Mus n° 44'
'(1,1,2,2,2,2,2         )  in Mus n° 60'

'PCS having same generic intervals that Major Scale and cardinal in [5..8] (13) for 11 musaics'
'(1,1,1,2,2,1,2,2       ) in Mus n° 17'
'(1,1,1,2,1,2,2,2       ) in Mus n° 18'
'(1,2,1,1,1,2,2,2       ) in Mus n° 18'
'(1,2,1,1,2,1,2,2       ) in Mus n° 19'
'(1,1,2,1,2,1,2,2       ) in Mus n° 26'
'(1,2,1,2,1,1,2,2       ) in Mus n° 26'
'(1,1,1,1,2,2,2,2       ) in Mus n° 28'
'(1,1,2,1,1,2,2,2       ) in Mus n° 35'
'(1,1,2,2,1,1,2,2       ) in Mus n° 36'
'(1,2,1,2,1,2,1,2       ) in Mus n° 37'
'(1,2,2,1,2,2,2         ) in Mus n° 38'
'(1,2,1,2,2,2,2         ) in Mus n° 44'
'(1,1,2,2,2,2,2         ) in Mus n° 60'

----
====


[bibliography]
== References

* [[[Forte]]] Forte, Allen. 1973. The Structure of Atonal Music. New Haven: Yale University Press.

* [[[Rahn]]] Rahn, John. 1980. Basic Atonal Theory. New York: Longman.

* [[[DIS]]] Stephen C.Brown. Dual Interval Space in Twentieth-Century Music,  Musaic in armature 1-5 is DIS(1,5).

* [[[PERLE]]] Perle, G. 1954. The possible Chords in Twelve Tone Music

* [[[LVERDI]]] Verdi, Luigi. In Autour de la Set Theory. Ircam / Delatour ed. 2003.

* [[[TOPOS]]] Mazzola, Guerino. 2002. The Topos of Music. Birkhauser Verlag AG.


