= MusaicBox
Another toolbox for musical composition
From 88musaics.org project
:description: Musaicbox frontend app
:author: Olivier Capuozzo [gmail]
:icons: font
:listing-caption: Listing
:toc: left
:toclevels: 2
// :table-caption!:
:stem:
:docinfo: shared
// nice to extend default css, with docinfo.html file in same directory
// see : https://docs.asciidoctor.org/asciidoctor/latest/html-backend/default-stylesheet/#customize-extend


// :url-quickref: https://docs.asciidoctor.org/asciidoc/latest/syntax-quick-reference/

//  for custom css, edit docinfo.html and put,
// into file.adoc, add [.new-class-name] before content asciidoc concerned
// into terminal :
//  asciidoctor -a docinfo=shared Musaicbox.adoc

ifdef::backend-pdf[]
:source-highlighter: rouge
endif::[]
ifndef::backend-pdf[]
:source-highlighter: highlight.js
endif::[]
:imagesdir: ./assets/images

Musaicbox application is intended to be a POC for main concepts defined and illustrated on https://88musaics.org[88musaics.org] site, plus others (modes, scales, chords...). The implementation chosen for this application are detailed, and some concepts from Musical Set Theory are discussed.

== Introduction

The idea behind this application is to offer the user a UI/UX to concretely manipulate abstract concepts, highlight relationship (morphism) between logic spatial and sound structures (_Pitch Class Set_) .

We hope that user will make use of this tool in his composition and instrumental practice activities.


== Musaic

What is _musaic_ et why there are 88 ? The response to these questions is in this document online : https://88musaics.org

=== In summary

The study takes place within the framework of equal temperament with 12 pitch classes.

image::cicrleFullV2.png[circle chromatic]

A Musaic is a matrix representation, can be used in 2 different contexts:

* Pitch-Class-Space. The 12 pitch classes in integer notation and "minimal" armature (1,5) are into a matrix 13x13. Each cell refers to a pitch class. It is an abstract object, a 2D pitch-class-space category.

* Pitch-Space.  Each cell refers to a pitch. It is an concrete object, a matrix 2D pitch-class-space category, case of a musical instrument.

[%autowidth]
[cols="2*^"]
|===

|image:musaic-matrix-pc-name.png[musaic-matrix-pc-name]
|image:musaic-p-space-ombre.png[]

|Musaic-pitch-class-space
|Musaic-pitch-space
|===

Although a musaic can play both roles (abstract and concrete), the MusaicBox application focuses primarily on the abstract aspects of pitch class sets (PCS) and their relationships, therefore on pc-space. A sort of "curious preamble" that would complement composition and instrumental practice activities (p-space).


// A musaic is a multifaceted geometric structure composed of four faces, not always distinct from each other. The faces are activated by the operations M1, M5, M7, and M11.
//
// The study focuses mainly on the abstract model of PCS (_Pitch Class Set_).

In the context of twelve-tone equal temperament, the canonical form of a musaic is 13x13 squares.footnote:[In this configuration, the geometric transformation operations presented in this document match the usual algebraic transformations of the Musical Set Theory]

Any intervallic structure defined within an octave prints a pattern on the matrix, and thereby reveals a musical structure that we call a _motif_  (<<Musaic-Motif>>).


To move from one face to another, geometric operations are applied: rotation around a central point or a diagonal (left and right).

.Rotation 1/2 turn [0 3 6 10] => [2 5 8 10]
image:m11-anime.png[m11-anime]

.Rotation Left Diagonal [0 3 6 10] => [2 8 10 11]
image:m5-anime.png[m5-anime]

.Rotation Right Diagonal [0 3 6 10] => [0 6 9 10]
image:m7-anime.png[m7-anime]

**From a geometric point of view, there is therefore a proximity between the harmonic structures (intervallic structures) of a same musaic.
**

Since a musaic can be viewed from several angles, it is said to have 4 "faces", each face has 2 motifs (one and its complementary). A musaic motif is a geometry representation of an intervallic structure class. There are 88 musaics in total for 352 intervallic structure classes.

.Example of musaic n°26 having seventh chord on one of its motifs.
image::template-musaic-anatomy.png[template-musaic-anatomy]


To implement these operations, the MusaicBox application uses well-known algebraic operations from Musaic Set Theory, coupled with Group Theory, and takes advantage of this to unify basic concepts such as the notion of Prime Form.

This document details the implementation choices, the decision-making, *but a detailed understanding of the underlying concepts is not necessary to use the application*. Simply understand (see <<_glossary>>) what an _intervallic class structure_, _intervallic structure_, an _orbit_, a _stabilizer_, and to a lesser extent: _interval vector_ and the basic notion of set theory (cardinal of a set, intersection, union, difference) is.

=== For which audience ?

Musician eager to add to his source of inspiration a muse of a scientific nature, based on the idea that geometry can teach us things related to music, its feeling and composition.footnote:[provided that they accept the postulate of the decomposition of an octave into 12 "equal parts".]

=== Application Use Cases

Four entries (main pages)

* PCS page (with undo/redo.footnote:redo[Back to the future only possible if the past has not been updated])
====
Useful from one PCS, explore modes, possible chords and other PCS in geometrical transformation relationship (with animation), Forte number, invariant class, and more....
[.float-group]
--
[.left]
.17 PCS LT in Cyclic Prime Form
image::pcs-page.png["PCS page example" float="left",align="center"]
--

====

* ZnExplorer page
====
Explore orbits resulting of various group action.

A good illustration of mathematics concepts.

Example : Get Limited Transposition PCS in Cyclic Prime Form : Select only `M1` operation and click on button with label :  _Show orbits (352) grouped by Stabilizer signature_. On 352 PCS representatives, 335 are 12 uniques transposed, 17 are less than 12 (called PCS in Limited Transposition)
[.float-group]
--
[.left]
.17 PCS LT in Cyclic Prime Form
image::PCS-LT-17.png["17 PCS LT in Cyclic Prime Form" float="left",align="center"]
--

====

* 88 musaics page
====

Explore musaics shearing same meta-stabilizer.footnote:[A stabilizing operation is a transformation operation which conserve intervallic structure], having same *octotropes* (partition) and search musaic that include a PCS given (search form on top right menu)

[.float-group]
--
[.left]
.Example page 88 musaics
image::page88musaics.png["page 88 musaics" float="left",align="center"]
--



[.float-group]
--
[.left]
.Octotrope, a geometric figure for meta-stabilizer classes
image::octotrope.png["Octotrope def" float="left",align="center"]
--

Example : There is 6 musaics which are invariant by complement operation (a stabilizer) : Select only `CM1` operation (C for _complement_ M1 for _neutral multiplication operation_). Set of these 6 musaics is partitioned by 3 octotropes (meta-stabilizer classes) : `M1,M5,CM1,CM5`, `M1,M11,CM1,CM11` and `M1,M5,M7,M11,CM1,CM5,CM7,CM11`

image:octotrope-cm1.png[]

Push selection musaics to "Whiteboard" page (right click), or explore one musaic into "PCS" page.

[.float-group]
--
[.left]
.Musaics invariant by CM1 pushed on Whiteboard page
image::6MusaicsInvariantByCplt.png["6 musaics invariant by Cplt" float="left",align="center"]
--


====

* whiteboard page (with Undo/Redo.footnote:redo[] and Copy/Cut/Paste)
====

Organize PCS in various representations on 2D surface.

Give the musician the ability to add text, organize PCS (multiple selection, position, representation, zoom, …), save page content to a file and restore content from a local file.

[.float-group]
--
[.left]
.Example Whiteboard page 1
image::pageWhiteboard1.png["Example Whiteboard page 1" float="left",align="center"]
--

[.float-group]
--
[.left]
.Example Whiteboard page 2
image::example-WB-page.png["Example Whiteboard page 2" float="left",align="center"]
--



====

== PCS

=== Pitch Class Abstraction

In equal-tempered music, any musical fragment can be reduced to a combination of pitch classes, whether that fragment is melodic (horizontal) or harmonic (vertical).

* Equivalence of pitch classes

image:equiv-pc.png[equiv pitch class]

* Enharmonic equivalence

image:equiv-enhar.png[equiv enharmonic]

* Without reference to rythme

image:equic-repet.png[equiv]

* Insensitive to the order and repetitions of notes within the fragment, whether melodic or harmonic...

image:equiv-hv.png[equiv pitch class]

If we make the pitch class of C correspond to the class modulo 12 named stem:[bar 0], pitch class C# by stem:[bar 1] , … , and so on up to B by the pitch class number stem:[bar 11].

* stem:[bar 0] is the pitch class that represents all C's, and their enharmonics (B#, Dbb, ...) all octaves combined.

* stem:[bar 1] represents all C#'s, and their enharmonics (B##, Db, ...) in any octave.

etc.

The resulting set of pitch classes is: stem:[Z//12Z] or stem:[Z_12]

stem:[Z_12 = {bar 0, bar 1, bar 2, bar 3, bar 4, bar 5, bar 6, bar 7, bar 8, bar 9, bar 10, bar 11 } ]

[NOTE]
====
It is customary, *for convenience*, *not* to use the barred notation for pitch classes, i.e.  stem:[0] instead of {nbsp} stem:[bar 0]

=> This way of doing things will have unsuspected repercussion... this problem is studied later in this document.
====

We can easily establish a correspondence between the set of integers modulo 12 and the set of pitch classes name (without bar).

This is the logic established by the Musical Set Theory and its leading authors such as <<Forte>> and <<Rahn>>.

So, there are *12 pitch classes*, represented in integer notation by number *from 0 to 11*.

TIP: We also find 10 and 11 noted A, B or T, E (for ten and eleven). The idea is to avoid having 2 symbols (1 and 0 or 1).


// image::cicrleFullV2.png[]

=== Enumeration

With set of 12 elements stem:[E = {0,1,2,3,4,5,6,7,8,9,10,11}]

The set of all subsets of stem:[E] is called https://en.wikipedia.org/wiki/Power_set[powerset], denoted stem:[P(E)], and has stem:[2^12] = 4096 elements (subsets).

In the context of Musical Set Theory, a subset, element of stem:[P(E)], is called *PCS*, for _Pitch Class Set_.

Is there 2^12^ = *4096 pcs*, from empty set `{}` to ful set `{0,1,2,3,4,5,6,7,8,9,10,11}` passing by all possible ordered pcs configurations as `{}`, `{0}`, `{1}`, ..., `{0,4,7}`, `{1,5,7}`,... , etc

4096 pcs can be ordered by their number of pitch classes (cardinality).

* Empty set : 1 pcs (with no pitch class)
* Monad set : 12 pcs (seen in the circle)
* Dyad set  : 66 pcs
* Triad     : 220 pcs (among them, the 12 major triads)
* ...
* Full set : 1 pcs (chromatic set)

Their distribution by cardinality is given by line 12 of Pascal's triangle below.

.Pascal's triangle
image::pascal-triangle-12.png[pascal-triangle-12,width=50%,height=50%]

This classification is not very practical for us, because it is semantically poor (based on the cardinality of PCS).

One of the major goals of the application is to refine the
classifications.

But before that, it seems useful to focus on the different representations of a PCS.

== PCS Representations

A _Pitch Set Class_ (PCS, or pcs) may have multiple representations.

=== Textual

A PCS is, by definition, an unordered set of PC, even if, in practice, by convention, we always present them textually ordered, in ascending order, named _Normal Order_ (see <<_glossary>>)

Let's take the PCS [0, 4, 7], C, E and G. Formally the textual representations below are all equal.

image::set-047-repr.png[_0_4_7_set_repr]

Example for C,E,G :  `[0,4,7]` or `[0 4 7]` (without comma), or `[047]` (without space)

=== Vector

It is a binary representation of a pcs, by a |E|-dimensional vector.

Example for [0 4 7]  (C major):  `[*1*,0,0,0,*1*,0,0,*1*,0,0,0,0]`  (ordered list of 12 binary values) :

image:vector-047.png[]

This vector, of _n_-dimension, is constructed by placing `1` at the index corresponding to each pitch class present in the pcs studied, and `0` at the index of the others. By convention, the index  corresponds to the pitch class name (which turns out to be very practical for algorithms).

To convert a PCS to a binary vector, we define a bijective function named _pcsToVector_.

====
[.text-center]
--
*_pcsToVector_*

stem:[P(Z_n) -> {0,1}^n] {nbsp}

stem:[tt"pcsToVector(A)" := \[f_A(0), f_A(1),...,f_A(n-1)\] ]

// stem:[tt"toVector(A)" = \[v_0,v_1,...,v_(n-1)\] ] where stem:[v_i = f_A(i)]

where stem:[f_A] (also known as stem:[chi_A]), is the *characteristic function* :

stem:[f_A : Z_n -> {0,1}]

stem:[f_A(bar i) := { (1  if bar i in A), (0  if bar i notin A) :}]
--
====


So, for _n = 12_, any pcs stem:[A] of stem:[P(Z_12)] corresponds a unique vector stem:[v] defined as follows:

stem:[v = \[f_A(bar 0), f_A(bar 1), f_A(bar 2) , f_A(bar 3) , f_A(bar 4) , f_A(bar 5) , f_A(bar 6) , f_A(bar 7) , f_A(bar 8) , f_A(bar 9)  , f_A(bar 10) , f_A(bar 11)\] ]


Example :

toVector (0, 4, 7]) stem:[ = \[ v_0, v_1, v_2 , v_3 , v_4 , v_5 , v_6 , v_7 , v_8 , v_9 , v_10 , v_11\] ]

where stem:[v_i="f"_"(0,4,7)"(bar i)], so we obtain vector stem:[\[1, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0\] ]

IMPORTANT: We can clearly see the use of the name of Pitch Class stem:[bar i] as an index stem:[i] in vector (as stem:[v_i]) We will see that this dual role is subject to caution.

[NOTE]
====
To get complement of a vector representation, we use inverse of characteristic function :
[.text-center]
--
stem:[f_A^"-1" : Z_n -> {0,1}]

stem:[f_A^"-1"(bar i) := 1 - f_A(bar i) ]
--

which transforms stem:[0] to stem:[1], and vice versa, pitch class representation into vector at index stem:[i].
====


The fragment framed below is characterized by the pitch classes set [0, 4, 7].

.Analysis example of a musical fragment.
image::fragment-047.png[]

There is an inverse function _vectorToPcs_  defined by :

[#vector-to-pcs]
====
[.text-center]
--

*_vectorToPcs_*

stem:[ZZ^n -> P(ZZ_n)]

stem:["vectorToPcs(V)" := { bar i | V_i = 1 and 0 <= i < n} ]

NOTE: Note the *dual role* of index _i_ : a position of element in the vector and Pitch Class name, _i_ and stem:[bar i]
--
====
Example of reinterpretation of a vector representation

image::vector-reinterpr-047.png[047-vector-reinterpr]

=== Integer

Yes, we can represent, identify, any PCS by a unique integer. Let's see how.

From binary vector representation, we will do the sum of power of 2, where value is 1 into vector. This algorithm, known as _polynomial function_, which we will call, in the context of this project, _polynomial identifier : pid_.

stem:["pid" : {0,1}^12 -> N]  {nbsp} defined by :

stem:["pid("v")" = sum_(i=0)^(n-1) v_i 2^i ] {nbsp} (so add powers of 2 where stem:[v_i] is non-zero)

[NOTE]
====
Since there exists a function (toVector) which gives the vector image of any PCS, we can also define function _pid_ with this domain of definition  stem:["pid" : P(Z_12) -> N]

====
Example for [0, 4, 7] :  `1 + 16 + 128` = `145`  (decimal value)

[%header,cols="^h,,,,,,,,,,,,,"]
.Examples of Polynomial Identifier (first row is power of 2)
|===
|PCS|1| 2| 4| 8| 16| 32| 64| 128| 252| 512| 1024| 2048| _pid_
|[0,4,7]|*1*|0|0|0|*1*|0|0|*1*|0|0|0|0|
|_pid_|*1*|0|0|0|*16*|0|0|*128*|0|0|0|0|*_145_*
||||||||||||||
|[0,3,7]|*1*|0|0|*1*|0|0|0|*1*|0|0|0|0|
|_pid_  |*1*|0|0|*8*|0|0|0|*128*|0|0|0|0|*_137_*
|===

Examples :

 pid('[]') = 0 (empty set)
 pid('[0,1,2,3,4,5,6,7,8,9,10,11]') = 4095 (chromatic set)
 pid('[1,3,5,7,9,11]') = 2730 (whole tone scale)

NOTE: As each pcs into the 4096 is unique, each of these pcs has a unique integer value by polynomial function.

=== Geometry
Example with pcs [0,4,7]

==== Linear

&#9632;&#9633;&#9633;&#9633;&#9632;&#9633;&#9633;&#9632;&#9633;&#9633;&#9633;&#9633;

[#_clock_chromatic_circle]
==== Clock / Chromatic circle

Optional with polygon inscribed.

[.float-group]
--
image::pcs-047.png["_0_4_7_clock-names",float="left",align="center"]
image::clock-047.png["_0_4_7_clock",float="left",align="center" ]
--

Polygon inscribed into circle denote an intervallic structure class.

Other example, a minor 7 and its *intervallic structure* (3, 4, 3, 2) :

image:minor7-circle-is.png[minor7-circle-is]

TIP: Sum of intervals into intervallic structure is always _n_. For pcs : [0 4 7] this is (4, 3, 5)

==== Musaic

A musaic is, by default, based on a 2D geometric structure.

////

// not the good place for this hypothesis !

TIP: (simple hypothesis) We think that the dimension (2D) is deduced from _n_. This would be the number of generators of all prime numbers with _n_, whose number is always even (for all _n_ > 2). Number of primes with _n_ is known as stem:[phi(n)], so for _n_ = 12, stem:[(phi(12)) /2 = 2 ], therefore 2D structure.
////


Musaic is instance of a dual interval space <<DIS>>, as two-dimensional array of pitches where “rows” are separated by the same interval and the “columns” by an other but also same (non-zero) interval (regular interface).

By default, we take as intervals step the "generator prime form" of _n_, these are those in the first half of the prime integers with n. For n=12 these are 1 and 5 from [`*1*, *5*, n-5, n-1`].

[NOTE]
====
Wy take prime form with n ?

Because, each of them is a n-step generator, they guarantee to traverse the structure in its entirety, while preserving the _n_-specific characteristics (notably the invariants). They also guarantee the cardinality of PCS.

====

.Example of musaic representation of [0 4 7]
[.float-group]
--
image::musaic-047-names.png["_0_4_7_musaic-names",float="left",align="center"]
image::musaic-047.png["_0_4_7_musaic",float="left",align="center" ]
--

[NOTE]
====
There are many others types of representation, such as Thor, Tonnetz and others <<DIS>> with one interval step not in prime...

Examples : DIS(y,x) where y is row interval and x is column interval. Violin is DIS(1,7), guitar in P4 Tuning is DIS(1,5), Tonnetz is DIS(4, 7), etc.
====

// NOTE: Instrument in DIS(x,y) are in _regular interface_ family.

=== Together

All PCS representations are interchangeable by bijective connections, one-to-one relationship, expect classical musical notation (because there are several possible notations for a pitch class : flat, sharp and others enharmonic notations).

.Example with Set, Integer, Vector, musaic, clock and score notation.
[.float-group]
--
image::together-representation-fleches.png["together-representation-fleches",float="left",align="center"]
--

== Transformation operations

Here we are interested in transformation operations that transform any PCS into other PCS, i.e. : stem:[P(E) -> P(E)].

[TIP]
====
PCS are elements stem:[P(E)]. So writing stem:[P(E) -> P(E)] means that transformation operations take a pcs from a set given and return a pcs of from the same set.
====

We will retain the following operations:

• *Transposition* (**T**), which geometrically corresponds to a translation in the plane and musically to the transposition of a given step
• *Multiplication* (**M**) by a prime number with cardinal of E, which geometrically corresponds to a half-rotation around an axis, and musically corresponds to a "symmetry". Inversion est given by multiplication by _n-1_, so 11 when n=12.
• *Complementation* (**C**), which geometrically and musically corresponds to a complementarity.

From Musical Set Theory, these algebraic definitions provide a precise framework for analyzing the relationships between sets of pitch classes in atonal and post-tonal music.

We present these transformation operations below.

=== Transposition

Operation name is {nbsp} stem:[T_k]

An operation which consists of moving by one step of _k_ (in semitones) all PCs of a PCS

====

[.text-center]
--

*Transposition*

stem:[T_k  :  P(E) xx ZZ -> P(E)]

{nbsp} stem:[T_k(A) := {\  (x + k) mod |E| \ },  forall   x in A]
--

====

//Operation is {nbsp}   stem:[T_k  :  P(E) -> P(E)]

//defined by {nbsp} stem:[T_k(A) = {\  (x + k) mod |E| \ },  forall   x in A]

Motivation: Allows us to establish an equivalence relationship "up to transposition" - an equivalence unanimously recognized in the musical field.

Examples when stem:[E = {0, 1, ..., 11}]  (cardinal of stem:[E\ is\ |E| = 12])

* Example1 : {nbsp} stem:[T_1("["0 4 7\]) ->"["1 5 8\]] {nbsp} (C Maj -> C# Maj)

* Example2 : {nbsp} stem:[T_5("["0 4 7\]) -> "["0 5 9\]] {nbsp} (C Maj -> F Maj - [5 9 12] = [5 9 0] = [059])

* Example3 : {nbsp} stem:[T_0("["0 4 7\]) ->"["0 4 7\]] {nbsp} (neutral operation)

==== Illustration

* Example1 : {nbsp} stem:[T_1("["0 4 7\]) ->"["1 5 8\]] {nbsp} (C Maj -> C# Maj)

image::T1-047.png[T1-047]

.Transformations by PCS page
image::Transf-047.png[Transf-047 ops UI]

// .[0 4 7]
// image:T1-047-Mus.png[T1-047 Musaic]

.[1 5 8] after click on T right
image:T1-158-Mus.png[T1-158 Musaic]


=== Multiplication

Operation name is {nbsp} stem:[M_a]

Multiplication is an operation which consists of moving all PCs of a PCS by  step of stem:[k] where stem:[k] is obtained by multiplying _PC_ by a value prime with _n_ (in semitones)

This operation generates inversion and circle of fifths and fourths transformation.

====

[.text-center]
--

*Multiplication*

// stem:[ul "Multiplication"]

stem:[M_a  :  P(E) xx NN -> P(E)]

stem:[M_a(A) := {\ (a * x) mod |E| \ },  forall   x in A]

_Where *a* is prime with |E|, and stem:[*] is multiplication operator_.
--
====


// defined by {nbsp} stem:[M_a(A) = {\ (x * a) mod |E| \ },  forall   x in A]


Motivation: allows to establish an equivalence relation "up to a symmetry", *including inversion and other substitutions.*

Examples when stem:[E = {0, 1, ..., 11}] (cardinal of stem:[E\ is\ |E| = 12]), number primes with 12 are : {1, 5, 7, 11}

    x (0  1  2  3  4  5  6  7  8  9 10 11)
  1.x (0  1  2  3  4  5  6  7  8  9 10 11) <- identity

    x (0  1  2  3  4  5  6  7  8  9 10 11)
 11.x (0 11 10  9  8  7  6  5  4  3  2  1) <- inversion

    x (0  1  2  3  4  5  6  7  8  9 10 11)
  5.x (0  5 10  3  8  1  6 11  4  9  2  7) <- fourths cycle

    x (0  1  2  3  4  5  6  7  8  9 10 11)
  7.x (0  7  2  9  4 11  6  1  8  3 10  5) <- fifths cycle



* Example M11 : {nbsp} stem:[M_11("["0 4 7\]) ->"["0 5 8\]] {nbsp} (C Maj -> Fm/5th - *inversion*)

* Example M5 : {nbsp} stem:[M_5("["0 4 7\]) ->"["0 8 11\]] (*M5 substitution* - _circle of fourths transform_){nbsp}

* Example M7 : {nbsp} stem:[M_7("["0 4 7\]) ->"["0 1 4\]] {nbsp}(*M7 substitution* - _circle of fifths transform_)

* Example id : {nbsp} stem:[M_1("["0 4 7\]) ->"["0 4 7\]] {nbsp} (*neutral operation*)

TIP: Regarding circle of fifths and fourths transformations : "_Since middle 1950s many composers have found useful these operations_" (<<Rahn>>, page 53-55). See also https://en.wikipedia.org/wiki/Multiplication_(music)

==== Illustrations

* Example M11 : {nbsp} stem:[M_11("["0 4 7\]) ->"["0 5 8\]] {nbsp} (C Maj -> Fm/5th - *inversion*)

.[0 4 7] M11 -> [0 5 8]
image:M11-047.png[M11-047]

.[0 4 7] M11 -> [0 5 8] (Musaics with reversed motif)
image:M11-047-Mus.png[M11-047 Musaic]


* Example M5 : {nbsp} stem:[M_5("[0" 4 7\]) ->"["0 8 11\]] (*M5 substitution*){nbsp}

.[0 4 7] M5 -> [0 8 11]
image:M5-047.png[M5-047]

.[0 4 7] M5 -> [0 8 11] (Musaics with reversed motif)
image:M5-047-Mus.png[M5-047 Musaic]

* Example M7 : {nbsp} stem:[M_7("["0 4 7\]) ->"["0 1 4\]] {nbsp}(*M7 substitution*)


.[0 4 7] M5 -> [0 1 4]
image:M7-047.png[M7-047]

.[0 4 7] M5 -> [0 1 4] (Musaics with reversed motif)
image:M7-047-Mus.png[M7-047 Musaic]

[TIP]
====
M11, M5, and M7 are also useful for producing PC set invariance, an interesting musical method for composers, as mentioned by <<Rahn>> (Robert Morris and Daniel Starr's "A General Theory of Combinatoriality and the Aggregate)

_For example, M7 leaves all even PC numbers the same and maps all odd PC numbers to within a tritone (by adding 6). PCS has "whole-tone scales" that are invariant under M7, an interesting musical method._

Other regards on these permutations in 12-ETfootnote:[12 equal temperament]:

image:affine-permutations.png[affine-permutations]
====

//
//  Robert Morris and Daniel Starr's "А
// General Theory of Combinatoriality and the Aggregate," PNM 16/1 (1977) and 16/2 (1978)

=== Complement

Operation name is {nbsp} stem:[C]

Especially affects PCS with cardinality 6

====

[.text-center]
--

*Complement*

stem:[C : P(E) -> P(E)]

stem:[C(A) := A^c = E\  \\ A = { x in E | x notin A }]
--

====

Motivation: “up to the complement” equivalence

Particularly because we have the equality : stem:[Stab(Orbit(A)) = Stab(Orbit(A^c))] (Property studied later in this document)

Examples when stem:[E = {0, 1, ..., 11}],  cardinal of stem:[E\ is\ |E| = 12].

* Example1 : {nbsp}  stem:[C("[0 2 4 5 7 9 11\]") ->"[1 3 6 8 10 \]"] {nbsp} Major scale to Pentatonic scale
* Example2 : {nbsp}  stem:[C("[0 2 4 6 8 10\]") ->"[1 3 5 7 9 11\]"] {nbsp} Whole tone scale to Whole tone scale

==== Illustration

* Example1 : {nbsp}  stem:[C("[0 2 4 5 7 9 11\]") ->"[1 3 6 8 10 \]"] {nbsp} Major scale to Pentatonic scale


.Major scale  -> Pentatonic scale
image:Cplt-MajorScale.png[Cplt-MajorScale]

.[0 2 4 5 7 9 11] Complement -> [1 3 6 8 10] (Musaics complemented motif)
image:Cplt-MajorScale-Mus.png[Cplt-MajorScale Musaic]

=== Eligible functors

The idea is to take advantage of the multiple representations of a PCS, by defining, for each of them, personalized version of these transformations. To extract mapping operations (eligible functor implementation).


|===
|Musaic geometry|Algebra in stem:[ZZ"/"12ZZ]
 +
 (or stem:[ZZ_12])| stem:[NN] throw
 +
_pid_ in [0..2^n^[|Musical Set Theory

|id
|M1
|_pid_ stem:[ cdot 1]
| Neutral operation

|Translation of _k_ :{nbsp} - <-T-> {plus}
|Tk
a|_pid_ stem:[ cdot 2k] [.nowrap]#(modulo 2^n^)#
|Transposition

a|Rotation half turn around center point image:M11-thick.svg[30,30]
|M11
|?
|Inversion

|Rotation half turn left diagonal image:M5-thick.svg[30,30]
|M5
|?
|Cycle of fourths transformation

|Rotation half turn right diagonal image:M7-thick.svg[30,30]
|M7
|?
|Cycle of firths transformation

|Switch colors image:complement.svg[30,30]
|C
a| [.nowrap]#2^n^ - (1 + _pid_)#
|Complementation

|===

As you can see, this table needs to be completed; *this is a call for contributions*!

=== Conclusion

We have just defined 3 primitive operations which are _Transposition_, _Multiplication_ and _Complementarity_.

Let's see how to use them in a Group structure.

== Unified operation

We will now combine our these three primitive operations (C, M and T)  into one single operation with the aim of creating a group.

=== Special Affine Operation

Multiplication and Transposition may be grouped into one special affine operation stem:[ (ax + k)] that operates on stem:[P(E)].

Operation name will be represented by  stem:[M_aT_k] (_M_~a~  for multiplication by _a_ and _T_~k~ for transposition by a step of _k_).

====
[.text-center]
--
*Special Affine Operation*

stem:[M_aT_k  :  P(E) xx NN xx ZZ -> P(E)]

stem:[M_aT_k(A) := {\ (ax + k) mod |E| \ },  forall  x in A]

_Where *a* is prime with |E| (and *k* a step of transposition)_
--
====

Examples when stem:[E = {0, 1, ..., 11}]  (cardinal of stem:[E\ is\ |E| = 12])

. Example M1-T5 : {nbsp} stem:[M_1T_5("[0 4 7\]") -> "[5 9 12\]"] so  stem:["[0 5 9\]"] Transposition of 5 halftones (T5)
. Example M11-T0 : {nbsp} stem:[M_11T_0("[0 4 7\]") ->"[0 5 8\]"] {nbsp} (C Maj -> Fm/5th - Multiplication only - M11 is inversion)

. Example M1-T0 : {nbsp} stem:[M_1T_0("[0 4 7\]") -> "[0 4 7\]"] {nbsp} (neutral op)

. Example M5-T5 : {nbsp} stem:[M_5T_5("[0 4 7\]") -> "[1 4 5\]"] {nbsp} Multiplication and Transposition

NOTE: stem:[M_aT_k] is also known as _TTO_ operators (for _Twelve Tone Operators_) and it's defined affine group (<<Morris>>, <<TOPOS>>).


=== Extended Special Affine Operation

If we add the complementarity operation to the special affine function, we obtain the following operation: *stem:[c * (ax + k)]* that operates on stem:[P(E)]. It is with this unified operation that we will work.

Operation name is {nbsp} stem:[C_cM_aT_k]

====
[.text-center]
--

*Extended Special Affine Operation*

stem:[ C_cM_aT_k : P(E) xx {false, true} xx NN xx ZZ -> P(E) ]

stem:[C_cM_aT_k(A) := { ({\ (ax + k) mod |E| \ }  forall x in A \ \ \ \ \ \ \ \  if c = false), (E\ \\ \ {\ (ax + k) mod |E| \ }  forall x in A \  if c = true) :}]
--

or, in condensed notation and if we use the special affine operation seen previously :
[.text-center]
--
stem:["[C\]"M_aT_k(A) := { (M_aT_k(A) \ \ \ \ \ \ \ if C " is not present"), (E\  \\ \ M_aT_k(A)  if C " is present") :}]
--

====


Examples when stem:[E = {0, 1, ..., 11}]  (cardinal of stem:[E\ is\ |E| = 12]) :

* *M1-T0* {nbsp}:{nbsp}  stem:[M_1T_0("[0 4 7\]") -> "[0 4 7\]"] {nbsp} (neutral op)

* *M1-T1* {nbsp}:{nbsp} stem:[M_1T_1("[0 4 7\]") -> "[1 5 8\]"] {nbsp} (transposition of 1 halftone only)

* *M5-T0* {nbsp}:{nbsp} stem:[M_5T_0("[0 4 7\]") -> "[0 8 11\]"] {nbsp} (M5 only)

* *CM5-T4* {nbsp}:{nbsp} stem:[CM_5T_4("[0 4 7\]") -> "[1 2 5 6 7 8 9 10 11\]"] {nbsp} (M5,  T4 and Complement - affine first, then complement)

* *CM1-T1* {nbsp}:{nbsp} stem:[CM_1T_1("[0 2 4 6 8 10\]") -> "[0 2 4 6 8 10\]"] {nbsp} (T1 and Complement)

* *CM1-T0* {nbsp}:{nbsp} stem:[CM_1T_0("[0 3 6 9\]") -> "[1 2 4 5 7 8 10 11\]"] {nbsp} (Complement only : Dim7 -> Dim scale)

// * *CM1-T0* {nbsp}:{nbsp} stem:[C_"true"M_1T_0("[0 2 4 5 7 9 11\]") -> "[1 3 6 8 10\]"] {nbsp} (complement only)


etc.

NOTE: Extended Special Affine Operation is called _MusaicOperation_ into MusaicBox project.

== Group

To define a group, we need to have:

* a transformation operation (we have it, it is _MusaicOperation_) =  stem:[c * (ax + k)].

* a function composition stem:[@] that we define as : stem:[(c,a,k) @ (c',a',k') = ] ( stem:[underbrace(bb "c ⊕ c'")_("part to check"), underbrace(aa', ak' + k)_(@ " Affine")])

This function composition stem:[@], extend function composition of special Affine group, where stem:[a and a'] is prime with stem:[n] and stem:[oplus] the logical operator XOR.


=== Group Axioms

Let us check that the function composition stem:[@] satisfies four expected properties (group axioms)

* *Law of composition*

For all _g_ and _g'_ operations of _G_, the result stem:[(g @ g')] is also an operation in _G_.

stem:[forall g, g' in G, (g @ g') in G]

If we take stem:[g = (c,a,k)] and stem:[g' = (c',a',k')] then stem:[g @ g' = ] (  stem:[underbrace(bb "c ⊕ c'")_(in {true,false}), underbrace(aa', ak' + k)_("Special Affine Op")])

Since stem:[a] and stem:[a'] are prime with stem:[n], stem:[(aa' mod n) = 1] which is also prime with n.

Therefore stem:[(g∘g') in G]

* *Associative*

stem:[forall (a,b,c) in G, (a @ b) @ c = a @ (b @ c)]

This is true for stem:[(aa', ak' + k)] (law of composition of affine group)

It remains to elucidate the case of the XOR operation.

stem:[forall (a,b,c) in {0, 1}^3, (a oplus b) oplus c = a oplus (b oplus c)]

[#truth-table-xor]
.truth table xor
|===
|a|b|c|stem:[(a oplus b)]|stem:[(b oplus c)]|stem:[(a oplus b) oplus c]|stem:[a oplus (b oplus c)]

|0
|0
|0
|0
|0
|#0#
|#0#

|0
|0
|1
|0
|1
|#1#
|#1#

|0
|1
|0
|1
|1
|#1#
|#1#

|0
|1
|1
|1
|0
|#0#
|#0#

|1
|0
|0
|1
|0
|#1#
|#1#

|1
|0
|1
|1
|1
|#0#
|#0#

|1
|1
|0
|0
|1
|#0#
|#0#

|1
|1
|1
|0
|0
|#1#
|#1#

|===

We have shown that the XOR operator is associative, because for all combinations of _a_, _b_, _c_, the two expressions stem:[(a oplus b) oplus c] and stem:[a oplus (b oplus c)] always give the same result.

We can therefore say that stem:[( c oplus c', aa', ak' + k)] is *associative*.

* *Neutral element*

There exists an element stem:[e in G]{nbsp} such that, for every stem:[g] in stem:[G] one has {nbsp} stem:[e @ g = g] {nbsp} and {nbsp} stem:[g @ e = g].

This neutral element is :  stem:[(c, a, k) |-> (false, 1, 0) ] {nbsp} denoted by {nbsp} *M1-T0*

stem:[e @ g = g] {nbsp} : {nbsp} stem:[(false, 1, 0) @ (c',a',k')  = ( false oplus c' ,a', k')]

and

stem:[g ⋅ e = g] {nbsp} : {nbsp} stem:[(c,a,k) @ (false, 1, 0) = ( c oplus false, a, k)]


In its affine part, M1-T0, neutral operation use neutral values (1 for multiplication and 0 for addition). Let's see for stem:[oplus] if stem:[ (false oplus x) = (x oplus false) = x], whatever stem:[x] ?

|===
|{nbsp}stem:[x]|stem:[false] (fixed) |stem:[(x oplus false)] {nbsp} (or stem:[(false oplus x)] )

|#false#
|false
|#false#

|#true#
|false
|#true#

|===

Thus, by setting c' to false we ensure that c will stay the same  (stem:[AA c in {true, false}, (c oplus false) = c]).

Therefore, we can say that stem:[(false, 1, 0)] is *the neutral element* of stem:[G].

* *Symmetry element (inverse)*

There exists an element stem:[e in G]{nbsp} such that, stem:[ AA a in G, EE b in G ->  a @ b = b @ a = e], where stem:[e] is neutral element (other name for *identity element*)

so stem:[AA (c,a,k),  EE (c',a',k') => ( c oplus c', aa', ak' + k) =  (false, 1, 0)]

We must therefore determine stem:[(c',a',k')] which satisfies the equation :

[.text-center]
stem:[(c oplus c', aa', ak' + k) = (false, 1, 0)]

Solution : stem:[(c', a', k') = (c , a , -k * a^-1)]

Because :

* stem:[ c oplus c = false, AA c in {true, false}]

* stem:[aa = 1] because stem:[(a^2 mod n) = 1,  AA a " prime with " n]

* stem:[ (-k * a^-1) (mod n)] {nbsp} is value of stem:[k'] which solves the equation stem:[ak' + k = 0] {nbsp} ( _a_^-1^ is the modular inverse of _a_)

Examples with stem:[n = 12] : {nbsp} (reminder : M1-T0 is stem:[C_"c=false"M_"a=1"T_"k=0"])

* M1-T0 stem:[@] *M1-T0* = M1-T0  {nbsp} (stem:[e . e = e])
* *M1-T7* stem:[@] M1-T5 = M1-T0
* M1-T5 stem:[@] *M1-T7* = M1-T0
* M5-T5 stem:[@] *M5-T11* = M1-T0
* CM5-T5 stem:[@] *CM5-T11* = M1-T0

etc.

We can therefore say that stem:[(c , a , -k * a^-1)] is *the symmetric element* of any stem:[(c,a,k) in G].

=== Conclusion

We have defined an extended special affine group stem:[G] with complementarity  , from unified operation stem:[c * (ax + k)] intended to act on stem:[P(ZZ_n)] defined by :

* Its elements are triplets stem:[(c, a, k)] , in reference to extend special operation :  stem:[c * (ax + k)]

* Function composition (stem:[@])  is stem:[(c,a,k) @ (c',a',k') = (c oplus c', aa', ak' + k)]

where stem:[n>2], stem:[a] prime with stem:[n] and stem:[c in {true, false}]



// https://fr.wikipedia.org/wiki/Action_de_groupe_(math%C3%A9matiques)[]


== Group Action

Consider the action of stem:[G] on set stem:[P(E)], with stem:[E = ZZ "/" nZZ = ZZ_n] and stem:[P(E)], a set of stem:[2^|E| = 2^n].

Let us now consider stem:[E = ZZ_12] = {0,1,2,3,4,5,6,7,8,9,10,11}, the twelve pitch classes.

stem:[P(E)] is set of stem:[2^|E| = 2^12 = bb 4096] *PCS elements* (4096 subsets of _E_)

=== Context

https://88musaics.org/[88musaics project] presents different operations, when n = 12, as *geometrical transformations by rotation of half a turn*. M5 is left diagonal and M7 is right diagonal transformation, M11 (inversion) around central point, M1 is neutral operation anc C is a change of perspective of point of view (or permutation of color).

Into Musaicbox application project (https://musaicbox.org/) , primitives operations are implemented by permutations of values into vector representation of PCS, i.e. stem:[ NN^n -> NN^n].

[#affine-operations]
.Example of different points of view of basics transformation operations
image::diff-4operations.png[diff-4operations]

For transformations by multiplication, see also : https://en.wikipedia.org/wiki/Multiplication_(music)[wikipedia multiplication and music]

The complementarity operation is also the object of great attention in musical set theory (<<Forte>>).

=== Discovering operations of G

The composition function stem:[@] allows us to determine all instances of MusaicOperation (stem:[C_cM_aT_k]) whe stem:[G] acts on stem:[P(ZZ_12)]. For this we will use the algorithmic structure of Cayley table.

To begin with, we can focus on a few operations that will allow us to generate all possible transformation operations in stem:["T0"], i.e. stem:[C_cM_aT_0]. Several configurations of generating operations are possible, all of which lead to the same result. For now, we will arbitrarily take :  *{M1-T0, CM1-T0, M5-T0, M7-T0}*.

[cols="^h,,,,"]
.First step to discover operations
|===
|{nbsp} stem:[@] |M1-T0 |CM1-T0 |M5-T0 |M7-T0

|M1-T0
|M1-T0
|CM1-T0
|M5-T0
|M7-T0

|CM1-T0
|CM1-T0
|M1-T0
|#CM5-T0#
|#CM7-T0#

|M5-T0
|M5-T0
|#CM5-T0#
|M1-T0
|#M11-T0#

|M7-T0
|M7-T0
|#CM7-T0#
|#M11-T0#
|M1-T0

|===

As we can see, three new operations are discovered (*M11-T0*, *CM5-T0* and *CM7-T0*), we add them to the table structure (M11, CM5 and CM7), perform the calculations and repeat this process until no new operations are discovered, which gives, in fine:

[cols="^h,,,,,,,,"]
.All operations in T-0, but suffix -T0 is omitted (id = M1-T0)
|===
|{nbsp} stem:[@]|Id|M5|M7|M11|CM1|CM5|CM7|CM11

|Id
|[.klein1]#*Id*#
|[.klein1]#M5#
|[.klein1]#M7#
|[.klein1]#M11#
|[.klein2]#CM1#
|[.klein2]#CM5#
|[.klein2]#CM7#
|[.klein2]#CM11#

|M5
|[.klein1]#M5#
|[.klein1]#*Id*#
|[.klein1]#M11#
|[.klein1]#M7#
|[.klein2]#CM5#
|[.klein2]#CM1#
|[.klein2]#CM11#
|[.klein2]#CM7#

|M7
|[.klein1]#M7#
|[.klein1]#M11#
|[.klein1]#*Id*#
|[.klein1]#M5#
|[.klein2]#CM7#
|[.klein2]#CM11#
|[.klein2]#CM1#
|[.klein2]#CM5#

|M11
|[.klein1]#M11#
|[.klein1]#M7#
|[.klein1]#M5#
|[.klein1]#*Id*#
|[.klein2]#CM11#
|[.klein2]#CM7#
|[.klein2]#CM5#
|[.klein2]#CM1#

|CM1
|[.klein2]#CM1#
|[.klein2]#CM5#
|[.klein2]#CM7#
|[.klein2]#CM11#
|[.klein1]#*Id*#
|[.klein1]#M5#
|[.klein1]#M7#
|[.klein1]#M11#

|CM5
|[.klein2]#CM5#
|[.klein2]#CM1#
|[.klein2]#CM11#
|[.klein2]#CM7#
|[.klein1]#M5#
|[.klein1]#*Id*#
|[.klein1]#M11#
|[.klein1]#M7#

|CM7
|[.klein2]#CM7#
|[.klein2]#CM11#
|[.klein2]#CM1#
|[.klein2]#CM5#
|[.klein1]#M7#
|[.klein1]#M11#
|[.klein1]#*Id*#
|[.klein1]#M5#


|CM11
|[.klein2]#CM11#
|[.klein2]#CM7#
|[.klein2]#CM5#
|[.klein2]#CM1#
|[.klein1]#M11#
|[.klein1]#M7#
|[.klein1]#M5#
|[.klein1]#*Id*#

|===

We note that no other element of the group is generated (no new transformation operation). So the first inventory, without transposition, gives *8 operations* :

[.text-center]
{ *M1, M5, M7, M11, CM1, CM5, CM7, CM11* }

TIP: We can observe the highlighting of symmetries, and a https://en.wikipedia.org/wiki/Klein_four-group[klein four-groups] (first square).

By composing each of these operations with the 12 possible transposition steps, we obtain *96* operations in the group.

[.text-center]
|{ T0, T1, ..., T11 }| x |{ M1, M5, M7, M11, CM1, CM5, CM7, CM11 }| = 12 x 8 = *96 operations*


In fact, number of operations in stem:[G] when it act on stem:[ZZ_n , n > 2], depends on stem:[n], and its formula is :

[.text-center]
====
*Formula cardinal of G*

stem:[ |G| = 2n * phi(n)].

Where stem:[phi] is Euler's function.

Example with n=12 => stem:[ |G| = 2 xx 12 xx 4 = 96]
====


=== Conclusion

We have seen that when the group stem:[G] acts on stem:[P(ZZ_12)], stem:[G] is composed of  *96* elements (operations)

When stem:[G] acts on  stem:[ZZ_12]  ,  stem:[G] = stem:[{ C_cM_a"-"T_k],
where stem:[c in {true, false}, a in { 1, 5, 7, 11 } and k in { 0, 1, ..., 11  } }]

stem:[G = { "M1-T0", "M1-T1",..., "CM1-T0", ..., "CM11-T10", "CM11-T11"}]


It is thanks to this group that we will be able to partition our 4096 PCS into remarkable subsets by action of this group on stem:[ZZ_12].


== Orbit

The orbit of an element stem:[pcs] of stem:[P(E)] is a set that gathers all the possible images of stem:[pcs] under action of stem:[G]. It is denoted stem:[G"⋅"pcs]


stem:[G  cdot  "pcs" = ]{stem:[underbrace(g cdot pcs)_(in P(E)) \  | g in G] },  a subset of stem:[P(E)]

Examples :

[example]
====
* Orbit of [0 2 4 6 8 10] is a set of PCS denoted by stem:[G cdot A], where stem:[A] = [0 2 4 6 8 10].
 +
stem:[G cdot "[0 2 4 6 8 10\]"] = stem:[{"[0 2 4 6 8 10\], [1 3 5 7 9 11\]"}]
 +
(a set of 2 PCS - whole tone scales - musaic n°88)

====

[example]
====
* stem:[G cdot "[0 2 4 5 7 9 11\]"] = stem:[{"[0 2 5 7 10\], ...,  [0 2 4 5 7 9 11\]"}]
 +
(a set of 48 PCS - musaic n°38)

====


[example]
====
* stem:[G cdot "[0 3 6 9\]"] = stem:[{"[0 3 6 9\], [1 4 7 10\], ...,  [0 1 3 4 6 7 9 10\]"}]
 +
(a set of 6 PCS - diminished 7th and "Messiaen Mod 2" scales - musaic n°37)

====




//
// We know (88musaics.org) that such a group action generates  *88 orbits*. However, we think it is more didactic to focus first on a smaller group, a subgroup of stem:[G].
//
// [NOTE]
// ====
// Later we will make an inventory of the possible subgroups of stem:[G] (we work with a finite set, which makes our work easier)
// ====


[#_stabilizer_and_fixed_pcs]
=== Stabilizer and Fixed PCS

PCS are fixed (i.e. unmodified, invariant) under action of one or more transformation operations of stem:[G], which contains 96.

For examples :

* Any pcs is fixed (stabilized) by `M0-T1` (id operation)
* Pcs [0 2 3 5 7 9 10] (dorian mode) is fixed by `M1-T0 M11-T0` (id and inverse)
* Pcs [0 4 8] (Augmented Triad) is fixed :
** in cyclic group, by `M1-T0 M1-T4 M1-T8` (limited transposition)
** in dihedral group by `M1-T0 M11-T0 M1-T4 M11-T4 M1-T8 M11-T8`
** in affine group by `M1-T0 M5-T0 M7-T0 M11-T0 M1-T4 M5-T4 M7-T4 M11-T4 M1-T8 M5-T8 M7-T8 M11-T8`


Operations in stem:[G] which do not transform some of its elements (it fixes them) are called _stabilizer_. Such operation in _G_ fix the concerned PCS in P(E)

====
[.text-center]
--
*Stabilizer*

A *stabilizer* of stem:[ "pcs" in P(E)] is a *subset* of stem:[G], denoted *_G~pcs~_*, having all its elements fixing stem:[pcs]

stem:[G_bb"pcs" := {g in G | g cdot pcs = pcs }]
--
====


Inversely,

====
[.text-center]
--
*Fixed Pcs*

stem:[Fixed_H] is the set of elements of stem:[P(E)] invariants under action of   stem:[H subseteq G]

stem:[Fixed_H := {pcs in P(E) | g cdot pcs = pcs, AA g in H}]

--
====

// stem:[Fixed_H := {A in P(E) | g cdot A = A, AA g in H}]

By correlation, the cardinality of an orbit is linked to the number of its stabilizers. Indeed, the more stabilizers an orbit has, the fewer elements the orbit has. This is the subject of a theorem known as https://en.wikipedia.org/wiki/Group_action#Orbit-stabilizer_theorem[orbit-stabilizer] :

Cardinality of an orbit stem:[G cdot pcs], is given by cardinality of group stem:[G] divided by number of stabilizers of stem:[pcs] :

stem:[|G"⋅"pcs| = (|G|) / (|G_(pcs)|)]

// stem:[|G"⋅"A| = (|G|) / (|G_A|)]

Knowing cardinality of one  orbit (stem:[|G"⋅"pcs|]), we can calculate the number of its stabilizers stem:[|G_(pcs)| = (|G|) / (|G"⋅"pcs|)].

From the 3 examples given previously :

* whole tone scales has 96/2 = 48 stabilizers
* major diatonic scale has 96/48 = 2 stabilizers :
* diminished 7th has 96/6 = 16 stabilizers

TIP: All these properties, and more, can be viewed on page : https://musaicbox.org/pcs[]


=== Equivalence relation

The set of orbits of P(E) under the action of G form a *partition of P(E)*.

An equivalence relation, or more precisely a stem:[G"-equivalence"], is defined by saying stem:[x "~" y] if and only if there exists a stem:[g in G] with stem:[g⋅x = y].

Two elements stem:[A] and stem:[B] of stem:[P(E)], are equivalent if and only if they are located in the same orbit, in other wordsi if stem:[G"⋅"A = G"⋅"B]

Example of stem:[Cyclic]_-equivalence_ : `CMajor triad` and `DMajor triad` are in  stem:[Cyclic]_-equivalence_ relationship, because they both belong to the same cyclic orbit. This is what we are going to see now.

=== Case study (cyclic group)

Before going further, Let us be interested in a subgroup of stem:[G], called the Cyclic group.

A subset of G has the status of a subgroup if its operations respect the group axioms.

Let's take stem:[{"M1-T0", "M1-T1"}]

[cols="^h,,"]
.First step to discover operations (Cayley table)
|===
|{nbsp} stem:[@] |M1-T0 |M1-T1

|M1-T0
|M1-T0
|M1-T1

|M1-T1
|M1-T1
|#M1-T2#

|===

As expected, a new operation has been generated, `M1-T2`, which we need to re-inject into the table. Continuing this process, we obtain the stable array of 12x12.

This is because the basic operation we selected (`M1-T1`), with a step of 1, generates 12. We could have chosen `M1-T5`, `M1-T7` or `M1-T11`, since 1, 5, 7, and 11 are prime with 12, we would arrive at the same result.

[cols="^h,,,,,,,,,,,,"]
.All operations in M1-Tk, but prefix M1-  is omitted (Rem : k + k' value is modulo n=12; Example : 4+9 = 1 modulo 12)
|===
|{nbsp} stem:[@] |T0|T1|T2|T3|T4|T5|T6|T7|T8|T9|T10|T11

|T0|T0|T1|T2|T3|T4|T5|T6|T7|T8|T9|T10|T11
|T1|T1|T2|T3|T4|T5|T6|T7|T8|T9|T10|T11|T0
|T2|T2|T3|T4|T5|T6|T7|T8|T9|T10|T11|T0|T1
|T3|T3|T4|T5|T6|T7|T8|T9|T10|T11|T0|T1|T2
|T4|T4|T5|T6|T7|T8|T9|T10|T11|T0|T1|T2|T3
|T5|T5|T6|T7|T8|T9|T10|T11|T0|T1|T2|T3|T4
|T6|T6|T7|T8|T9|T10|T11|T0|T1|T2|T3|T4|T5
|T7|T7|T8|T9|T10|T11|T0|T1|T2|T3|T4|T5|T6
|T8|T8|T9|T10|T11|T0|T1|T2|T3|T4|T5|T6|T7
|T9|T9|T10|T11|T0|T1|T2|T3|T4|T5|T6|T7|T8
|T10|T10|T11|T0|T1|T2|T3|T4|T5|T6|T7|T8|T9
|T11|T11|T0|T1|T2|T3|T4|T5|T6|T7|T8|T9|T10

|===

So, the group generate by stem:[{"M1-T0", "M1-T1"}] is

stem:[ H = {"M1-T0", "M1-T1","M1-T2",..., "M1-T10","M1-T11"}]

The sub-group stem:[H] has same neutral element, inverse element and composition function that stem:[G], and its cardinal is stem:[|H| = 12].

This group is interesting because, applied to stem:[P(E)], it places in the orbit of a pcs, all its transposed.

image::usecase-cyclic.svg[]

Orbit stem:[H cdot "[0 4 7\]" = {"[0 4 7\]", "[1 5 8\]", ..., "[3 6 11\]"}], so {DO MI SOL} and all this transposed (12 pcs).

Stabilizer stem:[H_"[0 4 7\]" = {"M1-T0"}] (only neutral operation : major triad is not in limited transposition)

.An other view on H ⋅ [0 4 7] (orbit cyclic of major triad)
image:cyclic-047-simple.png[cyclic]

Therefore, all pcs in orbit of stem:[H] are equivalent, *_up to transposition_*.

- Example1 : [0 4 7] ~ [2 6 9] ~ [0 3 8] because exists an operation g into H, that g . [0{nbsp}4{nbsp}7] = [2{nbsp}6{nbsp}9], it is M1-T2, and g . [0{nbsp}4{nbsp}7] = [0{nbsp}3{nbsp}8], it is M1-T8.
 +
 +
stem:[H "⋅ [0 4 7\]"] = stem:[H "⋅ [2 6 9\]"] = stem:[H "⋅ [0 3 8\]"] (same orbit).

A such group stem:[H] is called *Cyclic group*.

When orbit cyclic actes on stem:[P(ZZ_12)], its generate *352 orbits*. Each of these orbits represents a unique cyclic structure. Example Major triad, Minor triad, Diatonic Major, etc.

NOTE: We have thus reduced the field of study from 4096 to 352 elements !

The question then is how to represent an orbit? Any of its elements (pcs) would do, but it is customary to select the *smallest element*.

NOTE: The concept of the "smallest element" refers to the concept of "prime form" historically found in musical set theory.

In our case, we need to establish an order relation between elements of an orbit, and therefore in stem:[P(E)]. That has been done in the project ; detail in appendix <<Order relation>>.

The cyclic prime form of [0 4 7] is ... [0 4 7] itself, as well as cyclic prime form of [0 5 9] and 10 others PCS (major triads).

image::cyclic-047-motif.png[cyclic_motif]


Orbite stem:[H"⋅[0 4 7\]"] has 12 elements. Its number of stabilizers is stem:[|H_("[0 4 7\]")| = (|H|) / (|H"⋅[0 4 7\]"|)], so stem:[12/12 = 1]. It is stem:["M1-T0"] (neutral operation)

Of the 352 orbits,

* 335 orbits are composed of 12 elements, having exactly one stabilizer, stem:["M1-T0"], and their cardinal is equal to the number of operations in the group, i.e. 12.

* 17 very special orbits, which represent the structures with *"limited transpositions"*, have more than one stabilizing operation. Therefore, their cardinality is less than 12.


TIP: You can already explore the cyclic group in the musaicbox application: go to the "Z~n~ Explorer" tab and select M1 (meaning M1-T1) as operation and click on the "Show 352 orbits grouped by stabilizer" button.
 +
 +
 .17 Cyclic orbits of Limited Transposition PCS
 image:zn-explorer-cyclic-groupV2.png[zn-explorer-cyclic-group]

For understand reduced notation of stabilizer like `MI-T0~4*`, see in appendix <<Reduced Name>>.

Example of PCS in Limited Transposition : Augmented triad (4 PCS into cyclic orbit)

.[0 4 8] Augmented triad cyclic orbit
image:cyclic-048-eatl.png[eatl]

Cyclic orbit of augmented triad is : { stem:["[0 4 8\]", "[1 5 9\]","[2 6 10\]","[3 7 11\]"] }

Stabilizer cyclic orbit of augmented triad is : stem:[{"M1-T0~4*"}] = stem:[{"M1-T0", "M1-T4", "M1-T8"}]

Check this result by orbit-stabilizer theorem : stem:[|G"⋅"A| = (|G|) / (|G_A|)]

- Cardinality of augmented triad cyclic orbit : 4 (number of PCS in orbit)
- Cardinality of cyclic group : 12 (number of operations in group)
- Cardinality of stabilizers : 3 (number of operations that fix pcs of the orbit)

We have stem:[|G"⋅"A| = (|G|) / (|G_A|) => 4 = 12/3], it's OK !


Seventh Diminished is an other example of PCS in limited transpositions :  : image:dim7th-clock.png[50,50] There are 3 into orbit.

image::orbit-stab-fix-dim7thV2.svg[]

We can introduce a new property: Orbit stabilizer.

=== Orbit stabilizer

Orbit stabilizer is the union of the stabilizers of its elements (PCS).

More formally :

====
[.text-center]
--

*Orbit Stabilizer*

stem:[ "Orbit" -> Stabilizer]

stem:["Stabilizer(O)" := { G_"pcs" }, AA \ pcs in O ]

--
====

Examples, with _H_ = Cyclic group :

- Stab( _H_ ⋅[0 3 6 9] ) = `{ M1-T0,M1-T3,M1-T6,M1-T9 }`
- Stab( _H_ ⋅[2 5 8 11] ) = `{ M1-T0,M1-T3,M1-T6,M1-T9 }`
- Stab( _H_ ⋅[3 7 11] ) = `{ M1-T0,M1-T4,M1-T8 }`
- Stab( _H_ ⋅[0 4 7] ) = `{ M1-T0 }`

NOTE: Into an orbit of cyclic group, all pcs share the same stabilizer. This is generally not the case for other groups.
 +
Example with H = `{ M1-T0~1*, M11-T0~1* }` (dihedral group) :
 +
 image:orbit-stab-fix-diatMaj.svg[orbit-stab-fix-diatMaj]
 +
 Note : Diatonic major is in _Limited Transformation_ (its inverse is also a Diatonic major structure)

=== Conclusion

We have seen that the operations of the cyclic group only perform transpositions.

An action of the cyclic group on stem:[ZZ_12] generates a group with 12 transposition operations and 352 orbits. This action has made it possible to highlight the sets of PCS with limited transpositions.

A PCS, resulting from an action of the cyclic group, has the following properties:

* It belongs to one and only one orbit.

* It is stabilized by at least one transformation operation (M1-T0)

An orbit can be characterized by the set of stabilizers of its PCS.

The cyclic group is not the only possible subgroup of G. It's time to take inventory of G subgroups.

== Stabilizer

As specified in the chapter <<_stabilizer_and_fixed_pcs>>, a stabilizer is inseparable from an orbit, it is even one of its components.

It turns out that possible several orbits share the same stabilizer. The best known of them is the only one to be composed of only one transformation operation is stem:["M1-T0"], the _identity operation_, also called _neutral operation_.

For example, concerning the cyclic group, composed of the 12 transposition operations (M1-T0, M1-T1, ... M1-T11), 335 of its orbits share this same stabilizer M1-T0.

As a result, grouping the orbits according to their stabilizer can be very relevant. Indeed, such a grouping criterion allows to quickly identify the scales with limited transposition.

In the "Z~n~ explorer" page, grouping by stabilizer is triggered by the button: image:button-show-orbits-grouped-by-stabilizer.png[Show orbits grouped by stabilizer]

Stabilizers of cyclic group are : `M1-T0~2*, M1-T0~1*, M1-T0~3*, M1-T0~4*, M1-T0~6*` and `M1-T0`.

Operations of stabilizer are here represented in a _reduced name format_.

=== Reduced Name

`M1-T0~1*` : Here represents the different transposed versions of the operation `M1`.

Suffix `T0~1*` means that all transpositions of step `1` are concerned, starting from `T0`.

Thus, `M1-T0~1*` is a reduced (compressed) version of : `M1-T0 M1-T1 M1-T2 ... M1-T10 M1-T11`

More formally :

====
[.text-center]
--

*Understand Reduced Stabilizer Name*

stem:[ "string " -> " Set of Operations"]

stem:["C"_b"M"_a"-T"_"i""~step*" :=  uuu_(k=0)^(n/"step") "C"_b"M"_a"-T"_(i+(k cdot "step"))]

where _step_ is a divisor of _n_
--
====

Examples :

- CM11-T0~6* = { CM11-T0, CM11-T6 }
- CM11-T1~6* = { CM11-T1, CM11-T7 }
- M1-T0~1* = { M1-T0, M1-T2, M1-T3, ..., M1-T10, M1-T11 }
- M5-T1~4* = { M5-T1, M5-T5, M5-T9 }

This type of representation increases the readability of a stabilizer. Empty pcs is the best case, because the set of stabilizer of G~[∅]~ is composed of 48 operations, and denoted M1-T0~1* M5-T0~1* M7-T0~1* M11-T0~1*, only 4 reduced names vs 48, a nice saving!


=== Meta-Stabilizer

A "meta-stabilizer" is a stabilizer "up to transposition", so, suffix `-Tk` is omitted.

.Meta-Stabilizer naming examples
|===
|Stabilizer|Meta-Stabilizer

|`M1-T0 CM11-T6`
|*M1 CM11*

|`M1-T0 M1-T6 M5-T0 M5-T6 M5-T1~4*`
|*M1 M5*

|`M1-T0`
|*M1*

|`M1-T0~1*`
|*M1*

|`M1-T0~1* M5-T0~1* M7-T0~1* M11-T0~1*`
|*M1 M5 M7 M11*
|===

With stem:[n=12], there are 8 meta-stabilizers : M1, M5, M7, M11, CM1, CM5, CM7, CM11.
A meta-stabilizer can be represented by a geometric figure, an 8-vertex polytrope (octotrope).

=== Octotrope
Octotrope, a geometric figure for a combination of meta-stabilizers.

Two options were chosen: either a 3D representation (the 8 vertices of a cube) or a "flattened" projection of the cube where the vertices are represented by 2 superimposed discs (the largest for the complementary). For ease of representation, we have opted for this second representation

image::octotrope.png["Octotrope def",align="center"]

An orbit can be fixed by one or more meta-stabilizer. Example, Diatonic major scale is meta-fixed by M1 and M11 (i.e. inverse of diatonic scale is also a diatonic structure) See Musaic n° 38. Set of meta-stabilizers linked to a musaic (an orbit) is represented by a octotrope. Examples :

* Major scale [0 2 4 5 7 9 11]  is meta-invariant by M1 and M11, represented by octotrope : image:octotropes/m1-m11.png[m1-m11]
* Diminished scale [0 3 6 9] is meta-invariant by M1, M5, M5 and M11 : image:octotropes/m1-m5-m7-m11.png[m1-m5-m7-m11]

With stem:[n=12], 88 orbits may be partitioned in 13 octotrope classes (last row : number of musaics meta-stabilized)

[cols="13*^"]
|===
<|M1 <|M1 M5 <|M1 M7 <|M1 M11 <|M1 CM5 <|M1 CM11 <|M1 M5 M7 M11 <|M1 M5 CM1 CM5 <|M1 M5 CM7 CM11 <|M1 M7 CM5 CM11 <|M1 M11 CM1 CM11 <|M1 M11 CM5 CM7 <|M1 M5 M7 M11 CM1 CM5 CM7 CM11

|image:octotropes/m1.png[]
|image:octotropes/m1-m5.png[]
|image:octotropes/m1-m7.png[]
|image:octotropes/m1-m11.png[]
|image:octotropes/m1-cm5.png[]
|image:octotropes/m1-cm11.png[]
|image:octotropes/m1-m5-m7-m11.png[]
|image:octotropes/m1-m5-cm1-cm5.png[]
|image:octotropes/m1-m5-cm7-cm11.png[]
|image:octotropes/m1-m7-cm5-cm11.png[]
|image:octotropes/m1-m11-cm1-cm11.png[]
|image:octotropes/m1-m11-cm5-cm7.png[]
|image:octotropes/m1-m5-m7-m11-cm1-cm5-cm7-cm11.png[]

|#19
|#6
|#11
|#10
|#2
|#4
|#24
|#1
|#3
|#2
|#1
|#1
|#4


|===

An octotrope allows you to quickly identify the class of invariants of a PCS.

Example (PCS page https://musaicbox.org/pcs/pid/1613[0 2 3 6 9 10] ) : image:limited-transf-octotrope.png[]



TIP: On the MusaicBox app, go to page https://musaicbox.org/the88[88 Musaics] to see the different musaics related to their octotrope.

== Inventory of subgroups

We have seen that stem:[G] extend special affine group with complementarity : stem:[c * (ax + k)]

Where stem:[G] actes on stem:[P(ZZ_12)], stem:[G] is composed of 96 operations :

[.text-center]
{ T0, T1, …​, T11 } x { M1, M5, M7, M11, CM1, CM5, CM7, CM11 }

The smallest subgroup of G is `M1-T0`  and the largest is `G` itself.

For generate stem:[G], a restricted set of *generator operations* is sufficient (ref. Caley table algorithm), the same goes for its subgroups.

For example, cyclic sous-group of G can be denote by this *subgroup generator* `M1-T1`, because is one of the 4 generators of the cyclic group `{M1-T0, M1-T1, M1-T2, ..., M1-T11}`

NOTE: The four generators are `M1-T1`, `M1-T5`, `M1-T7`, `M1-T11`, and by convention, it is "the smallest" that takes precedence, as for prime form of an orbit.

Some common and remarkable subgroups and one subgroup generator selected:

- Trivial  subgroup : `M1-T0` (4096 orbits)
- Dihedral subgroup : `M11-T1` (224 orbits)
- Affine subgroup : `M5-T1, M7-T1` (158 orbits)
- G extended affine group : `M5-T1, M7-T1, CM1-T1` (88 orbits)

The classification of pcs allows the implementation multiple equivalence relations, beyond the well-known "up to one transposition".

[#classification-table]
=== A classification table of P(Z~12~)

Here is an inventory published in the collective work "Autour de la Set Theory".

_"The table [below] shows the 13 different classifications of sets determined by the different definitions of the term "equivalence". The list includes all sets, the empty set, and the so-called trivial cardinalities 1, 2 (and 10, 11), as well as the aggregate. The classification problem posed by trivial cardinalities was widely discussed in the 1950s <<PERLE>>" ( source : <<LVERDI>>)._

[#LVerdi-Table]
.From "Autour de la Set Theory" (<<LVERDI>>), page 41 (author Luigi Verdi)
image:tableau-sous-groupes-ircam.png[tableau-sous-groupes-ircam]

//
// .From https://www.emis.de/journals/SLC/opapers/s26fripert.pdf (Andreatta ircam)
// image:common-groups.png[common groups]

=== 17 subgroups computed

A calculation was carried out in order to inventory all possible subgroups of our reference group stem:[G] with its 96 operations. This results in 16+1 subgroups (+ 1 for trivial group), visible in the appendix (<<_subgroups_and_their_generators>>) and listed below.

NOTE: All operation are with suffixe -T1, for include all steps of transposition and to be sure to inject the neutral operation (M1-T0) into the group.
 +
 As any subgroup includes the neutral operation in its elements, suffixe "-T1", being implied, is omitted.
 +
Example : [M1-T1 M11-T1] => [M1 M11]

TIP: By definition, a stabilizer is also a subgroup (isotropy subgroup). +
 +
 We can see that the set of 13 meta-stabilizers is included, *but not equal*, to the set of subgroups of Z~12~


.Enumeration of subgroups, by cardinality
[%header,frame=ends,grid=rows, cols="8h,^1,^1,^1,^1,^1,^1,^1,^1,^1,^1,^1,^1,^1,>1s,^1e,^4"]
|===
.^|SubGroup/Card .^|0 .^|1 .^|2 .^|3 .^|4 .^|5 .^|6 .^|7 .^|8 .^|9 .^|10 .^|11 .^|12 .^|stem:[sum_("orbits")] .^|#Ops .^|name

|[M1-T0]
|1
|12
|66
|220
|495
|792
|924
|792
|495
|220
|66
|12
|1
|4096
|1
|Trivialstem:[""_(ZZ_12)]

|[M1]
|1
|1
|6
|19
|43
|66
|80
|66
|43
|19
|6
|1
|1
|* 352
|12
|Cyclicstem:[""_(ZZ_12)]

|[M1 M7]
|1
|1
|5
|13
|28
|40
|50
|40
|28
|13
|5
|1
|1
|226
|24
|?

|[M1 M11]
|1
|1
|6
|12
|29
|38
|50
|38
|29
|12
|6
|1
|1
|* 224
|24
|Dihedralstem:[""_(ZZ_12)]

|[M1 M5]
|1
|1
|5
|12
|28
|38
|48
|38
|28
|12
|5
|1
|1
|218
|24
|?

|[M1 CM11]
|1
|1
|6
|19
|43
|66
|56
|(66)
|(43)
|(19)
|(6)
|(1)
|(1)
|192
|24
|?

|[M1 CM5]
|1
|1
|6
|19
|43
|66
|50
|(66)
|(43)
|(19)
|(6)
|(1)
|(1)
|186
|24
|?

|[M1 CM7]
|1
|1
|6
|19
|43
|66
|46
|(66)
|(43)
|(19)
|(6)
|(1)
|(1)
|182
|24
|?

|[M1 CM1]
|1
|1
|6
|19
|43
|66
|44
|(66)
|(43)
|(19)
|(6)
|(1)
|(1)
|* 180
|24
|?

|[M1 M5 M7 M11]
|1
|1
|5
|9
|21
|25
|34
|25
|21
|9
|5
|1
|1
|* 158
|48
|Affinestem:[""_(ZZ_12)]

|[M1 M7 CM5 CM11]
|1
|1
|5
|13
|28
|40
|38
|(40)
|(28)
|(13)
|(5)
|(1)
|(1)
|126
|48
|?


|[M1 M11 CM1 CM11]
|1
|1
|6
|12
|29
|38
|35
|(38)
|(29)
|(12)
|(6)
|(1)
|(1)
|122
|48
|?

|[M1 M11 CM5 CM7]
|1
|1
|6
|12
|29
|38
|33
|(38)
|(29)
|(12)
|(6)
|(1)
|(1)
|120
|48
|?

|[M1 M5 CM7 CM11]
|1
|1
|5
|12
|28
|38
|35
|(38)
|(28)
|(12)
|(5)
|(1)
|(1)
|120
|48
|?

|[M1 M7 CM1 CM7]
|1
|1
|5
|13
|28
|40
|30
|(40)
|(28)
|(13)
|(5)
|(1)
|(1)
|118
|48
|?

|[M1 M5 CM1 CM5]
|1
|1
|5
|12
|28
|38
|31
|(38)
|(28)
|(12)
|(5)
|(1)
|(1)
|116
|48
|?

|[M1 M5 M7 M11 CM1 CM5 CM7 CM11]
|1
|1
|5
|9
|21
|25
|26
|(25)
|(21)
|(9)
|(5)
|(1)
|(1)
|* 88
|96
|Affine+Complement stem:[""_(ZZ_12)]
|===

Only 5 subgroups are identified out of the 13 classifications in the table : <<LVerdi-Table>>.

Other view, the lattice of subgroups, without trivial group, identified by their cardinality.

.Subgroups lattice - prefix "M" and "M1" are omitted (M1 CM11 => C11) (J-Y. Fusil - 2009)
image::lattice-subgroups12.png[lattice-subgroups12]

NOTE: 4 of the 5 well-known subgroups are located on the central vertical axis.


[#_affine_with_pivot]
== Revisited Affine Operation

(with pivot parameter for better basic operations)

As they stand, the generally accepted basic operations of musical set theory pose a logic problem that we raise here.

=== What's wrong with basic operations

Let's take the inversion operation (M11) as example, but the problem raised here also applies to M5 and M7 transformations.

In the literature on post-tonal analysis, inversion operation can be found expressed in two forms which we will here call _inverseA_ and _inverseB_:

- stem:["inverseA"(Pcs) = { (n - x) mod n | x ∈ Pcs }] // basic version <<Forte>>

- stem:["inverseB"(Pcs) = { (n - 1) * x mod n | x ∈ Pcs }] // https://en.wikipedia.org/wiki/Multiplication_(music)[multiplicative version M11]

Example : C Major scale `[0 2 4 5 7 9 11]`

* InverseA(`[0 2 4 5 7 9 11]`) :

`0` -> `12 - 0` -> `#0#`

`2` -> `12 - 2` -> `#10#`

`4` -> `12 - 4` -> `#8#`

`5` -> `12 - 5` -> `#7#`

`7` -> `12 - 7` -> `#5#`

`9` -> `12 - 3` -> `#3#`

`11` -> `12 - 11` -> `#1#`

This gives : InverseA(`[0 2 4 5 7 9 11]`) -> `[#0 1 3 5 7 8 10#]`


* InverseB(`[0 2 4 5 7 9 11]`) :

`0` -> `11 x 0` -> `#0#`

`2` -> `11 x 2` -> 22 mod 12 -> `#10#`

`4` -> `11 x 4` -> 44 mod 12 -> `#8#`

`5` -> `11 x 5` -> 55 mod 12 -> `#7#`

`7` -> `11 x 7` -> 77 mod 12 -> `#5#`

`9` -> `11 x 3` -> 33 mod 12 -> `#3#`

`11` -> `11 x 11` -> 121 mod 12 -> `#1#`

This gives : InverseB(`[0 2 4 5 7 9 11]`) -> `[#0 1 3 5 7 8 10#]`

As expected, _inverseA_ and _inverseB_ are *same logic* : [.underline]#CMajor is transformed in III degree of its VIb Major# (Ab Major)

.M11 on C Major = III degree of Ab Major (VI-flat Major 'degree' of C)
image::CMajor-M11-noPivot.png[CMajor-M11]

Now that we have seen how the PCS Do Diatonic Major behaves, let's take C#/Db Diatonic Major: `[0 1 3 5 6 8 10]`


* The inverse of C# Major, _inverseA_(`[0 1 3 5 6 8 10]`) :

`0` -> `12 - 0` -> `#0#`

`1` -> `12 - 1` -> `#11#`

`3` -> `12 - 3` -> `#9#`

`5` -> `12 - 5` -> `#7#`

`6` -> `12 - 6` -> `#6#`

`8` -> `12 - 8` -> `#4#`

`10` -> `12 - 10` -> `#2#`

_inverseA_(`[0 1 3 5 6 8 10]`) = _inverseB_(`[0 1 3 5 6 8 10]`) -> `[#0 2 4 6 7 9 11#]`

image::DbMajor-M11-noPivot.png[DbMajor-M11]

#⚠# *Oh!*, how comes the treatment of inversion for a C#/Db Major *differs* from that of a C Major?

The expected correct answer of Inverse(`[0 1 3 5 6 8 10]`)  should have been `[#1 2 4 6 8 9 11#]`, III degree of A Major (the VIb Major of Db Major) and not `[0 2 4 6 7 9 11]`.

Other example, with a _Limited Transposition_ scale : _C Dim7_

image::CDim7-infos.png[CDim7-infos]

As you might expect, a diminished seventh chord is *very strongly symmetrical*. Observe its stabilizers, there are 16 of them and 4 are in T0 (highlighted in yellow in the screenshot above) : `#M1-T0#` of course, and  `#M5-T0#`, `#M7-T0#` and `#M11-T0#`.

Let's summarize the different transformation operations of two diminished seventh chords: CDim7 [.nowrap]#(`[0 3 6 9]`)# and C#Dim7 [.nowrap]#(`[1 4 7 10]`)#.


// docinfo.html has a rule css for error red

[.text-center]
--

[#zero-fixed-problem]
.Basic operations in Musical Set Theory
[%header,cols="^,^,^,^,^"]
|===
|PCS|M11-T0 (inversion) |M5-T0|M7-T0|Dim7 waiting as strongly invariant
a|{nbsp}  +
CDim7 ||||
|image:clock-0369.png[]|image:clock-0369.png[]|image:clock-0369.png[]|image:clock-0369.png[]| #OK#

|[0 3 6 9]|[0 3 6 9]|[0 3 6 9]|[0 3 6 9]| #OK#

a|{nbsp}  +
C#Dim7 ||||


|image:clock-14710.png[]|image:clock-25811.png[]|image:clock-25811.png[]|image:clock-14710.png[]|  #[2 5 8 11] should be [1{nbsp}4{nbsp}7{nbsp}10]#

|[1 4 7 10]|#[2 5 8 11]#|#[2 5 8 11]#|[1 4 7 10]| #?!#
|===

--

Obviously [2 5 8 11] is an intruder! business logic is not good. But then why is he here???

=== The "fixed zero problem"

The basic operations of musical set theory, which are the standard in the field, have a peculiarity: *they are always centered on _0_ (zero)footnote:[if _n_ is even, fixed points are _0_ and _n/2_]* , thus defining it as a fixed point we call the *_"fixed zero problem"_*.

The bad result we observed comes from the fact that the algorithms confuse index and pitch-class name, both being expressed by integers (a very useful confusion, by the way).

Calculations performed directly with these values lead to a falsely controlled side effect.

Example : `[1 4 7 10] x 11 = [11 44 70 110] modulo 12 = [11 8 5 2] => #[2 5 8 11]#`

As any musician would expect, the main characteristics of a PCS *should be insensitive to the transposition step* : the main characteristics of a PCS remain unchanged compared to those of the same PCS transposed by a _k-step_.

Indeed, the D-Major PCS share the same structural characteristics as any Major PCS, but we have noted that, in their basic form, the transformation operations, other than transposition, do not respect this constancy across all Major PCS.


====
[.text-center]
*_"Fixed zero problem"_*.

Generally speaking, the "fixed zero" has been identified as a problem by the Musical Set Theory, particularly in tonal system, and several solutions have been proposed.

* "_Babbitt and Perle develop "moveable-DO" systems. The zero residue is used to label the *first pitch-class* of the most significant row-form in any specific musical context_". <<LEWIN>>. We will see, with Db Major, that this is not a good solution.
* David Lewin proposes defining the LABEL function, which define a pitch-class reference for inversion, associates with a GIS (<<LEWIN>>, page 31).
* Later, David Lewin "frees" the LABEL function using a parameterized inversion operation _I^u^_, an inversion around _u_. <<LEWIN-1977a>> <<LEWIN-1980>>. Only deals with the case of inversion.

====


[#understand-fixed-point-algorithm]
=== Idea of solution

We are looking for a solution that allows to maintain the structural consistency of PCSs across different transformations, including inversion and transformation by cycles of fifths and fourths.

The Label-Free David Lewin's solution (_I^u^_) partially addresses this problem (deals with inversion only).

We propose to generalize this solution to the extended affine function seen previously by introducing a new parameter to designate the fixed point of the transformation.

We start from the observation that the points fixed by the transformation operations depend essentially on _n_. For _n_ = 12, these fixed points are represented by this figure :

.Template of transformations (n = 12)
image::fixed-indexes-n12.png[fixed-indexes-n12]

In its basic form, the affine function _ax + k_, the first term is always fixed by _0_, whatever _x_. Zero is the guaranteed fixed point, whatever _n_. Note that, when _n_ is even, the fixed points are {_0, n/2_}. For _n_ = 12, we have the choice between _0_ and _6_, but _6_ does not correspond to the general case.

The idea chosen is to model the transformation operations on these fixed point models.

Without calling into question the arithmetic based on pitch-class names, a general solution would be to align one of the pitch-class of the PCS in question with the zero pitch-class before the transformation (M5, M7 or M11).

More precisely, this requires three operations, this is the price to pay for good consistency:

. Transpose, by a step ok _-p_, the PCS to make one of its PCs coincide with zero
. Apply the requested affine transformation (_ax + k_)
. perform an inverse transposition (_p_)

Some examples of inversion :

Example1 C-sharp Dim7 inversion : `M11-T0` on `[1 4 7 10]`

. `[1 4 7 10]` transpose with `p = -1` => `[0{nbsp}3{nbsp}6{nbsp}9]`
.  `[0 3 6 9]` x 11 modulo 12 => `[0{nbsp}3{nbsp}6{nbsp}9]`
. `[0 3 6 9]` transpose with `p = 1` => `#[1{nbsp}4{nbsp}7{nbsp}10]#`

Example2 D Major scale inversion : `M11-T0` on  `[1{nbsp}2{nbsp}4{nbsp}6{nbsp}7{nbsp}9{nbsp}11]`

. `[1{nbsp}2{nbsp}4{nbsp}6{nbsp}7{nbsp}9{nbsp}11]` transpose with `p = -2` => `[0{nbsp}2{nbsp}4{nbsp}5{nbsp}7{nbsp}9{nbsp}11]`
. `[0{nbsp}2{nbsp}4{nbsp}5{nbsp}7{nbsp}9{nbsp}11]` x 11 modulo 12 =>
`[{nbsp}1{nbsp}3{nbsp}5{nbsp}7{nbsp}8{nbsp}10]`

. `[0{nbsp}1{nbsp}3{nbsp}5{nbsp}7{nbsp}8{nbsp}10]` transpose with `p = 2` => `#[0{nbsp}2{nbsp}3{nbsp}5{nbsp}7{nbsp}9{nbsp}10]#`

// use instead [.nowrap]

This solution is correct for all affine operations, but raises another problem: How to determine the value of _p_ ?
//as a transformation at the origin?

More possibilities:

A. *Choosing the "smallest PC"*.
 +
This choice is the same as first pitch-class of PCS in normal order. It is not always the right one: It works in the case of C# dim7, but not on D Major, [.nowrap]#[1 2 4 6 7 9 11]#, because its first and minimum pitch-class is 1 (C#), the seventh of the scale, and not the root of D major.

B. *Any PC from chromatic circle*
 +
"_There are twelve ways of inverting the total pc chromatic into itself, and any one of these twelve inversions may assume priority in a given musical context._" <<LEWIN-1977a>>.
 +
But this choice does not guarantee the consistency of transformation operations: Take a pitch-class that are not part of the pcs to be transformed cause a side effect. Such a pitch-class pollutes the pcs to be transformed during the transformation. See <<_whats_wrong_with_basic_operations>> when zero in not a pitch-class of the given pcs.

C.  *Any PC belonging to PCS to be transformed*
 +
This ensures that the transformation will be based on a pitch-class of the relevant PCS (acting as a "fixed zero").
 +
This solution is compatible with the idea of the solution, leaving to the author the choice of the reference pitch-class, among _m_ choices, _m_ being the cardinal of the pcs concerned by the transformation.

It seems clear that solution C prevails. The pivot _p_ must be chosen from the PCS pitch-classes. If we assume that the PCS in normal order represents a scale, _p_ designates the degree from which the M~p~a-Tk transformation will be applied.

[#design-affine-pivot]
=== Affine operation with pivot

A solution to resolve mismatch basic operations is to add a parameter _p_ (pivot) to Extended Special Affine Operation.

The p-value consists, for a given PCS, of selecting a pitch-class that:

- Acts as a fixed point in affine operations (not necessarily "zero" or the first pitch-class)

- Belongs to the pitch-class set under study, expected the empty set.

We have seen that when we want to control the fixed point of a transformation operation of a PCS, a series of three operations is required: M1-T-p, [C]Ma-Tk and M1-Tp. We call this operation _"AffinePivot"_, a right action.

====
[.text-center]
--
*_AffinePivot_~p,c,a,k~* +
_A composition of 3 affine operations_

stem:["AffinePivot"_(p,c,a,k)  : PCS xx NN xx bbb"B" xx NN xx ZZ -> PCS]

stem:["AffinePivot"_(p,c,a,k)(A) := M_1T_p(A) @ C_cM_aT_k(A) @ M_1T_-p(A)]

_Where *a* is prime with |E|, *k* a step of transposition, *c* if complement and *p* ∈ A, a pivot value_
--
====


=== AffinePivot reduced

We are now preparing to establish a condensed version of the function.

stem:["AffinePivot"_(c,p,a,k)(A) := M_1T_p(A) @ C_cM_aT_k(A) @ M_1T_-p(A)]

// Recall : Each extended affine function stem:[C_cM_aT_k] we can denote stem:[(c,a, k)], or stem:[(a, k)] when c=false, for the sake of simplification.

The extended affine composition function, that define one single function from composition of two functions, stem:[@],  is stem:[(c,a,k) @ (c',a',k') = (c oplus c', aa', ak' + k)]

We will use this reduction to reduce the composition of 3 functions, stem:[M_1T_p(A) @ C_cM_aT_k(A) @ M_1T_-p(A)], to a single one.

*  stem:[(false, 1, p) @ (c, a, k) @ (false, 1, -p)]
* = stem:[(false, 1, p) @ (c oplus false, a, -ap + k)]
* = stem:[(false, 1, p) @ (c, a, -ap + k)] // c ⊕ false = c
* = stem:[(false oplus c, a, -ap + k + p)]
* = stem:[(c, a, -ap + k + p)]
* = #stem:[(c, a, p(1 - a) + k)]#  <= solution

Unsurprisingly, only the transposition step is affected.

// a * (x - pivot) + pivot + t // 1 mut 1 sous 2 add

If we extract the affine part _ax + b_ :  (a,b) |-> stem:[(a, p(1 - a) + k)]

.AffinePivot analysis affine part
|===
.>a|stem:[p] .>a|stem:[a] .>a|stem:[k] .>a|stem:[(a, p(1 - a) + k)]|designation

|0
|
|
a|stem:[(a,k)]
|initial affine function

|0
|1
|
a|stem:[(1,k)]
|simple transposition


|0
|1
|0
a|stem:[(1,0)]
|neutral operation

|2
|11
|3
a|- stem:[(a, p(1 - a) + k)]
- stem:[(11, 2 * (1 - 11) + 3)]
- stem:[(11, -17)]
- stem:[(11, 7)] // modulo 12
|example of general use with pivot value

|===

//
//
// .Examples
// --
//
// * With _p_ = 0
//
// - stem:[(a, p(1 - a) + k)]
// - stem:[(a, k)]  // ok this is initial function composition affine
//
// * With _p_ = 0 and _a_ = 1
//
// - stem:[(a, p(1 - a) + k)]
// - stem:[(1, k)]  // ok, simple transposition
//
// * With _p_ = _0_ and _a_ = _1_ and _k_ = _0_
//
// - stem:[(a, p(1 - a) + k)]
// - stem:[(1, 0)]  // ok, neutral operation (id)
//
// * With _p_ = 2 and _a_ = 11  and _k_ = _3_ (general use)
//
// - stem:[(a, p(1 - a) + k)]
// - stem:[(11, 2 * (1 - 11) + 3)]
// - stem:[(11, -17)]
// - stem:[(11, 7)] // modulo 12
//
// --

We can now define the operation that acts on PCS.


====
[.text-center]
--
*Affine with pivot : An action on PCS*

stem:[M_paTk : P(E) xx NN xx NN xx ZZ -> P(E)]

stem:[M_paTk(A) := {\ (ax + p(1 - a) + k) mod |E| \ },  forall  x in A]

_Where *a* is prime with |E|, *k* a step of transposition, *p* a pc of A_


--
====


So, we can redefine special affine function with complement and pivot:

====
[.text-center]
--

*Extended special affine function with pivot*

[stem]
++++
[C]M_paTk(A) := { (M_paTk(A) \ \ \ \ \ \ \ if C " is not present"), (E\  \\ \ M_paTk(A)  if C " is present") :}
++++

--
====

////

[IMPORTANT]
====


Although the affinePivot function `CM~p~aTk` or `M~p~aTk`, has replaced the usual affine function `CMaTk` or `MaTk`, it should not be lost in sight that `[C]M~p~aTk` it is only a contraction of a composition of three basic affine functions:
[.nowrap]#`M1-Tp ∘ [C]Ma-Tk ∘ M1-T-p`# or [.nowrap]#`M1-T~p~([C]Ma-Tk(M1-T-p(pcs)))`#
as explained here <<design-affine-pivot>>.

====
////

=== Default pivot value

For compatibility with the usual affine function, as well as for practical reasons, we define the concept of default pivot value.


====
[.text-center]
[.underline]#Default pivot value when AffinePivot act on a PCS#

The default p-value is the first pitch-class of the PCS or pitch-class zero if the PCS is empty set.

By correlation, any pitch-class set in prime form has the default p-value equals to zero.

====

With the default pivot-value defined, we can simplify the writing of the affine transformation `M~p~a-Tk` as `Ma-Tk` when `M~p~a-Tk` acts on a PCS having its first pitch-class equals to _p_.

Examples:

- (CMaj -> Fmin) `M~0~11-T0([0 4 7])` =  `M11-T0([0 4 7])` = `[0 5 8]`, pivot=0 and it is the first pitch-class

- (Fmaj -> Bbmin) `M~5~11-T0([0 5 9])` =  `[1 5 10]`, pivot=5 is NOT the first pitch-class and must be specified.

- (FMaj/5th -> Cmin) `M~0~11-T0([0 5 9])` = `M11-T0([0 5 9])` =  `[0 3 7]`

- (C#dim7 -> C#dmin7) `M~1~11-T0([1 4 7 10])` = `M11-T0([1 4 7 10])` = `[1 4 7 10]`, pivot=1 and it is the first pitch-class

- (Db Major inversion) `M~2~11-T0([1 2 4 6 7 9 11])` = `[1 2 4 6 8 9 11]`, The pivot must be specified, because the root is not the first pitch-class of the pcs.


// And yet, the AffinePivot function has taken the place of the usual Affine functions in the project... Obviously to be clarified...

//
// === Composition AffineExtended function of (a, p(1 - a) + k)
//
// Composition function of traditional affine operation is
//
// stem:[(a,k) @ (a',k') = (aa', ak' + k)]
//
// which we apply to our extended function.
//
// Function composition stem:[@] is :
//
// - = stem:[(a, p(1 - a) + k) @ (a', p'(1 - a') + k')]
// - = stem:[(aa', a * (p'(1 - a') + k') + p(1 - a) + k)]
// - = stem:[(aa', -aa'p' + ap' +ak' -ap + p + k)]
// - = #stem:[(aa', -ap'(a + 1) + p(1-a) + ak' + k)]# <= solution
//
// Examples
//
// * With _p_ = 0 and p' = 0:
//
// - stem:[(aa', -ap'(a + 1) + p(1-a) + ak' + k)]
// - stem:[(aa', ak' + k)]  // ok this is initial function composition affine
//
// * With _p_ = _p'_ = 0 and _a_ = 1 and _a'_ = 1
//
// - stem:[(aa', -ap'(a + 1) + p(1-a) + ak' + k)]
// - stem:[(1, k' + k)]  // ok, simple transposition
//
// * With _p_ = _p'_ = _0_ and _a_ = _a'_ = _1_ and _k_ = _k'_ = _0_
//
// - stem:[(aa', -ap'(a + 1) + p(1-a) + ak' + k)]
// - stem:[(1, 0)]  // ok, neutral (or id) operation
//
// * With _p_ = 1 _p'_ = 2 and _a_ = 5  _a'_ = 7 and _k_ = 2 _k'_ = _3_
//
// - stem:[(aa', -ap'(a + 1) + p(1-a) + ak' + k)]
// - stem:[(35, -10(5 + 1) + (1-5) + 15 + 2)]
// - stem:[(11, 1)] // modulo 12

Examples of transformations with affinePivot function, with p-value specified:

.Revisited basic operations of Musical Set Theory, with pivot value (in red)
[%header,cols="^,^,^,^,^"]
|===
a|PCS +
source a|M~0~11-T0 +
or +
M11-T0 +
(inversion) a|M~0~5-T0 +
or +
M5-T0 a|M~0~7-T0 +
or +
M7-T0
|dim7 expected as strongly invariant

|image:pcs-0369-pivot0.png[]|image:pcs-0369-pivot0.png[]|image:pcs-0369-pivot0.png[]|image:pcs-0369-pivot0.png[] .^| Cdim7

|[0 3 6 9]|[0 3 6 9]|[0 3 6 9]|[0 3 6 9]| #OK#

|===

[%header,cols="^,^,^,^,^"]
|===
| .^a|M~1~11-T0 +
or +
M11-T0 .^a|M~1~5-T0 +
or +
M5-T0 .^a|M~1~7-T0 +
or +
M7-T0 |dim7 expected as strongly invariant
|image:pcs-14710-pivot1.png[]|image:pcs-14710-pivot1.png[]|image:pcs-14710-pivot1.png[]|image:pcs-14710-pivot1.png[] .^|C#dim7

|[1 4 7 10]|[1 4 7 10]|[1 4 7 10]|[1 4 7 10]|#OK#
 +
 C#dim7 has same treatment as Cdim7

|===

[%header,cols="^,^,^,^,^"]
|===
| .^|M11-T0  .^|M5-T0  .^|M7-T0|CMajor transformations (default pivot)

|image:pcs-CMaj-pivot0.png[]|image:pcs-CMaj-M11-pivot0.png[]|image:pcs-CMaj-M5-pivot0.png[]|image:pcs-CMaj-M7-pivot0.png[]|

|[0 2 4 5 7 9 11]|[0 1 3 5 7 8 10]|[0 1 7 8 9 10 11]|[0 1 2 3 4 5 11]|ok

|===

[%header,cols="^,^,^,^,^"]
|===
| .^|M~2~11-T0  .^|M~2~5-T0  .^|M~2~7-T0|DMajor transformations

|image:pcs-DMajor-pivot2.png[]|image:pcsDMaj-M11-Pivot2.png[]|image:pcsDMaj-M5-Pivot2.png[]|image:pcsDMaj-M7-Pivot2.png[]|

|[1 2 4 6 7 9 11]|[0 2 3 5 7 9 10]|[0 1 2 3 9 10 11]|[1 2 3 4 5 6 7]|OK DMajor with pivot=2 has same treatment as CMajor

|===

[%header,cols="^,^,^,^,^"]
|===
| .^|CM~0~11-T4  .^|CM~0~5-T4  .^|CM~0~7-T4|

|image:pcs-047-pivot-0.png[]|image:pcs-047-pivot-0-CM11-T4.png[]|image:pcs-047-pivot-0-CM5-T4.png[]|image:pcs-047-pivot-0-CM7-T4.png[]| CMaj transformations

|[0 4 7]|[12356781011]|[12567891011]|[01236791011]|
|===


[%header,cols="^,^,^,^,^"]
|===
a|CMaj +
pivot on 3rd .^|CM~4~11-T4  .^|CM~4~5-T4  .^|CM~4~7-T4|

|image:pcs-047-pivot-4.png[]|image:pcs-047-pivot-4-CM11-T4.png[]|image:pcs-047-pivot-4-CM5-T4.png[]|image:pcs-047-pivot-4-CM7-T4.png[]| CMaj transformations

|{startsb}0 4 7]|[12346791011]|[1234567910]|[01236791011]|
|===


[%header,cols="^,^,^,^,^"]
|===
a|D#/Eb Schoenberg Hexachord +
(pivot on root) .^|CM~3~11-T0  .^|CM~3~5-T0  .^|CM~3~7-T0|

|image:pcs-034589-pivot3.png[]|image:pcs-034589-pivot-3-CM11T0.png[]|image:pcs-034589-pivot-3-CM5T0.png[]|image:pcs-034589-pivot-3-CM7T0.png[]|D#/Eb Schoenberg Hexachord transformations

a|{startsb}0 3 4 5 8 9]|[0 4 5 7 8 11]|[2 5 6 7 10 11]|[0 1 4 7 8 11]|
|===


=== AffinePivot typescript implementation

[source, javascript]
----
/** extended affinePivot transformation implementation
 * c . (ax + b) |-> c . (ax + p(1 − a) + k)
 */
function affinePivot(
  p: number, // integer in [0..this.n-1],
             // assert: vectorIn[p] equals 1 if vectorIn not image of empty set.
  a: number, // integer, assert: a is prime with 'n'
  k: number, // integer in Z
  vectorIn: number[], // array of 0 | 1, a vector image of a pcs
  c: boolean = false // if true, return complement of permutedVector (false by default)
) : number[] // new vector "affinePivot" transformed
{
    const n = vectorIn.length
    let permutedVector : number[] = Array(n)
    // c . (ax + b) |-> c . (a * i + p(1 − a) + k)
    const b = p * (1-a) + k
    let j
    for (let i = 0; i < n; i++) {
      // j and i both play the role of both index and pitch-class.
      j = (n + (a * i + b) % n) % n // force modulo to get value >= 0
      // if c, invert 0 | 1
      permutedVector[j] = c ? (vectorIn[i] ? 0 : 1) : vectorIn[i]
    }
    return permutedVector
}
----

=== Conclusion

* After observing the so-called "fixed zero problem", we were led to introduce a new parameter to the affine function acting on PCS, to improve the consistency of affine transformation operations such as inversion (M11), M5 and M7.

* The concept of a default value for the pivot has been introduced, allowing the parameterized affine function to substitute for the usual affine function. This allows us to still benefit from the advantages of group action (construction of orbits and stabilizers).

////

Abstract général
  idée d'un POC du projet 88musaics.org
  Le POC, en retour, nous a obligé à résoudre des problèmes qui nous a amené à proposer une évolution du concept même de PCS et de ses opérations de bases associées (affine et complément)

https://www.reddit.com/r/AskAcademia/comments/2m64qo/what_is_the_difference_between_an_abstract_and_a/?tl=fr

Un résumé est un résumé de l'article et vous présentez le contexte et le raisonnement derrière le travail :

X est un problème parce que Y, nous avons donc fait Z et trouvé K.

X : Opérations affine de base
Y : inconsitence des opérations
Z : ajout au PCS une propriété nommées iPivot.
K : ... nous avons donc redéfini l'opération affine afin qu'elle exploite la donnée de pivot portée par le PCS sur lequel elle agit.


Une conclusion est ce que vous avez retenu de votre travail :

Après avoir fait Z et les expériences A, B et C, nous montrons K.

////

[#_for_better_projection]
== PCS for better projection

For now, let's look at the configuration of the piano keyboard, over an octave.

Piano keyboard gives pride of place to n = 7, embodied by the C major diatonic scale.

.Piano keyboard configuration
image::clavier7notes.svg[]

.Other view of piano keyboard
image::clavier7notesCircle.svg[]

TIP: Seven PCS of diatonic design as a circle divided into 7 equal parts


Physically, *the white keys are equidistant from each other, but musically, this is not the case*. Example: C-D = 2 semitones, the same for D-E, but E-F = 1 semitone.

This is so, because the piano keyboard made is designed *to map 7 into 12*.

When user simultaneously presses the white keys C E G, that is, the keys [0 2 4], it produces the chord [0 4 7]. Such a system is an automatic correspondence of stem:[ZZ_7] to stem:[ZZ_12] ( characteristic of some chromatic instruments as piano).

.Regularity of 7 broken in 12 mapped
image::pcs-246-mapped-047.png[]


=== Mapping


When n is less than 12, interesting properties can be exploited. For example, with n=7, a prime number thus comprising many generating cycles. By examples:

* Steps of 2: for constructing chords 0 2 4 6 8 10 12 modulo 7 -> 0 2 4 6 1 3 5 -> C E G B D F A
* Steps of 3: chord progression (C F B E A D G)

The diatonic scale is special in that it is a sequence of 1 or 2 semitones : Major scale intervallic structure is (2,2,1,2,2,2,1), it is Maximally Even and has _Myhill's_ property - (see below in this section)<<Johnson>>

Mapping system explained by figure below.

[#mapping-explained]
.Mapping 7 -> 12 Explained mapping from [0 2 4] to [0 4 7]
image::understand-mapping-system.svg[understand-mapping-system 7 to 12]

From there, studying n=7 as we did for n=12 is a short step. The number of possible combinations is 2^7 = 128.

* Trial group has 128 orbits
* Cyclic group has 20 orbits
* Affine group has 10 orbits
* Musaic (Complement+Affine) group has 5 orbits

.N=7
[cols="1,1,^3"]
|===
|Group name|Group operations|Orbits

|Trial group
|`M1-T0`
| cardinal = 128


|Cyclic group
|`M1`
|image:cyclic-group-n7.png[]

cardinal = 20


|Affine group
|`M1 M2 M3 M4 M5 M6`
|image:affine-group-n7.png[]

cardinal = 10

|Musaic group (Complement+Affine)
|`M1 M2 M3 M4 M5 M6 CM1 CM2 CM3 CM4 CM5 CM6`
|image:musaic-group-n7.png[]

cardinal = 5

|===

Although the diatonic scale is the most balanced geometric solution for distributing 7 notes within the 12-note chromatic circle, other scales would benefit from being explored.

[NOTE]
====
Did you know that the *diatonic scale* is the most geometrically balanced of the 7-note scale on the 12-note chromatic circle?

.Source: Timothy A. Johnson (<<Johnson>>)
image::map-7-to-12-best-symmetryV2.jpg[]

On the left, dots divide the circle into 7 equal parts, then on the right, these dots are distributed over the notes closest to the 12-note chromatic circle. This is _"the best compromise in terms of placing..._"

====

But Major Scale is not only one to have 7 pitches and only <1,2> as *generic interval* (see
https://en.wikipedia.org/wiki/Diatonic_set_theory[Diatonic Set Theory on wikipedia].

There are 29 cyclic orbits (or intervallic structure classes) with this characteristic, 13 of which have a cardinality between 5 and 8.

There are 11 cyclic orbits in Maximal Evenness, 25 cyclic orbits in Strict Second Order Maximal Evenness. See <<list-pcs-same-as-major-scale>>

* Why not focus on another major scale, like D Major, for example?

* Why focus only on this PCS with cardinality = 7?

* Why not explore other values of N?

This is how the idea of considering a PCS in a constant mapping situation came about.

=== Auto-Mapping

Let's take the example of a piano keyboard. Despite the predominance of N=7, the configuration integrates 7 into 12 (with the black keys). We say that this arrangement is a mapping of 7 over 12.

The AutoMap function can perform this mapping, and many more.

AutoMap transforms a given PCS _p_ of cardinality _x_, belonging to stem:[P(ZZ_12)], into a PCS _p'_ of stem:[P(ZZ_x)] mapped to stem:[P(ZZ_12)], having  *_p_* as *template mapping* - which explains the *"auto"* prefix of the function name. ( see <<mapping-explained>> )

To get the CM7 mapped in figure below, we need to perform two steps:

.  Select Automap from Diatonic Major scale
.  Select only 0 4 7 11 (by deselect 2 4 9)

And

[start=3]
. Add to WB page


image::CM7-mapped.png[]


On WhiteBoard page, let's consider CM7 as the PCS of stem:[P(ZZ_7)], with the C major diatonic scale as a reference. PCS [0 2 4 6] is mapped as [0 4 7 11].

Right click on this PCS, then _orbits->Cyclic orbit_, you get 7 other PCS, obtained by https://en.wikipedia.org/wiki/Transposition_(music)#Diatonic_transposition[diatonic transposition] :

.CM7 mapped to Diatonic Major (in orbit cyclic Z~7~)
image::CM7-mapped-diatonic-maj-cyclic-orbit.png[CM7-mapped-diatonic-maj-cyclic-orbit]


=== Auto-Mapping inverse

Inverse of automap is the _unmap_ function.

From a PCS _p_, mapped to stem:[ZZ_12], UnMap transform templateMapping of _p_  to an new PCS _p'_ *mapped to itself*. A PCS mapped to itself is considered as no mapped.

Return to PCS page, Go back to the PCS page, normally you should have the CM7 PCS Mapped. If not, map it.

Select UnMAp, you get a not mapped PCS [0 4 7 11] ([C E G B]), and let us ask for pcs in its cyclic orbit.

image::CM7-unmapped.png[CM7-unmapped]

Add it to WB page, and, again, do right click on this PCS, then _orbits->Cyclic orbit_, you get 12 other PCS :

.CM7 unmapped with its orbit cyclic (in Z~12~)
image::CM7-cyclic-orbit.png[CM7-cyclic-orbit]

TIP: You can Undo/Redo.footnote:redo[] at any time.

=== Conclusion

* We introduced the concept of Mapping, which allows you to explore PCSs from a *subgroup* of stem:[ZZ_12].

* We introduced the autoMap and unMap functions.

* We discussed the use of the autoMap and unMap functions in the application and presented a use case involving the discovery of the natural chords, and their quality, from major diatonic scale.

* The mapping function extends the concept of PCS again.

* The mapping function further extends the concept of PCS.
By default, a PCS is mapped to itself, and therefore considered "unmapped."

Therefore, this new concept does not disrupt the basic concept of PCS defined by Musical Set Theory.

We even believe that, beyond its practicality, the doubly extended PCS increases the exploration potential of its abstract descriptions.

== Musaics naming

Musaic name is composed of four parts: `Mindex-#minCard-#motifs-#pcs`

* *Mindex*: a is orbit index, among the 88 (based on the _id_ value of the minimum pcs of the orbit)
* *#minCard*: The minimal pcs cardinality of orbit
* *#motifs*: The number of distinct isc (or motifs)
* *#pcs*: The number of pcs into this orbit (orbit cardinality)

Examples:

* [.nowrap]#`M1-0-2-2`# is first musaic orbit (first 1), cardinality zero/12, has 2 isc and 2 pcs into orbit (empty and chromatic scales)
* [.nowrap]#`M88-6-1-2`# is the last musaic orbit (88), cardinality 6, only one isc and 2 pcs into orbit (two whole tone pcs)
* [.nowrap]#`M10-3-8-96`# is musaic 10, cardinality 3/9, 8 isc and 96 pcs into orbit
* [.nowrap]#`M61-5-2-24`# is 65th musaic orbit, cardinality 5/7, has 2 isc and 24 pcs into orbit
* [.nowrap]#`M7-2-2-12`# is 7th musaic orbit, cardinality 2/10, has 2 isc and 12 pcs into orbit (not 24)

[TIP]
====

There is a relation between the cardinality of  "cyclic orbit of a musaic" (of any orbit pcs - *#cyclicOrbitMusaic*), the number of distinct motifs  (*#motifs*) and the number of pcs into orbit (*#pcs*)

#cyclicOrbitMusaic =  stem:["#pcs" / "#motifs"]

Therefore, a musaic is "in Limited Transposition" (of any orbit pcs) if and only if this ratio is less than _n_ (n=12)

Examples:

[%autowidth]
[cols=".^,.^,.^"]
|===
|Musaic a|stem:["#pcs"/"#motifs"] | Limited Transposition

|[.nowrap]#M16-3-2-8#
|8/2 = *4*
|YES

|[.nowrap]#M10-3-8-96#
|96/8 = *12*
|NO

|[.nowrap]#M61-5-2-24#
|24/2 = *12*
|NO

|[.nowrap]#M36-4-2-12#
|12/2 = *2*
|YES

|[.nowrap]#M70-6-1-12#
|12/1 = *12*
|N0

|===


====

== 2048 scales

We now know that the 4096 PCS of the 12-ET can be reduced to 352 intervallic structure classes (isc - harmonic structure types inner chromatic circle) and reduce them to 88 motifs.

4096 => 352 => 88

From 352, each element of these reductions can be represented by a PCS. Then, these reductions can then be used to generate other 4096 PCS.

But what about *modes* of these 352 intervallic structure classes?

There is a group between 4096 and 352 which contains all mode structures.

=== Mode

"_The concept of modality has evolved over time and does not always have the same meaning depending on the era and culture._"
This is how Franck Jedrzejewski's chapter "Théories Modales" begins (<<Jedrzejewski>>) and includes, among other things, a plactic classification of modes in [.nowrap]#12-ET#, based on Knuth's rewriting rules.


A PCS as finite ordered set of pitch classes, has only one ordered representation (normal order) although any circular permutation defines the same PCS.

Ex : `[0 4 7]`

A *mode* is a PCS in which the starting note is fixed by pivot and define its intervallic structure.

Ex :  `[0 4 7]`~`0`~, `[0 4 7]`~`4`~,  `[0 4 7]`~`7`~

|===
|PCS with pivot|Intervallic structure

|`[0 4 7]`~`0`~
| (4 3 5)

|`[0 4 7]`~`4`~
| (3 5 4)

|`[0 4 7]`~`7`~
| (5 4 3)


|===

////
For Franck Jedrzejewski (<<Jedrzejewski>>) a *scale* is the realization of the structure of a mode translated into notes.

Example :

[cols="3*^"]
|===
|PCS|Modes|Scales

|image:pcs-02479-no-pivot.png[]
|image:mode-orbit-pentatonic.png[]
|5x12 = 60 scales.
 +
1er degree Major pentatonic : image:mode1-pcs-02479.png[],

image:mode1-pcs-135810.png[],
image:mode1-pcs-246911.png[],
image:mode1-pcs-035710.png[],
image:mode1-pcs-146811.png[],

 +
[...]
 +
4er degree Scottish pentatonic :
 +
image:mode4-pcs-02479.png[],
image:mode4-pcs-135810.png[]
 +
Etc.

|===


Mode and scale are often confused.

////

"A scale is a finite set of notes chosen and ordered from among the available pitches and characterized by the relationships of the conjoined intervals that compose it. A scale is relative, and any circular permutation defines the same scale: it has no beginning or end and is represented on a circle. It is independent of any idea of tone or tonic, tonality, or modality [...]
 +
A mode is a scale in which the starting note is fixed. It is characterized by its structure, that is, by the succession of intervals that compose it."
-- "`Hétérotopies musicales`" <<Jedrzejewski>> page 307 (translated from French)

TIP: This scale definition fits well with the _[ordered] PCS_ concept and mode definition with _PCS+pivot_ concept.

// A mode repeated at the octave during its presentation. Example: D E F G A B C D (Dorian mode)


TIP: MusaicBox draws on the work of Ian Ring <<IanRing>> to name scales/modes, and directs the user to the HTML page for the relevant scale (with Ian Ring's permission).

A scale "contains" its own modes. The best known is the major scale and its 7 modes: Ionian, Dorian, Phrygian, Lydian, Mixolydian, Aeolian, and Locrian.

.Seven modes of Major scale (score view)
image::maj-modes-score.png[major-scale-7modes-score]

.Seven modes of Major scale (Ionian is 1st degree)
image::major-scale-7modes.png[major-scale-7modes]

TIP: Although the concept of pivots hasn't been introduced for this problem, it will be very useful for understanding and identifying the modes.

Since there are 12 major scales in its cyclic orbit, and since this scale has 7 degrees, there are 12 x 7 = 84 potential modes represented by 84 PCSs with specific pivot values.

In this context of major scale, each mode has 12 cyclic representatives. Example with dorian mode:

[#dorian-mode-orbit]
.Pseudo mode orbit of dorian scale
image::dorian-mode-cyclic.png[dorian-mode-cyclic]

To avoid unnecessary duplication, we only count one representative per cyclic mode, as we already did with the reduction 4096 => 352 (intervallic structure classes).

=== From 352 to 2048

To identify the modes representatives, we select a PCS mode with origin zero (first pitch) and pivot = zero (which could be designated as the smallest PCS, taking into account the pivot value of the pseudo mode orbitfootnote:[The concept of pivot is not considered in group actions.]). These specific modes will be called *PCS in <<modal-prime-form>>*.

By example, the PCS in modal prime form of dorian mode is [.nowrap]#[0 2 3 5 7 9 10]#~*0*~ (see <<dorian-mode-orbit>>)

.Seven modes of major scale in modal prime form
image::major-scale-7modes-ModalPF.png[major-scale-7modes-ModalPF]

Now, we can enumerate all scales/pcs in modal prime form, without duplicate, from 352 intervallic structure classes represented by cyclic orbits.

Instead of retaining only one representative of the cyclic orbit, the minimum pcs, which is the origin of the reduction from 4096 pcs to 352, we extend our selection to the modes.

We have seen that, regarding the major scale, the number of modes in prime form is equal to the number of pitches in the scale, i.e., its cardinality. That is, 7 pitches => 7 different modes. But is this always the case? Is the number of modes always equal to the cardinality of the PCS?

The response is NO, due to the presence of PCSs in limited transposition (LT).

The number of modes of a pcs is given by the formula : stem:[ "cardinal(pcs)" / d], where stem:[d =  n / (" cardinal(orbitCyclic"_("pcs")")")" ]

This formula is possible because cardinal orbit always divides _n_ https://en.wikipedia.org/wiki/Lagrange%27s_theorem_(group_theory)[(Lagrange's theorem)]


For 335 cyclic orbits over 352, the ratio  stem:[ n / (" cardinal(orbitCyclic"_("pcs")")")"] gives 1.

For 17 cyclic orbits in Limited Transposition (LT), this ratio gives a divisor of n=12, either 1, 2, 3, 4 or 6, as *#orbitcardinal* at the bottom of the orbits in the figure below:

image:cyclic-orbits-TL-17.png[]

Some examples of calculating the number of modes of a PCS:

[cols="^1,^1,^1,^1"]
|===
|PCS |LT |Formula |Number of modes

|[0 4 7]
|NO
|stem:[3 -: 12 / 12]
|3

|[3 6 9]
|YES
|stem:[4 -: 12 / 3]
|1

|[0 4 8]
|YES
|stem:[3 -: 12 / 4]
|1

|[0 1 6 7]
|YES
|stem:[4 -: 12 / 6]
|2

|[0 1 2 3]
|NO
|stem:[4 -: 12 / 12]
|4

|===

We can now enumerate all modes:

[%autowidth]
[cols="*"]
|===
|PCS Cardinal >|0 >|1 >|2 >|3 >|4 >|5 >|6 >|7 >|8 >|9 >|10 >|11 >|12 >|Total

|Cyclic Orbits by cardinality
>|1
>|1
>|6
>|19
>|43
>|66
>|80
>|66
>|43
>|19
>|6
>|1
>|1
>e|352

|Modes by cardinality
>|0
>|1
>|11
>|55
>|165
>|330
>|462
>|462
>|330
>|165
>|55
>|11
>|1
>e|2048

|===

=== Why 2048 modes?

Another way to think about modes is to ask how many different scales there are that have a common note of 0 (or C). That is, how many sets of pitch classes (PCS), can be produced with only 11 pitch classes ? The answer is [.nowrap]#stem:[2^11 = 2048]#.

image:vector12_modes.svg[]

Again, the distribution is given by line 11 (or column) of Pascal's triangle.

.Distribution by cardinality of PCS in modal prime form
image::modes-pascal-triangle.png[modes-pascal-triangle]

=== Conclusion

* The mode concept allows us to highlight PCSs that the first reduction to 352 cyclic orbits had hidden from us.

* The central vertical axis of the subgroups begin : [.nowrap]#4096 -> *2048* -> 352 -> 224 -> 156 -> 88#

* The number of modes of a scale (PCS) depends on its cardinality and its status of limited transposition scale or not.

* The PCS concept, extended with the Pivot property, gives us easy access to the modes of a scale (PCS).

* The MusaicBox application offers several easy ways to discover the different modes of a PCS
** PCS page via the commands labeled M+ or M- which change the pivot value, or generate the mode list
** Whiteboard Page, idem + mode orbit and PFMode orbit.

//=> It remains to be shown how the concept of chord ("classical" and "extended") is treated by the application.

[glossary]
== Glossary

Armature ::
 An integer pair representing the intervals from which the musaic matrix frame is built.  For example, [.nowrap]#(1, 7)# or [.nowrap]#(1, 5)# for game on regular instruments, respectively tuned in fifths or fourths.

Integer Notation::
  The representation of pitch class by the integers 0 through 11 (pc integers) <<Forte>>

Normal order::
  A particular circular permutation of a pcs in ascending order <<Forte>>
+
Example : [7 0 4] -> [*0 4 7*] (normal order))
+
[NOTE]
--
Into this project, all pcs are in normal order. However, the search PCS function, on the top right of toolbar, accepts another order, it is *a way to define a pivot value* as first pc of the pcs.

Example : *[4 0 7] -> +[0 4 7]+~4~*
--

Intervallic Structure::
  For a given PCS (in normal order), this is the ordered list of intervals separating one PC from the next PC in the chromatic circle, starting from the first PCS to the last PC and from the last PC to the first.

+
Example : (CMaj) IS([0 4 7]) = (4 3 5), because
+
* 0 to 4 -> 4 semitones
* 4 to 7 -> 3 semitones
* 7 to 0 -> 5 semitones
+
Particularity : Sum of intervals is always equals to _n_ (12)
+
Not to be confused with Interval Vector

Interval Class::
Other name : _Unordered Pitch-Class Interval_ <<Rahn>>
+
Is the smaller distance, in semitone, between two pitch classes in chromatic circle representation (Z~12~).
+
ic(a,b) = the smaller of i<a,b> and i<b,a>,
   where i<a,b> is an ordered pitch-class interval <<Rahn>>
+
Example: ic(0, 10) = 2,  because i<0, 10> = 10 and i<10, 0> = 2


Interval Vector::
  (or _Interval Class Vector_)
  This is an array of natural numbers which summarize the interval class in a pcs. (see https://en.wikipedia.org/wiki/Interval_vector)

Orbit::
 G⋅p : Set of pcs deducible from each other under the action of transformation operations of _G_ under _p_
+
For a given PCS _p_, if _p_ come from a group action G, orbit of _p_ is all images of _p_ by action of G under _p_
+
Two pcs pcsA and pcsB are equivalent if and only if their orbits are the same, that is, G⋅pcsA = G⋅pcsB.
+
Orbit is an equivalence class.

Cyclic Orbit::
Orbit having a group G composed only of transposition operations.
+
G = {M1-T0, M1-T1, M1-T2,..., M1-T11}
+
It is the equivalence class "up to transposition"

Dihedral Orbit::
Orbit having a group G composed only of transposition and inversion operations
+
G = {M1-T0, M1-T1, ..., M1-T11, M11-T0, M11-T1,..., M11-T11,}
+
It is the equivalence class "up to transposition and/od inversion"

Affine Orbit::
Orbit having a group G composed only of transposition, inversions and multiplication by 5 and 7 operations
+
G = {M1-T0, M1-T1,..., M11-T0, M11-T1,..., M5-T0,...,M7-T11,}
+
It is the equivalence class "up to transposition and/or inversion and/or M5 or M7 transformation"

Aff+Cplt Orbit::
Musaic Orbit::
Orbit having a group G composed only of transposition, inversions,  multiplication by 5 and 7 and complement operations (Affine operations + complement)
+
G = {M1-T0, M1-T1, M11-T1, M5-T1, M7-T1, CM1-T1, CM5-T1, CM7-T1, CM11-T1, ...}

It is the equivalence class "up to affine and/or affine complement"

Orbit Prime Form::
This is the *minimum pcs element of orbit*.
+
Example: cyclic orbit prime form of a PCS _p_, it is the minimum pcs of the cyclic orbit of _p_
+
If the orbit is not specified with the "prime form" quality, by default this is historically the _Dihedral prime form_ (<<Forte>>)

Intervallic Structure Class (isc)::
A "step-pattern". Is the Intervallic Structure up to circular shift. In other words, it is the *structure type of polygon inscribed* by a pcs into chromatic circle (see <<_clock_chromatic_circle>>).
+
There are 352 intervallic structure classes in twelve-tone equal temperament.
+
Example 2 pcs with same structure of polygon inscribed : image:pcsCM-FM.png[CM and FM]
+
Because all pcs in same cyclic orbit have same intervallic structure class (transposition preserve intervallic structure class), an intervallic structure class of a given pcs is represented by the _Intervallic Structure_ of its _cyclic prime form_.
+
Examples:
+
* (CMaj) isc([0 4 7]) = (4 3 5)  (_cyclic prime form_)
* (FMaj) isc([0 5 9]) = (4 3 5) (CMaj is its cyclic prime form)

+
CMaj and FMaj have same structure of polygon inscribed, so have same cis, have same musaic-motif

Musaic-Face::
  A 2D surface presented to the view. A musaic has 4 faces accessible by operations : _id_, _M11_, _M5_ and _M7_
+
A face is composed of two motifs, each characterized by a specific (and arbitrary) color. For 19 out of 88 musaics all their motifs are distinct.

[#Musaic-Motif,reftext=Musaic Motif]
Musaic-Motif::
 It is a component of a face (which contains two). Observing a motif means focusing on one of the two colors of a face.
+
It is a geometric figure of a intervallic structure class of a given pcs (bijection). A musaic has a potential from 1 to 8 distinct motifs. 4 faces  x 2 colors = 8 motifs.
+
Example musaic N°44 has 4 distinct motifs : image:pcs-03579.png[03579] and its 4 (black) motifs: image:pcs-musaic-motif-4.png[musaic-motif-4 only]

Scale::
A series of notes arranged in a specific order, from one note to its octave.
+
_"Due to the principle of octave equivalence, scales are generally considered to span a single octave, with higher or lower octaves simply repeating the pattern."_ https://en.wikipedia.org/wiki/Scale_(music)[(wikipedia)].
+
PCS in *normal order* (sorted) can be thought of as a representation of a scale.

Degree::
  Scale from a PCS, where its starting pitch is any pitch of the PCS, denoted by the pivot value.
+
Example: Major scale [0 2 4 5 7 9 11], its *third degree* is [.nowrap]#[0 2 4 5 7 9 11]#~*4*~ (pivot value 4 is the third pitch)

Mode::
 A degree of a scale, therefore, this a *PCS where pivot value matters*. In the context of this application, degree and mode are synonyms.
+
Example of *dorian mode* as second degree of C Major scale: [.nowrap]#[0 2 4 5 7 9 11]#~*2*~
+
The Dorian mode is the second degree of any major diatonic scale. Since there are 12 major diatonic scales, there are 12 instances of the Dorian mode, but only one of which is in modal prime form (first pitch and pivot to zero).
+
TIP: A PCS where pivot doesn't matter is more abstract than a mode.
 +
Inversely, a PCS can always be seen as the degree (or mode) of another PCS in its cyclic orbit, especially and precisely when its pivot value is defined.

[#modal-prime-form,reftext=Modal Prime Form]
Modal Prime Form::
A PCS whose first pitch value and pivot value are zero.
+
Example of *dorian in modal prime form* : [.nowrap]#[*0* 2 3 5 7 9 10]#~*0*~
+
If the pivot value is not specified, the value of the first step is used by default. If this value is zero, the pcs is automatically in modal prime form.
+
This representation allows you to quickly observe the harmonic structure of the scale from 0.
+
Example with the Dorian mode:
[.nowrap]#[0 2 3 5 7 9 10]#
+
* 0  : root
* 2  : major second (M2)
* 3  : minor third (m3)
* 5  : perfect fourth (P4)
* 7  : perfect fifth (P5)
* 9  : major sixth (M6)
* 10 : minor seventh (m7)

12-ET::
 12 equal temperament

////
Interval notation::
Notation based on diatonic system
+
* m2 (or min2): minor second,
* M3 (or maj3): major third,
* A4 (or aug4): augmented fourth,
* d5 (or dim5): diminished fifth,
* P5 (or perf5): perfect fifth.
////

Interval short name::
Simplified version
+
[%autowidth]
[cols="^1,^1,^1"]
|===
|Semitones|	Quality and number|	Short	name

|0
|	Perfect unison
|	P1

|1
|	Minor second
|	m2

|2
|	Major second
|	M2

|3
|	Minor third
|	m3

|4
|  Major third
|	M3

|5
|	Perfect fourth
|	P4

|6
|	Diminished fifth
|	d5

|7
|	Perfect fifth
|	P5

|8
|	Minor sixth
|	m6

|9
|	Major sixth
|	M6

|9
|  Diminished seventh
|	d7

|10
|	Minor seventh
|	m7

|11
|	Major seventh
|	M7

|===


[bibliography]
== References

* [[[Forte]]] Forte, Allen. 1973. The Structure of Atonal Music. New Haven: Yale University Press.

* [[[Rahn]]] Rahn, John. 1980. Basic Atonal Theory. New York: Longman.

* [[[Johnson]]] Johnson, Timothy, 2003. Foundations of diatonic theory. Key College Publishing

* [[[DIS]]] Stephen C.Brown. Dual Interval Space in Twentieth-Century Music,  Musaic in armature 1-5 is DIS(1,5).

* [[[PERLE]]] Perle, G. 1954. The possible Chords in Twelve Tone Music

* [[[LEWIN]]] David Lewin, Generalized musical intervals and transformations, Oxford University Press, 2007-1897

* [[[LEWIN-1977a]]] David Lewin, "A Label-Free Development for 12-Pitch-Class Systems" Journal of Music Theory 21 (1977), pp. 29-48.

* [[[LEWIN-1980]]] David Lewin, "On Generalized Intervals and Transformations" Journal of Music Theory, Vol. 24, No. 2 (Autumn, 1980), 243-251.



* [[[LVERDI]]] Verdi, Luigi. In Autour de la Set Theory. Ircam / Delatour ed. 2003.

* [[[TOPOS]]] Mazzola, Guerino. 2002. The Topos of Music. Birkhauser Verlag AG.

* [[[Morris]]] Moris, Robert. Elementary Twelve-Tone Theory. on line : https://ecmc.rochester.edu/rdm/pdflib/el.12ttth.pdf

* [[[Jedrzejewski]]] Jedrzejewski, Franck. 2019. Hétérotopies musicales. Hermann Editions

* [[[IanRing]]] Ring, Ian. https://ianring.com/musictheory/

== Appendix

=== Order relation

It would be useful to be able to sort the pcs among themselves. To do this, we need to define a total order relation that verifies:

// stem:[ ∀ x, y ∈ P(E), ( "id"(x) ≤ "id"(y) and "id"(y) ≤ "id"(x) ) => x = y ]

//see syntax https://asciimath.org/
stem:[ AA A, B in P(E)", " \   "id"(A) <= "id"(B) and "id"(B) <= "id"(A)  => A = B ]

In others all, if two PCS have same identity value, then we are dealing with the same PCS.

Question is : How to represent the identity relationship (id function)?

==== State
By definition, a PCS is a collection of PC. Type is not atomic, and may have some algorithmic efficiency problem, so we prefer a scalar identity.

==== Integer

To implement order relation, we use integer representation, to go through the order of natural integer.

==== Polynomial function pid()

Polynomial function (_pid_) is a good candidate for sorting the PCS among themselves.

stem:["pid("pcs")" = sum_(i=0)^(n-1) ""pcs""_"v[i\]" 2^i ] {nbsp} _(exploits the vector representation of a PCS - see PCS representation <<Integer>>)_


However, there remains a bias.

Examples with some pairs of pcs (pcs1 and pcs2), let's compare pid(pcs1) and pid(pcs2) to determine if pcs1 "is less than" pcs2 :

[%header]
.Example problem when compare identity with Polynomial Identifier
|===
|pcs1| pcs2| pid(pcs1) | pid(pcs2)| pcs1 < pcs2
| [ ]| [0]| _0_ | _1_ | **_true_**
|[0 4 7]| [1 5 8]| _145_ | _290_ | **_true_**
|[0 3 7]| [2 6 11]| _137_ | _2116_ | **_true_**
|[0 11] | [0 3 7] | _2049_ |_137_ | **_false_** (???)

#_waiting true_#
|===

In the first line, we admitted that a pcs with a smaller cardinal than another pcs will be considered smaller than the latter. But this is contradicted by the last line, counterintuitive.

We admit that when two PCS are compared, the one with the smaller cardinality will always be considered inferior to the other, which can be defined by :

stem:[forall (pcsA, pcsB) in P(Z_n)^2, |pcsA| < |pcsB| => pcsA  < pcsB]

We have seen, on an example, that _pid_ does not respect this property : stem:["pid"_("[0, 11\]") >  "pid"_("[0, 3, 7\]")]

We need to find another function.

[#identity-pcs]
==== Identity of PCS : id()

To take into account the cardinal in the general order relation that we are looking for, we introduce, independently of _pid_ , a function stem:[w] : stem:[ P(Z_12) -> NN ] {nbsp} defined by :

stem:[w(A) = m cdot |A| ]

In order to give significant weight to _w_ function, independently of _pid_, we take as the value of _m_ (the multiplicative coefficient of the cardinal of _A_) a value greater than the upper limit of the domain of _pid_ which is stem:[\[0..2^12[] {nbsp}, so the first next value outside _pid_ domain is  stem:[m=2^12].

So,  stem:[w(A) = 2^n cdot |A| ]

Augmented polynomial function, which called _id_, taked into account the cardinal, is :

// stem:[id_A = "pid"_A + w_A = "pid"_A + 2^n * |A| ]

====

[.text-center]
--
*id function*

stem:["id" : {0,1}^12 -> N]  {nbsp} defined by :

stem:["id("v")" = "pid"_A + w_A = sum_(i=0)^(n-1) v_i 2^i + 2^n * sum_(i=0)^(n-1) v_i   ]
--
====

[NOTE]
====
Since there exists a function (toVector) which gives the vector image of any PCS, we can also define function _id_ with this domain of definition  stem:["id" : P(ZZ_12) -> N]

Total order relation is definitely implemented by id function :
stem:[forall (pcsA, pcsB) in P(Z_n)^2, "id"(pcsA) <= "id"(pcsB) and "id"(pcsB) <= "id"(pcsA) => pcsA = pcsB]

====

The lower bound is stem:[0] obtained for the vector stem:[[0, 0, ... ,0\]]

The upper bound is stem:[2^n -1 + n2^n = 2^n(n+1)-1], for stem:[n=12], we obtain the vector stem:[[1, 1, ... ,1\]] and value stem:[53247].

An order relation on P(Zn) can be established, which is based on the order relation of natural numbers:

stem:[AA (A, B) in P(ZZ_n)^2 \ \ A <= B <=> "id"(A) <= "id"(B)]

Some properties :

stem:[AA (A, B) in P(ZZ_n)^2 \ \ A <= B and B <= A => "id"(A) = "id"(B)] {nbsp} so stem:[A = B] {nbsp} (_total order_)

stem:[AA (A, B) in P(ZZ_n)^2 \ \ A sube B => id(A) <= id(B) ] {nbsp} (_inclusion compatible_, note : inverse is not true).

stem:[forall (A, B) in P(ZZ_n)^2, |A| <= |B| <=> id(A) <= id(B)] {nbsp} (_cardinality compatible_)

[%header]
.Example Compare with Augmented Polynomial Identifier (id)
|===
|pcs1| pcs2| id(pcs1) | id(pcs2)| pcs1 < pcs1
| [ ]| [0]| _0_ | _4097_ | **_true_**
|[0 4 7]| [1 5 8]| _12433_ | _12578_ | **_true_**
|[0 3 7]| [2 6 11]| _12425_ | _14404_ | **_true_**
|[0 11] | [0 3 7] | _10241_ |_12425_ | **_true_** (ok)
|===

NOTE: In MusaicBox code, Augmented Polynomial Identifier is called _id_, and _pid_ is kept because is commonly used.

==== Application example

Example of application of the id function on a finite set: stem:[E = { "do, "mi", sol" }]

The set of subsets of E is :

[.text-center]
--
stem:[P(E) = { O/, {do},{mi},{sol},{do,mi},{do,sol},{mi,sol}, E }]
--

The figure below, presents (thin black arrow) the set inclusion relation, for example stem:[{do} sube {do, mi}], in minimal coverage, that is to say without transitivities, (for example the relation stem:[{do} sube {do, mi, sol}] is not arrowed - it is a lattice).

The *total order relation* is represented by the black arrow *and* the red arrow.

It is the minimal coverage of the relation defined by the _id_ function. Example: stem:[{do} < {mi} < {sol}].

.Minimal coverage of the relation id in lattice
image:relationOrdreTreilliV3.png[total order relation]

////
== Orbit


Example of _proposition_ : "_To be a major triad_"

There are only 12 pcs, among the 4096 pcs, where this proposition is true.

[%header]
.Different representations of _major triad_
|===
|structure name| intervals | clock | musaic
| Major triad | major third then perfect fifth then perfect forth |specific inscribed polygon image:major-triad-polygone.png[major-triad-polygone]|specific motif image:major-triad-motif.png[major triad motif]
|===

Such proposition can take form of an _equivalence relation_ : _R_ = "_to share same structure_"

Some characteristics of _R_ :

* symmetric : stem:[∀ x, y ∈ P(E), x\ R\ y => y\ R\ x ]

* reflexive : stem:[∀ x ∈ P(E), x\ R\ x ]

* transitive : stem:[∀ x, y, z ∈ P(E), (x\ R\ y and y\ R\ z) => x\ R\ z ]

=== Orbit
Orbit is a set where all of its elements (pcs) are connected by the same equivalence relation.footnote:[see _setoid_ or _bishop set_]

Example : Orbit cyclic of major triad as `{ C,E,G }` is a set with equivalence relations "_having same structure of major triad_". This set is composed of 12 elements (`{ C, E, G }, { Cb, F, Ab }, ..., { B, D#, F# }`)

[.float-group]
--
[.left]
.Orbit Cyclic in score view and Major Triad Motif
image::maj-triad-orbit-score.png["Orbit cyclic" float="left",align="center"]
--

Below, same, with clock representation.

[.float-group]
--
[.left]
.Orbit Cyclic in clock view and their inscribed polygon
image::maj-orbit-clock2.png["Orbit cyclic", float="left", align="center"]
--

If we organize the 4096 pcs set into subsets with equivalence relation "_having same structure (of inscribed polygon)_", we obtain 352 types of polygonsfootnote:[and not 4096/12, because some pcs have less than 12 transposed - limited transposition] therefore 352 subsets (orbits) forming a partition of 4096 pcs set.

[%header]
.Enumeration via line 12 of Pascal triangle
|===
|PCS cardinal|Orbit cardinal 6+^|_Coefficient of Transposition_|Pascal triangle line 12
|||1|2|3|4|6|12|_line 12_
|0|1|1||||||1
|1|1||||||1|12
|2|6|||||1|5|66
|3|19||||1||18|220
|4|43|||1||2|40|495
|5|66||||||66|792
|6|80||1||1|3|75|924
|7|66||||||66|792
|8|43|||1||2|40|495
|9|19||||1||18|220
|10|6|||||1|5|66
|11|1||||||1|12
|12|1|1||||||1
|total|*352*|2|1|2|3|9|335|*4096*
||352 orbits of cyclic group (17 + 335) 5+^|_17 cyclic orbits PCS in Limited Transposition_ (cardinal < 12)| 335 orbits of cardinal 12|4096 orbits of cardinal 1 (trivial group)

|===

Set of all these sets is known as `_P(E)_` (*power set*), and `cardinal(_P(E)_) = 2^n^ = *4096*`, cardinality ordered by line 12 of Pascal triangle.

// More formally, orbits are the result of the action of a group (cyclic, affine, dihedral, ..., musaic) on Z/nZ.

// By example : A4 (440 hz) and their lower and upper octaves share same characteristic : "having a frequency related to be a multiple of 2 of 440 Hz"
//

Pour partitionner l'ensemble des 4096 PCS,

En musique, il est généralement admis que nous pouvons changer la hauteur d'une oeuvre sans en changer fondamentalement sa nature. Dans la musique tonale, cette action est appelée "changement de tonalité".

Exemple : petite mélodie en 2 tonalités

On peut avoir 12 versions de cette mélodie (dans les 12 tonalités). L'ensemble de ces 12 versions est

Equivalence relation : "Having same prime form"

En identifiant n'importe quel son à une meme classe de hauteur (octave), modulo _n_, nous pouvons réduire tout extrait musical à un ensemble classes de hauteur.

It is about gathering all the elements sharing the same characteristic, in the same set called *equivalence orbit*, or *X orbit*, or *orbit* if equivalence context is clear.

TIP: An orbit is a set which can be empty (contains empty pcs) or contain all elements. For a given equivalence relation, an element belongs to only one orbit. Orbits, as a result of a group action, form  a partition of the set on which it acts (4096 PCS).

=== Octave/Enharmonic equivalence

Reduce to 12 pitches class and its 4096 PCS combinaisons (2^12^).

*Trivial group* has *4096* orbits, each orbit has max only one pcs (cardinal = 1)

=== Intervallic structure equivalence up to shift

This is form a cyclic group (group action on Z12).

All pcs of a given orbit share *same intervallic structure up to circular shift*, *obtained by transposition*.

In other words, PCS in clock representation having the *same inscribed polygon*.

Cyclic group has *352* orbits.footnote:[352 > 4096 / 12, because somme pcs are there cardinal cyclic orbit smaller than 12 (pcs in *limited transposition*)]

=== Dihedral equivalence

In this group, all PCs of a given orbit share the same interval structure of itself or its *inverse*.

Dihedral group has *224* orbits.

=== Affine equivalence

In this group, any pcs of a given orbit share with others pcs into this orbit, same intervallic structure of itself or this inverse or this transformed by *multiplication by 5 or 7 and their inverse*.

Affine group has *156* orbits.

=== Musaic equivalence

In this group, any pcs of a given orbit are in affine equivalence with itself or *affine complement*.

Musaic group has *88* orbits.
////

=== Prime Form

A quality that allows, without ambiguity, to designate a representative among the elements of an orbit.

To put it simply, it is the *smallest element of an orbit*.

////
TIP: Can be represented by a function PrimeForm : EquivalenceRelation x pcs -> pcs (from an equivalence relation and a pcs given we obtain one and oly one pcs representative of equivalence relation orbit.
 +
 +
Given R, an equivalence relation, and pcs1, pcs2 (two pcs), if PrimeForm(R, pcs1) == PrimeForm(R, pcs2), then pcs1 and pcs2 belong to the same R equivalence orbit.
////

==== What Prime Form is

Given an equivalence relation orbit (of pcs), there will always be a unique pcs _smaller_ than others into same orbit (thanks to the order relation).

// Originally <<Forte>>, prime denotes a pcs in normal form and "most packed on the left (0)"

<<Rahn>> John Rahn proposes a more rational approach, based on vector representation of a pcs (and its image function in an integer result of polynomial function)

*From there to saying that Prime Form quality is the minimum of an orbit, there is only one step, which we are taking !*

So, we cannot talk about Prime Form without giving its context.

NOTE: In musical set theory, historically, the default context of Prime Form is the dihedral group.

==== What Prime Form is not

Prime form is a "technical" characteristic of one element into an orbit, *apparently without musical resonance*.

In absolute terms, any pcs into an orbit can be a representative of their orbit. By convention, we select the _minimal element_

==== Symmetry prime form

A symmetry prime form of a given pcs, is a minimum pcs of its cyclic orbit that, if possible, highlights its axial symmetries (else is cyclic prime form).

NOTE: Symmetry prime form concept is invented, specific to this project.

Example on pcs : [2 3 5 7 8] :

[.float-group]
--
[.left]
.Symmetry and cyclic prime form
image::pcs_2_3_5_7_8_V3.png["Symmetry and cyclic prime form" float="left",align="center"]
--

[.float-group]
--
[.left]
.Cyclic prime form
image::pcs_2_3_5_7_8-PF-V3.png["Cyclic prime form" float="left",align="center"]
--

[.float-group]
--
[.left]
.Symmetry prime form
image::pcs_2_3_5_7_8-MPF-V3.png["Symmetry prime form" float="left",align="center"]
--

Below, cyclic orbit of [2 3 5 7 8], or [0 2 3 9 10], or ... 12 choices !

[.float-group]
--
[.left]
.Cyclic orbit and his symmetry and prime form
image::pcs_023910-cyclic-symmetry-pf.png["Symmetry and cyclic prime form" float="left",align="center"]
--

Same orbit, in other views and order :

[.float-group]
--
[.left]
.Cyclic orbit and his modal and prime form
image::pcs_2_3_5_7_8-wb2.png["Modal and cyclic prime form" float="left",align="center"]
--

=== Subgroups and their generators

From folder `src/app/laboratory` folder, unit test : _it('n=12 - Explore all sub-groups of musaic group - up to transposition'_

[literal]
----

'== Generators family (subgroups) ==================================='
'n=12 [M1-T0] card = 1'
' generators (1) ='
['M1-T0']
'====================================='
'n=12 [M1] card = 12'
' generators (1) ='
['M1-T1']
'====================================='
'n=12 [M1 M7] card = 24'
' generators (1) ='
['M1-T1', 'M7-T1']
'====================================='
'n=12 [M1 M11] card = 24'
' generators (1) ='
['M1-T1', 'M11-T1']
'====================================='
'n=12 [M1 M5] card = 24'
' generators (1) ='
['M1-T1', 'M5-T1']
'====================================='
'n=12 [M1 CM11] card = 24'
' generators (1) ='
['M1-T1', 'CM11-T1']
'====================================='
'n=12 [M1 CM5] card = 24'
' generators (1) ='
['M1-T1', 'CM5-T1']
'====================================='
'n=12 [M1 CM7] card = 24'
' generators (1) ='
['M1-T1', 'CM7-T1']
'====================================='
'n=12 [M1 CM1] card = 24'
' generators (1) ='
['M1-T1', 'CM1-T1']
'====================================='
'n=12 [M1 M5 M7 M11] card = 48'
' generators (4) ='
['M1-T1', 'M5-T1', 'M7-T1']
['M1-T1', 'M5-T1', 'M11-T1']
['M1-T1', 'M7-T1', 'M11-T1']
['M1-T1', 'M5-T1', 'M7-T1', 'M11-T1']
'====================================='
'n=12 [M1 M7 CM5 CM11] card = 48'
' generators (4) ='
['M1-T1', 'M7-T1', 'CM11-T1']
['M1-T1', 'M7-T1', 'CM5-T1']
['M1-T1', 'CM5-T1', 'CM11-T1']
['M1-T1', 'M7-T1', 'CM5-T1', 'CM11-T1']
'====================================='
'n=12 [M1 M11 CM1 CM11] card = 48'
' generators (4) ='
['M1-T1', 'CM1-T1', 'CM11-T1']
['M1-T1', 'M11-T1', 'CM11-T1']
['M1-T1', 'M11-T1', 'CM1-T1']
['M1-T1', 'M11-T1', 'CM1-T1', 'CM11-T1']
'====================================='
'n=12 [M1 M11 CM5 CM7] card = 48'
' generators (4) ='
['M1-T1', 'CM5-T1', 'CM7-T1']
['M1-T1', 'M11-T1', 'CM5-T1']
['M1-T1', 'M11-T1', 'CM7-T1']
['M1-T1', 'M11-T1', 'CM5-T1', 'CM7-T1']
'====================================='
'n=12 [M1 M5 CM7 CM11] card = 48'
' generators (4) ='
['M1-T1', 'M5-T1', 'CM11-T1']
['M1-T1', 'M5-T1', 'CM7-T1']
['M1-T1', 'CM7-T1', 'CM11-T1']
['M1-T1', 'M5-T1', 'CM7-T1', 'CM11-T1']
'====================================='
'n=12 [M1 M7 CM1 CM7] card = 48'
' generators (4) ='
['M1-T1', 'M7-T1', 'CM1-T1']
['M1-T1', 'M7-T1', 'CM7-T1']
['M1-T1', 'CM1-T1', 'CM7-T1']
['M1-T1', 'M7-T1', 'CM1-T1', 'CM7-T1']
'====================================='
'n=12 [M1 M5 CM1 CM5] card = 48'
' generators (4) ='
['M1-T1', 'M5-T1', 'CM1-T1']
['M1-T1', 'M5-T1', 'CM5-T1']
['M1-T1', 'CM1-T1', 'CM5-T1']
['M1-T1', 'M5-T1', 'CM1-T1', 'CM5-T1']
'====================================='
'n=12 [M1 M5 M7 M11 CM1 CM5 CM7 CM11] card = 96'
' generators (92) ='
['M1-T1', 'M5-T1', 'M7-T1', 'CM11-T1']
['M1-T1', 'M5-T1', 'M7-T1', 'CM1-T1']
['M1-T1', 'M5-T1', 'M7-T1', 'CM5-T1']
['M1-T1', 'M5-T1', 'M7-T1', 'CM7-T1']
['M1-T1', 'M5-T1', 'CM1-T1', 'CM11-T1']
['M1-T1', 'M7-T1', 'CM1-T1', 'CM11-T1']
['M1-T1', 'M5-T1', 'CM5-T1', 'CM11-T1']
['M1-T1', 'M7-T1', 'CM7-T1', 'CM11-T1']
['M1-T1', 'M5-T1', 'M11-T1', 'CM11-T1']
['M1-T1', 'M7-T1', 'M11-T1', 'CM11-T1']
['M1-T1', 'M7-T1', 'CM1-T1', 'CM5-T1']
['M1-T1', 'M5-T1', 'CM1-T1', 'CM7-T1']
['M1-T1', 'M5-T1', 'CM5-T1', 'CM7-T1']
['M1-T1', 'M7-T1', 'CM5-T1', 'CM7-T1']
['M1-T1', 'M5-T1', 'M11-T1', 'CM1-T1']
['M1-T1', 'M7-T1', 'M11-T1', 'CM1-T1']
['M1-T1', 'M5-T1', 'M11-T1', 'CM5-T1']
['M1-T1', 'M7-T1', 'M11-T1', 'CM5-T1']
['M1-T1', 'M5-T1', 'M11-T1', 'CM7-T1']
['M1-T1', 'M7-T1', 'M11-T1', 'CM7-T1']
['M1-T1', 'CM1-T1', 'CM5-T1', 'CM11-T1']
['M1-T1', 'CM1-T1', 'CM7-T1', 'CM11-T1']
['M1-T1', 'CM5-T1', 'CM7-T1', 'CM11-T1']
['M1-T1', 'M11-T1', 'CM5-T1', 'CM11-T1']
['M1-T1', 'M11-T1', 'CM7-T1', 'CM11-T1']
['M1-T1', 'CM1-T1', 'CM5-T1', 'CM7-T1']
['M1-T1', 'M11-T1', 'CM1-T1', 'CM5-T1']
['M1-T1', 'M11-T1', 'CM1-T1', 'CM7-T1']
['M1-T1', 'M5-T1', 'M7-T1', 'CM1-T1', 'CM11-T1']
['M1-T1', 'M5-T1', 'M7-T1', 'CM5-T1', 'CM11-T1']
['M1-T1', 'M5-T1', 'M7-T1', 'CM7-T1', 'CM11-T1']
['M1-T1', 'M5-T1', 'M7-T1', 'M11-T1', 'CM11-T1']
['M1-T1', 'M5-T1', 'M7-T1', 'CM1-T1', 'CM5-T1']
['M1-T1', 'M5-T1', 'M7-T1', 'CM1-T1', 'CM7-T1']
['M1-T1', 'M5-T1', 'M7-T1', 'CM5-T1', 'CM7-T1']
['M1-T1', 'M5-T1', 'M7-T1', 'M11-T1', 'CM1-T1']
['M1-T1', 'M5-T1', 'M7-T1', 'M11-T1', 'CM5-T1']
['M1-T1', 'M5-T1', 'M7-T1', 'M11-T1', 'CM7-T1']
['M1-T1', 'M5-T1', 'CM1-T1', 'CM5-T1', 'CM11-T1']
['M1-T1', 'M7-T1', 'CM1-T1', 'CM5-T1', 'CM11-T1']
['M1-T1', 'M5-T1', 'CM1-T1', 'CM7-T1', 'CM11-T1']
['M1-T1', 'M7-T1', 'CM1-T1', 'CM7-T1', 'CM11-T1']
['M1-T1', 'M5-T1', 'CM5-T1', 'CM7-T1', 'CM11-T1']
['M1-T1', 'M7-T1', 'CM5-T1', 'CM7-T1', 'CM11-T1']
['M1-T1', 'M5-T1', 'M11-T1', 'CM1-T1', 'CM11-T1']
['M1-T1', 'M7-T1', 'M11-T1', 'CM1-T1', 'CM11-T1']
['M1-T1', 'M5-T1', 'M11-T1', 'CM5-T1', 'CM11-T1']
['M1-T1', 'M7-T1', 'M11-T1', 'CM5-T1', 'CM11-T1']
['M1-T1', 'M5-T1', 'M11-T1', 'CM7-T1', 'CM11-T1']
['M1-T1', 'M7-T1', 'M11-T1', 'CM7-T1', 'CM11-T1']
['M1-T1', 'M5-T1', 'CM1-T1', 'CM5-T1', 'CM7-T1']
['M1-T1', 'M7-T1', 'CM1-T1', 'CM5-T1', 'CM7-T1']
['M1-T1', 'M5-T1', 'M11-T1', 'CM1-T1', 'CM5-T1']
['M1-T1', 'M7-T1', 'M11-T1', 'CM1-T1', 'CM5-T1']
['M1-T1', 'M5-T1', 'M11-T1', 'CM1-T1', 'CM7-T1']
['M1-T1', 'M7-T1', 'M11-T1', 'CM1-T1', 'CM7-T1']
['M1-T1', 'M5-T1', 'M11-T1', 'CM5-T1', 'CM7-T1']
['M1-T1', 'M7-T1', 'M11-T1', 'CM5-T1', 'CM7-T1']
['M1-T1', 'CM1-T1', 'CM5-T1', 'CM7-T1', 'CM11-T1']
['M1-T1', 'M11-T1', 'CM1-T1', 'CM5-T1', 'CM11-T1']
['M1-T1', 'M11-T1', 'CM1-T1', 'CM7-T1', 'CM11-T1']
['M1-T1', 'M11-T1', 'CM5-T1', 'CM7-T1', 'CM11-T1']
['M1-T1', 'M11-T1', 'CM1-T1', 'CM5-T1', 'CM7-T1']
['M1-T1', 'M5-T1', 'M7-T1', 'CM1-T1', 'CM5-T1', 'CM11-T1']
['M1-T1', 'M5-T1', 'M7-T1', 'CM1-T1', 'CM7-T1', 'CM11-T1']
['M1-T1', 'M5-T1', 'M7-T1', 'CM5-T1', 'CM7-T1', 'CM11-T1']
['M1-T1', 'M5-T1', 'M7-T1', 'M11-T1', 'CM1-T1', 'CM11-T1']
['M1-T1', 'M5-T1', 'M7-T1', 'M11-T1', 'CM5-T1', 'CM11-T1']
['M1-T1', 'M5-T1', 'M7-T1', 'M11-T1', 'CM7-T1', 'CM11-T1']
['M1-T1', 'M5-T1', 'M7-T1', 'CM1-T1', 'CM5-T1', 'CM7-T1']
['M1-T1', 'M5-T1', 'M7-T1', 'M11-T1', 'CM1-T1', 'CM5-T1']
['M1-T1', 'M5-T1', 'M7-T1', 'M11-T1', 'CM1-T1', 'CM7-T1']
['M1-T1', 'M5-T1', 'M7-T1', 'M11-T1', 'CM5-T1', 'CM7-T1']
['M1-T1', 'M5-T1', 'CM1-T1', 'CM5-T1', 'CM7-T1', 'CM11-T1']
['M1-T1', 'M7-T1', 'CM1-T1', 'CM5-T1', 'CM7-T1', 'CM11-T1']
['M1-T1', 'M5-T1', 'M11-T1', 'CM1-T1', 'CM5-T1', 'CM11-T1']
['M1-T1', 'M7-T1', 'M11-T1', 'CM1-T1', 'CM5-T1', 'CM11-T1']
['M1-T1', 'M5-T1', 'M11-T1', 'CM1-T1', 'CM7-T1', 'CM11-T1']
['M1-T1', 'M7-T1', 'M11-T1', 'CM1-T1', 'CM7-T1', 'CM11-T1']
['M1-T1', 'M5-T1', 'M11-T1', 'CM5-T1', 'CM7-T1', 'CM11-T1']
['M1-T1', 'M7-T1', 'M11-T1', 'CM5-T1', 'CM7-T1', 'CM11-T1']
['M1-T1', 'M5-T1', 'M11-T1', 'CM1-T1', 'CM5-T1', 'CM7-T1']
['M1-T1', 'M7-T1', 'M11-T1', 'CM1-T1', 'CM5-T1', 'CM7-T1']
['M1-T1', 'M11-T1', 'CM1-T1', 'CM5-T1', 'CM7-T1', 'CM11-T1']
['M1-T1', 'M5-T1', 'M7-T1', 'CM1-T1', 'CM5-T1', 'CM7-T1', 'CM11-T1']
['M1-T1', 'M5-T1', 'M7-T1', 'M11-T1', 'CM1-T1', 'CM5-T1', 'CM11-T1']
['M1-T1', 'M5-T1', 'M7-T1', 'M11-T1', 'CM1-T1', 'CM7-T1', 'CM11-T1']
['M1-T1', 'M5-T1', 'M7-T1', 'M11-T1', 'CM5-T1', 'CM7-T1', 'CM11-T1']
['M1-T1', 'M5-T1', 'M7-T1', 'M11-T1', 'CM1-T1', 'CM5-T1', 'CM7-T1']
['M1-T1', 'M5-T1', 'M11-T1', 'CM1-T1', 'CM5-T1', 'CM7-T1', 'CM11-T1']
['M1-T1', 'M7-T1', 'M11-T1', 'CM1-T1', 'CM5-T1', 'CM7-T1', 'CM11-T1']
['M1-T1', 'M5-T1', 'M7-T1', 'M11-T1', 'CM1-T1', 'CM5-T1', 'CM7-T1', 'CM11-T1']

----


=== List of 88 musaics

List of 88 Aff+Cplt orbits (naming musaics) generating of _P(Z~12~)_

(* : for Limited Transposition)

[#idTable88]
[%autowidth]
[cols=".^1,^.^2,.^3,.^4a, .^5", options="footer"]
|===
|ID [.head]#&uarr;#|Musaic orbit  |Motifs |Intervallic Structure Class |Meta-Stabilizer [.head]#&uarr;#

// special paste as plain text

|M1-0-2-2*
|image:88musaics/M1-0-2-2.png[M1-0-2-2]
 +
#2
| 2
|
* ()
* (1 1 1 1 1 1 1 1 1 1 1 1)
|  image:octotropes/m1-m5-m7-m11.png[width=50] M1 M5 M7 M11

|M2-1-2-24
|image:88musaics/M2-1-2-24.png[M2-1-2-24]
 +
#24
| 2
|
* (0)
* (1 1 1 1 1 2 1 1 1 1 1)
|  image:octotropes/m1-m5-m7-m11.png[width=50] M1 M5 M7 M11

|M3-2-4-48
|image:88musaics/M3-2-4-48.png[M3-2-4-48]
 +
#48
| 4
|
* (1 11)
* (5 7)
* (1 1 1 1 1 3 1 1 1 1)
* (1 1 1 1 1 2 1 1 1 2)
|  image:octotropes/m1-m11.png[width=50] M1 M11

|M4-2-2-24
|image:88musaics/M4-2-2-24.png[M4-2-2-24]
 +
#24
| 2
|
* (2 10)
* (1 1 1 1 1 2 2 1 1 1)
|  image:octotropes/m1-m5-m7-m11.png[width=50] M1 M5 M7 M11

|M5-2-2-24
|image:88musaics/M5-2-2-24.png[M5-2-2-24]
 +
#24
| 2
|
* (3 9)
* (1 1 1 1 1 2 1 2 1 1)
|  image:octotropes/m1-m5-m7-m11.png[width=50] M1 M5 M7 M11

|M6-2-2-24
|image:88musaics/M6-2-2-24.png[M6-2-2-24]
 +
#24
| 2
|
* (4 8)
* (1 1 1 1 1 2 1 1 2 1)
|  image:octotropes/m1-m5-m7-m11.png[width=50] M1 M5 M7 M11

|M7-2-2-12*
|image:88musaics/M7-2-2-12.png[M7-2-2-12]
 +
#12
| 2
|
* (6 6)
* (2 1 1 1 1 2 1 1 1 1)
|  image:octotropes/m1-m5-m7-m11.png[width=50] M1 M5 M7 M11

|M8-3-4-48
|image:88musaics/M8-3-4-48.png[M8-3-4-48]
 +
#48
| 4
|
* (1 1 10)
* (5 5 2)
* (1 1 1 1 1 4 1 1 1)
* (1 1 1 2 2 1 1 1 2)
|  image:octotropes/m1-m11.png[width=50] M1 M11

|M9-3-8-96
|image:88musaics/M9-3-8-96.png[M9-3-8-96]
 +
#96
| 8
|
* (1 2 9)
* (3 2 7)
* (7 2 3)
* (9 2 1)
* (1 1 1 1 1 3 2 1 1)
* (1 1 1 1 1 2 1 2 2)
* (2 2 1 2 1 1 1 1 1)
* (1 1 2 3 1 1 1 1 1)
|  image:octotropes/m1.png[width=50] M1

|M10-3-8-96
|image:88musaics/M10-3-8-96.png[M10-3-8-96]
 +
#96
| 8
|
* (1 3 8)
* (5 3 4)
* (4 3 5)
* (8 3 1)
* (1 1 1 1 1 3 1 2 1)
* (1 2 1 1 2 1 1 1 2)
* (2 1 1 1 2 1 1 2 1)
* (1 2 1 3 1 1 1 1 1)
|  image:octotropes/m1.png[width=50] M1

|M11-3-2-24
|image:88musaics/M11-3-2-24.png[M11-3-2-24]
 +
#24
| 2
|
* (2 2 8)
* (1 1 1 1 1 2 2 2 1)
|  image:octotropes/m1-m5-m7-m11.png[width=50] M1 M5 M7 M11

|M12-3-4-48
|image:88musaics/M12-3-4-48.png[M12-3-4-48]
 +
#48
| 4
|
* (1 4 7)
* (7 4 1)
* (1 1 1 1 1 3 1 1 2)
* (2 1 1 3 1 1 1 1 1)
|  image:octotropes/m1-m5.png[width=50] M1 M5

|M13-3-4-48
|image:88musaics/M13-3-4-48.png[M13-3-4-48]
 +
#48
| 4
|
* (1 5 6)
* (5 1 6)
* (2 1 1 1 1 3 1 1 1)
* (1 1 1 3 1 1 1 1 2)
|  image:octotropes/m1-m7.png[width=50] M1 M7

|M14-3-4-48
|image:88musaics/M14-3-4-48.png[M14-3-4-48]
 +
#48
| 4
|
* (2 4 6)
* (6 4 2)
* (2 1 1 1 1 2 2 1 1)
* (1 1 1 1 2 1 1 2 2)
|  image:octotropes/m1-m7.png[width=50] M1 M7

|M15-3-2-24
|image:88musaics/M15-3-2-24.png[M15-3-2-24]
 +
#24
| 2
|
* (3 3 6)
* (2 1 1 1 1 2 1 2 1)
|  image:octotropes/m1-m5-m7-m11.png[width=50] M1 M5 M7 M11

|M16-3-2-8*
|image:88musaics/M16-3-2-8.png[M16-3-2-8]
 +
#8
| 2
|
* (4 4 4)
* (1 2 1 1 2 1 1 2 1)
|  image:octotropes/m1-m5-m7-m11.png[width=50] M1 M5 M7 M11

|M17-4-4-48
|image:88musaics/M17-4-4-48.png[M17-4-4-48]
 +
#48
| 4
|
* (1 1 1 9)
* (3 2 5 2)
* (1 1 1 1 1 5 1 1)
* (1 1 1 2 2 1 2 2)
|  image:octotropes/m1-m11.png[width=50] M1 M11

|M18-4-8-96
|image:88musaics/M18-4-8-96.png[M18-4-8-96]
 +
#96
| 8
|
* (1 1 2 8)
* (5 3 2 2)
* (2 2 3 5)
* (8 2 1 1)
* (1 1 1 1 1 4 2 1)
* (1 2 2 2 1 1 1 2)
* (2 1 1 1 2 2 2 1)
* (1 2 4 1 1 1 1 1)
|  image:octotropes/m1.png[width=50] M1

|M19-4-4-48
|image:88musaics/M19-4-4-48.png[M19-4-4-48]
 +
#48
| 4
|
* (1 2 1 8)
* (3 2 3 4)
* (1 1 1 1 1 3 3 1)
* (1 2 1 1 2 1 2 2)
|  image:octotropes/m1-m11.png[width=50] M1 M11

|M20-4-8-96
|image:88musaics/M20-4-8-96.png[M20-4-8-96]
 +
#96
| 8
|
* (1 1 3 7)
* (1 4 5 2)
* (2 5 4 1)
* (7 3 1 1)
* (1 1 1 1 1 4 1 2)
* (1 1 1 2 3 1 1 2)
* (2 1 1 3 2 1 1 1)
* (2 1 4 1 1 1 1 1)
|  image:octotropes/m1.png[width=50] M1

|M21-4-4-48
|image:88musaics/M21-4-4-48.png[M21-4-4-48]
 +
#48
| 4
|
* (1 2 2 7)
* (7 2 2 1)
* (1 1 1 1 1 3 2 2)
* (2 2 3 1 1 1 1 1)
|  image:octotropes/m1-m5.png[width=50] M1 M5

|M22-4-2-24
|image:88musaics/M22-4-2-24.png[M22-4-2-24]
 +
#24
| 2
|
* (2 1 2 7)
* (1 1 1 1 1 2 3 2)
|  image:octotropes/m1-m5-m7-m11.png[width=50] M1 M5 M7 M11

|M23-4-4-48
|image:88musaics/M23-4-4-48.png[M23-4-4-48]
 +
#48
| 4
|
* (1 3 1 7)
* (1 4 3 4)
* (1 1 1 1 1 3 1 3)
* (1 2 1 1 3 1 1 2)
|  image:octotropes/m1-m11.png[width=50] M1 M11

|M24-4-8-96
|image:88musaics/M24-4-8-96.png[M24-4-8-96]
 +
#96
| 8
|
* (1 1 4 6)
* (5 1 4 2)
* (2 4 1 5)
* (6 4 1 1)
* (2 1 1 1 1 4 1 1)
* (1 1 1 3 1 1 2 2)
* (2 2 1 1 3 1 1 1)
* (1 1 4 1 1 1 1 2)
|  image:octotropes/m1.png[width=50] M1

|M25-4-4-48
|image:88musaics/M25-4-4-48.png[M25-4-4-48]
 +
#48
| 4
|
* (1 2 3 6)
* (3 2 1 6)
* (2 1 1 1 1 3 2 1)
* (1 2 3 1 1 1 1 2)
|  image:octotropes/m1-m7.png[width=50] M1 M7

|M26-4-8-96
|image:88musaics/M26-4-8-96.png[M26-4-8-96]
 +
#96
| 8
|
* (2 1 3 6)
* (3 3 4 2)
* (2 4 3 3)
* (6 3 1 2)
* (2 1 1 1 1 2 3 1)
* (1 2 1 2 1 1 2 2)
* (2 2 1 1 2 1 2 1)
* (1 3 2 1 1 1 1 2)
|  image:octotropes/m1.png[width=50] M1

|M27-4-8-96
|image:88musaics/M27-4-8-96.png[M27-4-8-96]
 +
#96
| 8
|
* (1 3 2 6)
* (5 1 2 4)
* (4 2 1 5)
* (6 2 3 1)
* (2 1 1 1 1 3 1 2)
* (1 1 1 3 2 1 1 2)
* (2 1 1 2 3 1 1 1)
* (2 1 3 1 1 1 1 2)
|  image:octotropes/m1.png[width=50] M1

|M28-4-2-24
|image:88musaics/M28-4-2-24.png[M28-4-2-24]
 +
#24
| 2
|
* (2 2 2 6)
* (2 1 1 1 1 2 2 2)
|  image:octotropes/m1-m5-m7-m11.png[width=50] M1 M5 M7 M11

|M29-4-2-24
|image:88musaics/M29-4-2-24.png[M29-4-2-24]
 +
#24
| 2
|
* (1 4 1 6)
* (1 1 1 1 3 1 1 3)
|  image:octotropes/m1-m5-m7-m11.png[width=50] M1 M5 M7 M11

|M30-4-2-24
|image:88musaics/M30-4-2-24.png[M30-4-2-24]
 +
#24
| 2
|
* (1 1 5 5)
* (2 1 1 1 4 1 1 1)
|  image:octotropes/m1-m5-m7-m11.png[width=50] M1 M5 M7 M11

|M31-4-4-48
|image:88musaics/M31-4-4-48.png[M31-4-4-48]
 +
#48
| 4
|
* (1 3 3 5)
* (5 3 3 1)
* (2 1 1 1 3 1 2 1)
* (1 2 1 3 1 1 1 2)
|  image:octotropes/m1-m7.png[width=50] M1 M7

|M32-4-2-24
|image:88musaics/M32-4-2-24.png[M32-4-2-24]
 +
#24
| 2
|
* (3 1 3 5)
* (2 1 1 1 2 1 3 1)
|  image:octotropes/m1-m5-m7-m11.png[width=50] M1 M5 M7 M11

|M33-4-2-12*
|image:88musaics/M33-4-2-12.png[M33-4-2-12]
 +
#12
| 2
|
* (1 5 1 5)
* (3 1 1 1 3 1 1 1)
|  image:octotropes/m1-m5-m7-m11.png[width=50] M1 M5 M7 M11

|M34-4-4-48
|image:88musaics/M34-4-4-48.png[M34-4-4-48]
 +
#48
| 4
|
* (1 3 4 4)
* (4 3 1 4)
* (1 2 1 1 3 1 2 1)
* (3 1 1 2 1 1 2 1)
|  image:octotropes/m1-m5.png[width=50] M1 M5

|M35-4-2-24
|image:88musaics/M35-4-2-24.png[M35-4-2-24]
 +
#24
| 2
|
* (2 2 4 4)
* (1 2 1 1 2 2 2 1)
|  image:octotropes/m1-m5-m7-m11.png[width=50] M1 M5 M7 M11

|M36-4-2-12*
|image:88musaics/M36-4-2-12.png[M36-4-2-12]
 +
#12
| 2
|
* (2 4 2 4)
* (2 2 1 1 2 2 1 1)
|  image:octotropes/m1-m5-m7-m11.png[width=50] M1 M5 M7 M11

|M37-4-2-6*
|image:88musaics/M37-4-2-6.png[M37-4-2-6]
 +
#6
| 2
|
* (3 3 3 3)
* (2 1 2 1 2 1 2 1)
|  image:octotropes/m1-m5-m7-m11.png[width=50] M1 M5 M7 M11

|M38-5-4-48
|image:88musaics/M38-5-4-48.png[M38-5-4-48]
 +
#48
| 4
|
* (1 1 1 1 8)
* (3 2 3 2 2)
* (1 1 1 1 1 6 1)
* (1 2 2 2 1 2 2)
|  image:octotropes/m1-m11.png[width=50] M1 M11

|M39-5-8-96
|image:88musaics/M39-5-8-96.png[M39-5-8-96]
 +
#96
| 8
|
* (1 1 1 2 7)
* (1 2 2 5 2)
* (2 5 2 2 1)
* (7 2 1 1 1)
* (1 1 1 1 1 5 2)
* (1 1 1 2 3 2 2)
* (2 2 3 2 1 1 1)
* (2 5 1 1 1 1 1)
|  image:octotropes/m1.png[width=50] M1

|M40-5-8-96
|image:88musaics/M40-5-8-96.png[M40-5-8-96]
 +
#96
| 8
|
* (1 1 2 1 7)
* (1 4 3 2 2)
* (2 2 3 4 1)
* (7 1 2 1 1)
* (1 1 1 1 1 4 3)
* (1 2 2 3 1 1 2)
* (2 1 1 3 2 2 1)
* (3 4 1 1 1 1 1)
|  image:octotropes/m1.png[width=50] M1

|M41-5-8-96
|image:88musaics/M41-5-8-96.png[M41-5-8-96]
 +
#96
| 8
|
* (1 1 1 3 6)
* (3 2 1 4 2)
* (2 4 1 2 3)
* (6 3 1 1 1)
* (2 1 1 1 1 5 1)
* (1 2 3 1 1 2 2)
* (2 2 1 1 3 2 1)
* (1 5 1 1 1 1 2)
|  image:octotropes/m1.png[width=50] M1

|M42-5-8-96
|image:88musaics/M42-5-8-96.png[M42-5-8-96]
 +
#96
| 8
|
* (1 1 2 2 6)
* (5 1 2 2 2)
* (2 2 2 1 5)
* (6 2 2 1 1)
* (2 1 1 1 1 4 2)
* (1 1 1 3 2 2 2)
* (2 2 2 3 1 1 1)
* (2 4 1 1 1 1 2)
|  image:octotropes/m1.png[width=50] M1

|M43-5-8-96
|image:88musaics/M43-5-8-96.png[M43-5-8-96]
 +
#96
| 8
|
* (1 2 1 2 6)
* (3 2 1 2 4)
* (4 2 1 2 3)
* (6 2 1 2 1)
* (2 1 1 1 1 3 3)
* (1 2 3 2 1 1 2)
* (2 1 1 2 3 2 1)
* (3 3 1 1 1 1 2)
|  image:octotropes/m1.png[width=50] M1

|M44-5-4-48
|image:88musaics/M44-5-4-48.png[M44-5-4-48]
 +
#48
| 4
|
* (2 1 1 2 6)
* (3 3 2 2 2)
* (2 1 1 1 1 2 4)
* (1 2 1 2 2 2 2)
|  image:octotropes/m1-m11.png[width=50] M1 M11

|M45-5-8-96
|image:88musaics/M45-5-8-96.png[M45-5-8-96]
 +
#96
| 8
|
* (1 1 3 1 6)
* (1 4 1 4 2)
* (2 4 1 4 1)
* (6 1 3 1 1)
* (1 1 1 1 4 1 3)
* (3 1 1 3 1 1 2)
* (2 1 1 3 1 1 3)
* (3 1 4 1 1 1 1)
|  image:octotropes/m1.png[width=50] M1

|M46-5-2-24
|image:88musaics/M46-5-2-24.png[M46-5-2-24]
 +
#24
| 2
|
* (1 2 2 1 6)
* (1 1 1 1 3 2 3)
|  image:octotropes/m1-m5-m7-m11.png[width=50] M1 M5 M7 M11

|M47-5-8-96
|image:88musaics/M47-5-8-96.png[M47-5-8-96]
 +
#96
| 8
|
* (1 1 1 4 5)
* (3 2 5 1 1)
* (1 1 5 2 3)
* (5 4 1 1 1)
* (2 1 1 1 5 1 1)
* (1 1 1 4 1 2 2)
* (2 2 1 4 1 1 1)
* (1 1 5 1 1 1 2)
|  image:octotropes/m1.png[width=50] M1

|M48-5-4-48
|image:88musaics/M48-5-4-48.png[M48-5-4-48]
 +
#48
| 4
|
* (1 1 2 3 5)
* (5 3 2 1 1)
* (2 1 1 1 4 2 1)
* (1 2 4 1 1 1 2)
|  image:octotropes/m1-m7.png[width=50] M1 M7

|M49-5-8-96
|image:88musaics/M49-5-8-96.png[M49-5-8-96]
 +
#96
| 8
|
* (1 2 1 3 5)
* (3 2 3 3 1)
* (1 3 3 2 3)
* (5 3 1 2 1)
* (2 1 1 1 3 3 1)
* (1 2 1 3 1 2 2)
* (2 2 1 3 1 2 1)
* (1 3 3 1 1 1 2)
|  image:octotropes/m1.png[width=50] M1

|M50-5-4-48
|image:88musaics/M50-5-4-48.png[M50-5-4-48]
 +
#48
| 4
|
* (2 1 1 3 5)
* (1 1 2 5 3)
* (2 1 1 1 2 4 1)
* (1 1 2 1 4 2 1)
|  image:octotropes/m1-m5.png[width=50] M1 M5

|M51-5-8-96
|image:88musaics/M51-5-8-96.png[M51-5-8-96]
 +
#96
| 8
|
* (1 3 1 2 5)
* (1 4 3 3 1)
* (1 3 3 4 1)
* (5 2 1 3 1)
* (2 1 1 1 3 1 3)
* (1 2 1 4 1 1 2)
* (2 1 1 4 1 2 1)
* (3 1 3 1 1 1 2)
|  image:octotropes/m1.png[width=50] M1

|M52-5-4-48
|image:88musaics/M52-5-4-48.png[M52-5-4-48]
 +
#48
| 4
|
* (1 1 4 1 5)
* (5 1 4 1 1)
* (3 1 1 1 4 1 1)
* (1 1 1 3 1 1 4)
|  image:octotropes/m1-m7.png[width=50] M1 M7

|M53-5-4-48
|image:88musaics/M53-5-4-48.png[M53-5-4-48]
 +
#48
| 4
|
* (1 2 3 1 5)
* (3 2 1 5 1)
* (3 1 1 1 3 2 1)
* (1 2 3 1 1 1 3)
|  image:octotropes/m1-m7.png[width=50] M1 M7

|M54-5-8-96
|image:88musaics/M54-5-8-96.png[M54-5-8-96]
 +
#96
| 8
|
* (1 1 2 4 4)
* (4 1 3 2 2)
* (2 2 3 1 4)
* (4 4 2 1 1)
* (1 2 1 1 4 2 1)
* (1 2 2 2 1 1 3)
* (3 1 1 2 2 2 1)
* (1 2 4 1 1 2 1)
|  image:octotropes/m1.png[width=50] M1

|M55-5-4-48
|image:88musaics/M55-5-4-48.png[M55-5-4-48]
 +
#48
| 4
|
* (1 2 1 4 4)
* (3 1 1 3 4)
* (1 2 1 1 3 3 1)
* (1 2 1 1 2 1 4)
|  image:octotropes/m1-m11.png[width=50] M1 M11

|M56-5-4-48
|image:88musaics/M56-5-4-48.png[M56-5-4-48]
 +
#48
| 4
|
* (1 3 1 3 4)
* (4 3 1 3 1)
* (1 2 1 1 3 1 3)
* (3 1 3 1 1 2 1)
|  image:octotropes/m1-m5.png[width=50] M1 M5

|M57-5-4-48
|image:88musaics/M57-5-4-48.png[M57-5-4-48]
 +
#48
| 4
|
* (2 2 1 3 4)
* (2 2 4 3 1)
* (1 2 1 1 2 2 3)
* (1 2 1 3 2 2 1)
|  image:octotropes/m1-m5.png[width=50] M1 M5

|M58-5-2-24
|image:88musaics/M58-5-2-24.png[M58-5-2-24]
 +
#24
| 2
|
* (1 1 4 2 4)
* (2 2 1 1 4 1 1)
|  image:octotropes/m1-m5-m7-m11.png[width=50] M1 M5 M7 M11

|M59-5-4-48
|image:88musaics/M59-5-4-48.png[M59-5-4-48]
 +
#48
| 4
|
* (2 1 3 2 4)
* (3 1 2 4 2)
* (2 2 1 1 2 3 1)
* (1 3 2 1 1 2 2)
|  image:octotropes/m1-m7.png[width=50] M1 M7

|M60-5-2-24
|image:88musaics/M60-5-2-24.png[M60-5-2-24]
 +
#24
| 2
|
* (2 2 2 2 4)
* (2 2 1 1 2 2 2)
|  image:octotropes/m1-m5-m7-m11.png[width=50] M1 M5 M7 M11

|M61-5-2-24
|image:88musaics/M61-5-2-24.png[M61-5-2-24]
 +
#24
| 2
|
* (1 3 3 1 4)
* (3 1 1 3 1 2 1)
|  image:octotropes/m1-m5-m7-m11.png[width=50] M1 M5 M7 M11

|M62-5-4-48
|image:88musaics/M62-5-4-48.png[M62-5-4-48]
 +
#48
| 4
|
* (1 2 3 3 3)
* (3 2 1 3 3)
* (2 1 2 1 3 2 1)
* (1 2 3 1 2 1 2)
|  image:octotropes/m1-m7.png[width=50] M1 M7

|M63-6-2-24
|image:88musaics/M63-6-2-24.png[M63-6-2-24]
 +
#24
| 2
|
* (1 1 1 1 1 7)
* (1 2 2 3 2 2)
|  image:octotropes/m1-m11-cm1-cm11.png[width=50] M1 M11 CM1 CM11

|M64-6-4-48
|image:88musaics/M64-6-4-48.png[M64-6-4-48]
 +
#48
| 4
|
* (1 1 1 1 2 6)
* (3 2 1 2 2 2)
* (2 2 2 1 2 3)
* (6 2 1 1 1 1)
|  image:octotropes/m1-cm11.png[width=50] M1 CM11

|M65-6-8-96
|image:88musaics/M65-6-8-96.png[M65-6-8-96]
 +
#96
| 8
|
* (1 1 1 2 1 6)
* (1 2 2 1 4 2)
* (2 4 1 2 2 1)
* (6 1 2 1 1 1)
* (1 1 1 1 5 3)
* (3 2 3 1 1 2)
* (2 1 1 3 2 3)
* (3 5 1 1 1 1)
|  image:octotropes/m1.png[width=50] M1

|M66-6-4-48
|image:88musaics/M66-6-4-48.png[M66-6-4-48]
 +
#48
| 4
|
* (1 1 2 1 1 6)
* (1 4 1 2 2 2)
* (1 1 1 1 4 4)
* (3 1 1 3 2 2)
|  image:octotropes/m1-m11.png[width=50] M1 M11

|M67-6-2-24
|image:88musaics/M67-6-2-24.png[M67-6-2-24]
 +
#24
| 2
|
* (1 1 1 2 2 5)
* (1 1 5 2 2 1)
|  image:octotropes/m1-m5-cm7-cm11.png[width=50] M1 M5 CM7 CM11

|M68-6-4-48
|image:88musaics/M68-6-4-48.png[M68-6-4-48]
 +
#48
| 4
|
* (1 1 2 1 2 5)
* (1 4 3 2 1 1)
* (1 1 2 3 4 1)
* (5 2 1 2 1 1)
|  image:octotropes/m1-cm5.png[width=50] M1 CM5

|M69-6-8-96
|image:88musaics/M69-6-8-96.png[M69-6-8-96]
 +
#96
| 8
|
* (1 2 1 1 2 5)
* (1 2 2 3 3 1)
* (1 3 3 2 2 1)
* (5 2 1 1 2 1)
* (2 1 1 1 3 4)
* (1 2 1 4 2 2)
* (2 2 4 1 2 1)
* (4 3 1 1 1 2)
|  image:octotropes/m1.png[width=50] M1

|M70-6-1-12
|image:88musaics/M70-6-1-12.png[M70-6-1-12]
 +
#12
| 1
|
* (2 1 1 1 2 5)
|  image:octotropes/m1-m5-m7-m11-cm1-cm5-cm7-cm11.png[width=50] M1 M5 M7 M11 CM1 CM5 CM7 CM11

|M71-6-4-48
|image:88musaics/M71-6-4-48.png[M71-6-4-48]
 +
#48
| 4
|
* (1 1 1 3 1 5)
* (3 2 1 4 1 1)
* (1 1 4 1 2 3)
* (5 1 3 1 1 1)
|  image:octotropes/m1-cm11.png[width=50] M1 CM11

|M72-6-4-48
|image:88musaics/M72-6-4-48.png[M72-6-4-48]
 +
#48
| 4
|
* (1 1 2 2 1 5)
* (5 1 2 2 1 1)
* (3 1 1 1 4 2)
* (1 1 1 3 2 4)
|  image:octotropes/m1-m7.png[width=50] M1 M7

|M73-6-4-48
|image:88musaics/M73-6-4-48.png[M73-6-4-48]
 +
#48
| 4
|
* (1 2 1 2 1 5)
* (3 2 1 2 3 1)
* (3 1 1 1 3 3)
* (1 2 3 2 1 3)
|  image:octotropes/m1-m11.png[width=50] M1 M11

|M74-6-2-24
|image:88musaics/M74-6-2-24.png[M74-6-2-24]
 +
#24
| 2
|
* (1 1 3 1 1 5)
* (1 4 1 4 1 1)
|  image:octotropes/m1-m11-cm5-cm7.png[width=50] M1 M11 CM5 CM7

|M75-6-4-48
|image:88musaics/M75-6-4-48.png[M75-6-4-48]
 +
#48
| 4
|
* (1 1 2 1 3 4)
* (1 3 1 3 2 2)
* (2 2 3 1 3 1)
* (4 3 1 2 1 1)
|  image:octotropes/m1-cm11.png[width=50] M1 CM11

|M76-6-2-24
|image:88musaics/M76-6-2-24.png[M76-6-2-24]
 +
#24
| 2
|
* (1 2 1 1 3 4)
* (4 3 1 1 2 1)
|  image:octotropes/m1-m5-cm1-cm5.png[width=50] M1 M5 CM1 CM5

|M77-6-2-24
|image:88musaics/M77-6-2-24.png[M77-6-2-24]
 +
#24
| 2
|
* (1 1 2 2 2 4)
* (2 2 2 1 1 4)
|  image:octotropes/m1-m5-cm7-cm11.png[width=50] M1 M5 CM7 CM11

|M78-6-4-48
|image:88musaics/M78-6-4-48.png[M78-6-4-48]
 +
#48
| 4
|
* (2 1 1 2 2 4)
* (3 1 2 2 2 2)
* (2 2 2 2 1 3)
* (4 2 2 1 1 2)
|  image:octotropes/m1-cm11.png[width=50] M1 CM11

|M79-6-4-48
|image:88musaics/M79-6-4-48.png[M79-6-4-48]
 +
#48
| 4
|
* (1 1 3 1 2 4)
* (1 3 1 1 4 2)
* (2 1 1 4 1 3)
* (3 1 4 1 1 2)
|  image:octotropes/m1-m7.png[width=50] M1 M7

|M80-6-2-24
|image:88musaics/M80-6-2-24.png[M80-6-2-24]
 +
#24
| 2
|
* (2 1 2 1 2 4)
* (2 1 1 2 3 3)
|  image:octotropes/m1-m5-m7-m11.png[width=50] M1 M5 M7 M11

|M81-6-2-24
|image:88musaics/M81-6-2-24.png[M81-6-2-24]
 +
#24
| 2
|
* (1 3 1 1 2 4)
* (4 2 1 1 3 1)
|  image:octotropes/m1-m5-cm7-cm11.png[width=50] M1 M5 CM7 CM11

|M82-6-4-48
|image:88musaics/M82-6-4-48.png[M82-6-4-48]
 +
#48
| 4
|
* (1 2 1 3 1 4)
* (3 1 1 3 3 1)
* (1 3 3 1 1 3)
* (4 1 3 1 2 1)
|  image:octotropes/m1-cm5.png[width=50] M1 CM5

|M83-6-1-6*
|image:88musaics/M83-6-1-6.png[M83-6-1-6]
 +
#6
| 1
|
* (1 1 4 1 1 4)
|  image:octotropes/m1-m5-m7-m11-cm1-cm5-cm7-cm11.png[width=50] M1 M5 M7 M11 CM1 CM5 CM7 CM11

|M84-6-2-24
|image:88musaics/M84-6-2-24.png[M84-6-2-24]
 +
#24
| 2
|
* (1 2 1 2 3 3)
* (3 2 1 2 1 3)
|  image:octotropes/m1-m7-cm5-cm11.png[width=50] M1 M7 CM5 CM11

|M85-6-2-24
|image:88musaics/M85-6-2-24.png[M85-6-2-24]
 +
#24
| 2
|
* (1 2 2 1 3 3)
* (1 2 1 3 2 3)
|  image:octotropes/m1-m5-m7-m11.png[width=50] M1 M5 M7 M11

|M86-6-2-12*
|image:88musaics/M86-6-2-12.png[M86-6-2-12]
 +
#12
| 2
|
* (1 2 3 1 2 3)
* (3 2 1 3 2 1)
|  image:octotropes/m1-m7-cm5-cm11.png[width=50] M1 M7 CM5 CM11

|M87-6-1-4*
|image:88musaics/M87-6-1-4.png[M87-6-1-4]
 +
#4
| 1
|
* (1 3 1 3 1 3)
|  image:octotropes/m1-m5-m7-m11-cm1-cm5-cm7-cm11.png[width=50] M1 M5 M7 M11 CM1 CM5 CM7 CM11

|M88-6-1-2*
|image:88musaics/M88-6-1-2.png[M88-6-1-2]
 +
#2
| 1
|
* (2 2 2 2 2 2)
|  image:octotropes/m1-m5-m7-m11-cm1-cm5-cm7-cm11.png[width=50] M1 M5 M7 M11 CM1 CM5 CM7 CM11


|
| _4096 PCS_
| _352 motifs_
| _352 ISC_s
| _13 distinct_ +
_meta-stabilizers_

|===

[#list-pcs-same-as-major-scale]
=== Some PCS lists

==== Having generic intervals as the Major Scale

Major scale having only 1 and 2 semitones has interval between two pitch classes neighboring.

Here are the set of scales that share this characteristic :

----
'PCS (cyclic orbit representants) having same generic intervals that Major Scale (29) for 24 musaics'
'(1,1,1,1,1,1,1,1,1,1,2 ) pcs : [0 1 2 3 4 5 6 7 8 9 10] in Mus n° 2 : Chromatic Undecamode'
'(1,1,1,1,1,2,1,1,1,2   ) pcs : [0 1 2 3 4 5 7 8 9 10] in Mus n° 3 : Rāga Khat'
'(1,1,1,1,1,1,1,1,2,2   ) pcs : [0 1 2 3 4 5 6 7 8 10] in Mus n° 4 : Mixodyllian'
'(1,1,1,1,1,1,1,2,1,2   ) pcs : [0 1 2 3 4 5 6 7 9 10] in Mus n° 5 : Aerygyllian'
'(1,1,1,1,1,1,2,1,1,2   ) pcs : [0 1 2 3 4 5 6 8 9 10] in Mus n° 6 : Rocryllian'
'(1,1,1,1,2,1,1,1,1,2   ) pcs : [0 1 2 3 4 6 7 8 9 10] in Mus n° 7 : Messiaen Mode 7 Rotation 4'
'(1,1,1,2,1,1,1,2,2     ) pcs : [0 1 2 3 5 6 7 8 10] in Mus n° 8 : Locrian/Aeolian Mixed'
'(1,1,1,1,1,2,1,2,2     ) pcs : [0 1 2 3 4 5 7 8 10] in Mus n° 9 : Rāga Abheri Todi'
'(1,2,1,1,1,1,1,2,2     ) pcs : [0 1 3 4 5 6 7 8 10] in Mus n° 9 : Styptygic'
'(1,1,1,2,1,1,2,1,2     ) pcs : [0 1 2 3 5 6 7 9 10] in Mus n° 10 : Lyrygic'
'(1,1,2,1,1,1,2,1,2     ) pcs : [0 1 2 4 5 6 7 9 10] in Mus n° 10 : Youlan'
'(1,1,1,1,1,1,2,2,2     ) pcs : [0 1 2 3 4 5 6 8 10] in Mus n° 11 : Tharygic'
'(1,1,1,1,2,1,1,2,2     ) pcs : [0 1 2 3 4 6 7 8 10] in Mus n° 14 : Padygic'
'(1,1,2,1,1,1,1,2,2     ) pcs : [0 1 2 4 5 6 7 8 10] in Mus n° 14 : Aeolyrygic'
'(1,1,1,1,2,1,2,1,2     ) pcs : [0 1 2 3 4 6 7 9 10] in Mus n° 15 : Pylygic'
'(1,1,2,1,1,2,1,1,2     ) pcs : [0 1 2 4 5 6 8 9 10] in Mus n° 16 : Triple Chromatic I'
'(1,1,1,2,2,1,2,2       ) pcs : [0 1 2 3 5 7 8 10] in Mus n° 17 : Rāga Asavari'
'(1,1,1,2,1,2,2,2       ) pcs : [0 1 2 3 5 6 8 10] in Mus n° 18 : Aeradyllic'
'(1,2,1,1,1,2,2,2       ) pcs : [0 1 3 4 5 6 8 10] in Mus n° 18 : Esplá\'s Scale'
'(1,2,1,1,2,1,2,2       ) pcs : [0 1 3 4 5 7 8 10] in Mus n° 19 : Spanish Phrygian'
'(1,1,2,1,2,1,2,2       ) pcs : [0 1 2 4 5 7 8 10] in Mus n° 26 : Rāga Hijaj Bhairav'
'(1,2,1,2,1,1,2,2       ) pcs : [0 1 3 4 6 7 8 10] in Mus n° 26 : Altered Dominant B'
'(1,1,1,1,2,2,2,2       ) pcs : [0 1 2 3 4 6 8 10] in Mus n° 28 : Bothyllic'
'(1,1,2,1,1,2,2,2       ) pcs : [0 1 2 4 5 6 8 10] in Mus n° 35 : Syryllic'
'(1,1,2,2,1,1,2,2       ) pcs : [0 1 2 4 6 7 8 10] in Mus n° 36 : Messiaen Mode 6 Rotation 2'
'(1,2,1,2,1,2,1,2       ) pcs : [0 1 3 4 6 7 9 10] in Mus n° 37 : Octatonic'
'(1,2,2,1,2,2,2         ) pcs : [0 1 3 5 6 8 10] in Mus n° 38 : Locrian mode' (Major scale)
'(1,2,1,2,2,2,2         ) pcs : [0 1 3 4 6 8 10] in Mus n° 44 : Superlocrian'
'(1,1,2,2,2,2,2         ) pcs : [0 1 2 4 6 8 10] in Mus n° 60 : Leading Whole-Tone Inverse'

'PCS having same intervals that Major Scale and cardinal in [5..8] (13) for 11 musaics'
'(1,1,1,2,2,1,2,2       ) in Mus n° 17 name : Rāga Asavari'
'(1,1,1,2,1,2,2,2       ) in Mus n° 18 name : Aeradyllic'
'(1,2,1,1,1,2,2,2       ) in Mus n° 18 name : Esplá Scale'
'(1,2,1,1,2,1,2,2       ) in Mus n° 19 name : Spanish Phrygian'
'(1,1,2,1,2,1,2,2       ) in Mus n° 26 name : Rāga Hijaj Bhairav'
'(1,2,1,2,1,1,2,2       ) in Mus n° 26 name : Altered Dominant B'
'(1,1,1,1,2,2,2,2       ) in Mus n° 28 name : Bothyllic'
'(1,1,2,1,1,2,2,2       ) in Mus n° 35 name : Syryllic'
'(1,1,2,2,1,1,2,2       ) in Mus n° 36 name : Messiaen Mode 6 Rotation 2'
'(1,2,1,2,1,2,1,2       ) in Mus n° 37 name : Octatonic'
'(1,2,2,1,2,2,2         ) in Mus n° 38 name : Locrian mode'
'(1,2,1,2,2,2,2         ) in Mus n° 44 name : Superlocrian'
'(1,1,2,2,2,2,2         ) in Mus n° 60 name : Leading Whole-Tone Inverse'
----

==== Having Maximal Evenness

----
PCS (cyclic orbit representants) in Maximal Evenness as Diatonic Major scale
' cyclic orbit in Maximal Evenness : ', 11
'(1,1,1,1,1,1,1,1,1,1,1,1) pcs : [0 1 2 3 4 5 6 7 8 9 10 11]  in Mus n° 1 : Chromatic'
'(1,1,1,1,1,1,1,1,1,1,2  ) pcs : [0 1 2 3 4 5 6 7 8 9 10]     in Mus n° 2 : Chromatic Undecamode'
'(6,6                    ) pcs : [0 6]                        in Mus n° 7 : Tritone'
'(1,1,1,1,2,1,1,1,1,2    ) pcs : [0 1 2 3 4 6 7 8 9 10]       in Mus n° 7 : Messiaen Mode 7 Rotation 4'
'(4,4,4                  ) pcs : [0 4 8]                      in Mus n° 16 : Augmented Triad'
'(1,1,2,1,1,2,1,1,2      ) pcs : [0 1 2 4 5 6 8 9 10]         in Mus n° 16 : Triple Chromatic I'
'(3,3,3,3                ) pcs : [0 3 6 9]                    in Mus n° 37 : Diminished Seventh'
'(1,2,1,2,1,2,1,2        ) pcs : [0 1 3 4 6 7 9 10]           in Mus n° 37 : Octatonic'
'(2,2,3,2,3              ) pcs : [0 2 4 7 9]                  in Mus n° 38 : Major Pentatonic'
'(1,2,2,1,2,2,2          ) pcs : [0 1 3 5 6 8 10]             in Mus n° 38 : Locrian mode'
'(2,2,2,2,2,2            ) pcs : [0 2 4 6 8 10]               in Mus n° 88 : whole tone scale'
----

==== Having "Strict" Second Order Maximal Evenness

We mean by _"Strict" Second Order Maximal Evenness_, where d-distance is consecutive and their number is between 1 and 3.

----

' PCS (cyclic orbit representants) in Second Order Maximal Evenness : ', 25
'(3,4,5                 ) pcs : [0 3 7]              in Mus n° 10 : Minor Triad'
'(4,3,5                 ) pcs : [0 4 7]              in Mus n° 10 : Major Triad'
'(1,1,1,1,2,1,1,1,3     ) pcs : [0 1 2 3 4 6 7 8 9]  in Mus n° 13 : Aeolygic'
'(1,1,1,2,1,1,1,1,3     ) pcs : [0 1 2 3 5 6 7 8 9]  in Mus n° 13 : Ionycrygic'
'(1,1,1,2,2,1,1,3       ) pcs : [0 1 2 3 5 7 8 9]    in Mus n° 24 : Aerygyllic'
'(1,1,2,2,1,1,1,3       ) pcs : [0 1 2 4 6 7 8 9]    in Mus n° 24 : Epygyllic'
'(2,3,3,4               ) pcs : [0 2 5 8]            in Mus n° 26 : Rāga Haripriya'
'(3,3,2,4               ) pcs : [0 3 6 8]            in Mus n° 26 : Lonic'
'(1,1,2,1,1,2,1,3       ) pcs : [0 1 2 4 5 6 8 9]    in Mus n° 34 : Sathyllic'
'(1,2,1,1,2,1,1,3       ) pcs : [0 1 3 4 5 7 8 9]    in Mus n° 34 : Ionogyllic'
'(1,3,2,3,3             ) pcs : [0 1 4 6 9]          in Mus n° 49 : Pentatonic Major ♭2♭5'
'(2,3,1,3,3             ) pcs : [0 2 5 6 9]          in Mus n° 49 : Phralitonic'
'(1,1,2,2,2,1,3         ) pcs : [0 1 2 4 6 8 9]      in Mus n° 54 : Alt 𝄫37'
'(1,2,2,2,1,1,3         ) pcs : [0 1 3 5 7 8 9]      in Mus n° 54 : Rāga Malini'
'(1,1,3,1,2,1,3         ) pcs : [0 1 2 5 6 8 9]      in Mus n° 61 : Hungarian Romani Minor Mode IV'
'(1,2,1,2,1,2,3         ) pcs : [0 1 3 4 6 7 9]      in Mus n° 62 : Alternating Heptamode'
'(2,1,2,1,2,1,3         ) pcs : [0 2 3 5 6 8 9]      in Mus n° 62 : Locrian ♮2𝄫7'
'(2,1,2,2,2,3           ) pcs : [0 2 3 5 7 9]        in Mus n° 64 : Rāga Gauri Velavali'
'(2,2,2,1,2,3           ) pcs : [0 2 4 6 7 9]        in Mus n° 64 : Rāga Airavati'
'(2,1,3,1,2,3           ) pcs : [0 2 3 6 7 9]        in Mus n° 73 : Rāga Shivawanti'
'(1,3,2,1,2,3           ) pcs : [0 1 4 6 7 9]        in Mus n° 73 : Rāga Malavi'
'(1,3,1,2,2,3           ) pcs : [0 1 4 5 7 9]        in Mus n° 75 : Rāga Rāgamalini'
'(2,2,1,3,1,3           ) pcs : [0 2 4 5 8 9]        in Mus n° 75 : Aeranimic'
'(1,2,2,2,2,3           ) pcs : [0 1 3 5 7 9]        in Mus n° 78 : Stogimic'
'(2,2,2,2,1,3           ) pcs : [0 2 4 6 8 9]        in Mus n° 78 : Inuit Hexatonic'

----

