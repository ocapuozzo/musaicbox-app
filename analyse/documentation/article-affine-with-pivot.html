<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.23">
<meta name="author" content="&lt;olivier.capuozzo@gmail.com&gt;">
<title>Extended affine operation in musical set theory</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child{border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active,#footnotes .footnote a:first-of-type:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
/*! Asciidoctor Tabs | Copyright (c) 2018-present Dan Allen | MIT License */
.tabs {
    margin-bottom: 1.25em;
}

.tablist > ul {
    display: flex;
    flex-wrap: wrap;
    list-style: none;
    margin: 0;
    padding: 0;
}

.tablist > ul li {
    align-items: center;
    background-color: #fff;
    cursor: pointer;
    display: flex;
    font-weight: bold;
    line-height: 1.5;
    padding: 0.25em 1em;
    position: relative;
}

.tablist > ul li:focus-visible {
    outline: none;
}

.tablist.ulist,
.tablist.ulist > ul li {
    margin: 0;
}

.tablist.ulist > ul li + li {
    margin-left: 0.25em;
}

.tabs .tablist li::after {
    content: "";
    display: block;
    height: 1px;
    position: absolute;
    bottom: -1px;
    left: 0;
    right: 0;
}

.tabs.is-loading .tablist li:not(:first-child),
.tabs:not(.is-loading) .tablist li:not(.is-selected) {
    background-color: #f5f5f5;
}

.tabs.is-loading .tablist li:first-child::after,
.tabs:not(.is-loading) .tablist li.is-selected::after {
    background-color: #fff;
}

/*
.tabs:not(.is-loading) .tablist li,
.tabs:not(.is-loading) .tablist li::after {
  transition: background-color 200ms ease-in-out;
}
*/

.tablist > ul p {
    line-height: inherit;
    margin: 0;
}

.tabpanel {
    background-color: #fff;
    padding: 1.25em;
}

.tablist > ul li,
.tabpanel {
    border: 1px solid #dcdcdc;
}

.tablist > ul li {
    border-bottom: 0;
}

.tabs.is-loading .tabpanel + .tabpanel,
.tabs:not(.is-loading) .tabpanel.is-hidden {
    display: none;
}

.tabpanel > :first-child {
    margin-top: 0;
}

/* #content is a signature of the Asciidoctor standalone HTML output */
#content .tabpanel > :last-child,
#content .tabpanel > :last-child > :last-child,
#content .tabpanel > :last-child > :last-child > li:last-child > :last-child {
    margin-bottom: 0;
}

.tablecontainer {
    overflow-x: auto;
}

#content .tablecontainer {
    margin-bottom: 1.25em;
}

#content .tablecontainer > table.tableblock {
    margin-bottom: 0;
}
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Extended affine operation in musical set theory</h1>
<div class="details">
<span id="author" class="author">&lt;olivier.capuozzo@gmail.com&gt;</span><br>
<span id="revnumber">version ,</span>
<span id="revdate">2025-07-12</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_abstract">1. Abstract</a></li>
<li><a href="#_usual_operations">2. Usual operations</a>
<ul class="sectlevel2">
<li><a href="#_modulo_operation">2.1. Modulo operation</a></li>
<li><a href="#_basic_operations">2.2. Basic operations</a></li>
</ul>
</li>
<li><a href="#_affine_operation">3. Affine operation</a>
<ul class="sectlevel2">
<li><a href="#_special_affine_operation">3.1. Special Affine Operation</a></li>
<li><a href="#_special_affine_operation_with_complement">3.2. Special Affine Operation with complement</a></li>
</ul>
</li>
<li><a href="#_affine_with_pivot">4. Revisited basic operations</a>
<ul class="sectlevel2">
<li><a href="#_whats_wrong_with_basic_operations">4.1. What&#8217;s wrong with basic operations</a></li>
<li><a href="#_the_fixed_zero_problem">4.2. The "fixed zero problem"</a></li>
<li><a href="#understand-fixed-point-algorithm">4.3. Idea of solution</a></li>
<li><a href="#design-affine-pivot">4.4. Affine operation with pivot</a></li>
<li><a href="#_affinepivot_reduced">4.5. AffinePivot reduced</a></li>
<li><a href="#_default_pivot_value">4.6. Default pivot value</a></li>
<li><a href="#_simplified_notation_of_the_affine_expression">4.7. Simplified notation of the affine expression</a></li>
<li><a href="#_free_axis_of_symmetry">4.8. Free axis of symmetry</a></li>
<li><a href="#_more_than_one_bowstring_to_his_axis">4.9. More than one bowstring to his axis.</a></li>
<li><a href="#_free_axis_into_affine_pivot">4.10. Free axis into affine pivot</a>
<ul class="sectlevel3">
<li><a href="#_summary">4.10.1. Summary</a></li>
</ul>
</li>
<li><a href="#_examples_of_transformations_with_affinepivot">4.11. Examples of transformations with affinePivot</a></li>
<li><a href="#_affinepivot_typescript_implementation">4.12. AffinePivot typescript implementation</a></li>
</ul>
</li>
<li><a href="#_conclusion">5. Conclusion</a></li>
<li><a href="#_references">References</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_abstract">1. Abstract</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This article addresses a topic related to musical set theory, and particularly to basic operations: inversion, transformation by cycles of fifths and fourths (M7 and M5).</p>
</div>
<div class="paragraph">
<p>It demonstrates the need to be able to choose the axis of symmetry around which the transformations are applied, in order to overcome the negative influence of the pitch-class zero in these operations.</p>
</div>
<div class="paragraph">
<p>The solution proposed here takes David Lewin&#8217;s idea for inversion (I<sup>uv</sup>) and generalizes it to the other M5 and M7 transformations.</p>
</div>
<div class="paragraph">
<p>Finally, the extended affine function has a new parameter, but remains fully compatible with current usage, through a logic that automatically assigns a default pivot value, similar to the "moveable-DO" system.</p>
</div>
<div class="paragraph">
<p>The code for the affine function with pivot is provided (TypeScript).</p>
</div>
<div class="paragraph">
<p>Keywords: musical set theory, pcs, basic operators, fixed zero problem, label, label free, M11, M5, M7, Affine mapping from Z<sub>n</sub> to Z<sub>n</sub></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_usual_operations">2. Usual operations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In context of twelve-tone equal temperament, more specialy in pitch-class space, we note \$ZZ_12\$ the set \$ZZ"/"12ZZ\$</p>
</div>
<div class="paragraph">
<p>\$ ZZ_12 = {bar0, bar1, bar2, bar3, bar4, bar5, bar6, bar7, bar8, bar9, bar10, bar11}\$</p>
</div>
<div class="paragraph">
<p>Each element \$i\$ of \$ZZ_12\$ is representative of a class of numbers multiple of 12. For example, \$i = bar1\$ is representative of positive numbers {1, 13, 25, 37, &#8230;&#8203;} (\$i + 12q\$) and negative numbers {1, -11, -23, -35, &#8230;&#8203;} (\$i - 12q\$)</p>
</div>
<div class="sect2">
<h3 id="_modulo_operation">2.1. Modulo operation</h3>
<div class="paragraph">
<p>By convention, \$ZZ_n\$ is represented by the set of first positive numbers (starting with zero) and often the bare notation above is omitted.</p>
</div>
<div class="paragraph">
<p>Modulo is an operation that reduces any number in \$ZZ\$ to its representative number.</p>
</div>
<div class="paragraph">
<p>The 12-hour clock is a good example. 13h is mapped to 1h, midnight  -1h to 11H.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./assets/images/circle-modulo.png" alt="circle modulo">
</div>
<div class="title">Figure 1. Illustration modulo 12:&#160; -11 = 1  (and&#160; +11 = -1)</div>
</div>
<div class="listingblock nowrap">
<div class="title">A partial view on \$ZZ_12\$, where equivalence classes numbers are structured in columns</div>
<div class="content">
<pre>...
 24   25   26  27  28 ...                         &lt;- i - 12 * 2
 12   13   14  15  16  17  18  19  20  21  22  23 &lt;- i - 12 * 1
  0    1    2   3   4   5   6   7   8   9  10  11 &lt;= 12 pitch-class representative
-12  -11  -10  -9  -8  -7  -6  -5  -4  -3  -2  -1 &lt;- i + 12 * 1
              ... -20 -19 -18 -17 -16 -15 -14 -13 &lt;- i + 12 * 2
 ...</pre>
</div>
</div>
<div class="paragraph">
<p>The logic of modulo numbers from \$ZZ\$ to \$ZZ_(n)\$ representative numbers is: \$i |-&gt;  i - n xx floor(i/n)\$, with \$n&gt;0\$, consistent <a href="#Knuth">[Knuth]</a> version <a href="#modulo">[modulo]</a>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
\$floor(x)\$: This symbol denotes floored of \$x\$, the largest integer less than or equal to \$x\$.<br>
Ex : \$floor(0.99) |-&gt; 0\$ and \$floor(1.01) |-&gt; 1\$ (the integer part)
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In our case, \$floor(i/n)\$ gives the line number above and below the reference pitch-class representative line below.</p>
</div>
<div class="paragraph">
<p>Some illustrative cases:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>25 modulo 12 = <strong>1</strong><br>
\$25 - n xx lfloor 25/n rfloor\$ = 25 - 12 × Math.floor(25/12) = 25 - (12 × 2) = <strong>1</strong></p>
</li>
<li>
<p>13 modulo 12 = <strong>1</strong>  &#160;(13 - 12*1)</p>
</li>
<li>
<p>-11 modulo 12 = <strong>1</strong> &#160;(-11 + 12*1)</p>
</li>
<li>
<p>-13 modulo 12 = <strong>11</strong> &#160;(-13 + 12*2)<br>
\$-13 - n xx lfloor (-13)/n rfloor\$ = -13 - 12 × Math.floor(-13/12) = -13 + (-12 × -2) = -13 + 24 = <strong>11</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Illustration labeling of tones in Z and with the pitch-class numbers by <a href="#Fripertinger">[Fripertinger]</a></div>
<p><span class="image"><img src="./assets/images/score-modulo.png" alt="score modulo"></span></p>
</div>
</div>
<div class="sect2">
<h3 id="_basic_operations">2.2. Basic operations</h3>
<div class="paragraph">
<p>In musical set theory, into context of twelve-tone equal temperament (n=12), the basic operations are generally represented by ( <a href="#Rahn">[Rahn]</a> <a href="#Fripertinger">[Fripertinger]</a> <a href="#Moreno-Argon">[Moreno-Argon]</a>, among others):</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Transposition</strong> : \$T_k : ZZ xx ZZ_12 → ZZ_12 , x |-&gt; T_k(x) := x + k\$</p>
</li>
<li>
<p><strong>Inversion</strong> : \$I : ZZ_12 → ZZ_12 , x |-&gt; I(x) := -x\$</p>
</li>
<li>
<p><strong>Cycle transformation</strong>:</p>
<div class="ulist">
<ul>
<li>
<p>Cycle fourth transformation : \$M_5 : ZZ_12 → ZZ_12 , x |-&gt;  M_5(x) := 5x\$</p>
</li>
<li>
<p>Cycle fifths transformation : \$M_7 : ZZ_12 → ZZ_12 , x |-&gt;  M_7(x) := 7x\$</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>If we look carefully, we have a multiplication (inversion as \$-1x\$, \$M_5\$ and \$M_7\$) and one addition (transposition).</p>
</div>
<div class="paragraph">
<p>We can combine these operations in the form of an affine operation, <em>ax + b</em>, of <em>Z<sub>n</sub></em> into <em>Z<sub>n</sub></em></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_affine_operation">3. Affine operation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The well-known affine function (ax + b) will allow us to unify the primitive  multiplication  and transposition operations into one single operation (with the aim of creating a group, not covered by this document).</p>
</div>
<div class="sect2">
<h3 id="_special_affine_operation">3.1. Special Affine Operation</h3>
<div class="paragraph">
<p>Multiplication and Transposition may be grouped into one special affine operation that operates on \$P(ZZ_n)\$.</p>
</div>
<div class="paragraph">
<p>When a group G acts on a set E then G acts in a natural way on P(E) := {A | A ⊆ E}, which is the set of all subsets of E.</p>
</div>
<div class="paragraph">
<p>Thus, when \$ZZ_12\$ is seen as the set of 12 pitch-classes, \$P(ZZ_12)\$ represents the set of possible scales restricted to an octave.</p>
</div>
<div class="paragraph">
<p>Traditional operation name is represented by \$T_kMa\$ (a right action, first <em>Ma</em> for multiplication by <em>a</em> then <em>T</em><sub>k</sub> for transposition by a step of <em>k</em> semitones), see <a href="#Rahn">[Rahn]</a>.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="openblock text-center">
<div class="content">
<div class="paragraph">
<p><strong>Special Affine Operation</strong></p>
</div>
<div class="paragraph">
<p>\$ T_kMa :  P(ZZ_n) xx ZZ xx NN  -&gt; P(ZZ_n)\$</p>
</div>
<div class="paragraph">
<p>\$T_kMa(A) := {\ (ax + k) mod n \ },  forall  x in A\$</p>
</div>
<div class="paragraph">
<p><em>Where <strong>a</strong> is coprime with n and <strong>k</strong> a step of transposition</em></p>
</div>
<div class="paragraph">
<p>The coprime constraint under <em>a</em> is important because it ensures that the operation gives a unique image to each elements of \$A sube ZZ_n\$, another way of saying \$A in P(ZZ_n)\$</p>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Examples when \$n = 12\$.&#160;&#160;\$ZZ_12 = {0, 1, ..., 11}\$, the coprimes with \$n\$ are {1, 5, 7, 11}</p>
</div>
<div class="ulist">
<ul>
<li>
<p>\$T_0M1("[0 4 7]") -&gt; "[0 4 7]"\$ &#160; (neutral op)</p>
</li>
<li>
<p>\$T_5M1("[0 4 7]") -&gt; "[5 9 12]"\$ so  \$"[0 5 9]"\$ Transposition of 5 semitones (T5)</p>
</li>
<li>
<p>\$T_0M11("[0 4 7]") -&gt;"[0 5 8]"\$ &#160; Inversion, (C Maj &#8594; Fm/5th)</p>
</li>
<li>
<p>\$T_5M5("[0 4 7]") -&gt; "[1 4 5]"\$ &#160; Cycle fourths transformation followed by five semitone step transposition.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
\$T_kMa\$ is also known as <em>TTO</em> operators (for <em>Twelve Tone Operators</em>) and it&#8217;s defined affine group (<a href="#Morris">[Morris]</a>, <a href="#TOPOS">[TOPOS]</a>).<br>
<br>
For an in-depth study, with of a high level of mathematical conciseness, see <a href="#Fripertinger">[Fripertinger]</a>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><code>Ma</code> is its own inverse, and each of coprime can be deduced from another two.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. products of coprime numbers with 12 (M1 = ID, identity ~ neutral operation)</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top">Matrix A</th>
<th class="tableblock halign-left valign-top">ID</th>
<th class="tableblock halign-left valign-top">M5</th>
<th class="tableblock halign-left valign-top">M7</th>
<th class="tableblock halign-left valign-top">M11</th>
</tr>
</thead>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">ID</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">M5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">M7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">M11</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">M5</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">M5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">M11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">M7</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">M7</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">M7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">M11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">M5</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">M11</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">M11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">M7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">M5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The composition of <code>T<sub>k</sub>Ma . T<sub>k</sub>'Ma': `T<sub>k</sub>Ma(T<sub>k</sub>'Ma'(x))</code> :</p>
</div>
<div class="paragraph">
<p>\$(ax + k) * (a'x + k') = ubrace(aa')_(Ma) x + ubrace(ak'+k)_(T_k)\$ = <code>T<sub>(ak'+k)</sub>Maa'</code></p>
</div>
<div class="paragraph">
<p>Example from below table:<br>
<strong>T<sub>y</sub>M7 . T<sub>b</sub>M5</strong> &#8658; T<sub>y</sub>M7(T<sub>b</sub>M5(i)) = 7*5i + 7b + y = 35i + 7b + y = 11i + 7b + y, denoted by <strong>T<sub>(7b&#160;+&#160;y)</sub> M11</strong></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Affine composition table - From "basic atonal theory" page 54 <a href="#Rahn">[Rahn]</a></caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top">.</th>
<th class="tableblock halign-left valign-top">T<sub>a</sub>M1 (or&#160; T<sub>a</sub>)</th>
<th class="tableblock halign-left valign-top">T<sub>b</sub>M5</th>
<th class="tableblock halign-left valign-top">T<sub>c</sub>M7</th>
<th class="tableblock halign-left valign-top">T<sub>d</sub>M11</th>
</tr>
</thead>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">T<sub>w</sub>M1</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">T<sub>(a&#160;+&#160;w)</sub> M1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T<sub>(b&#160;+&#160;w)</sub> M5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T<sub>(c&#160;+&#160;w)</sub> M7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T<sub>(d&#160;+&#160;w)</sub> M11</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">T<sub>x</sub>M5</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">T<sub>(5a&#160;+&#160;x)</sub> M5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T<sub>(5b&#160;+&#160;x)</sub> M1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T<sub>(5c&#160;+&#160;x)</sub> M11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T<sub>(5d&#160;+&#160;x)</sub> M7</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">T<sub>y</sub>M7</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">T<sub>(7a&#160;+&#160;y)</sub> M7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T<sub>(7b&#160;+&#160;y)</sub> M11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T<sub>(7c&#160;+&#160;y)</sub> M1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T<sub>(7d&#160;+&#160;y)</sub> M5</p></td>
</tr>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">T<sub>z</sub>M11</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">T<sub>(11a&#160;+&#160;z)</sub> M11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T<sub>(11b&#160;+&#160;z)</sub> M7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T<sub>(11c&#160;+&#160;z)</sub> M5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T<sub>(11d&#160;+&#160;z)</sub> M1</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_special_affine_operation_with_complement">3.2. Special Affine Operation with complement</h3>
<div class="paragraph">
<p>If we add the complementarity operation to the special affine function, we get the following operation: <strong>\$c * (ax + k)\$</strong> that operates on \$P(ZZ_n)\$. It is with this unified operation that we will work.</p>
</div>
<div class="paragraph">
<p>Operation name is &#160; \$C_cM_aT_k\$</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="openblock text-center">
<div class="content">
<div class="paragraph">
<p><strong>Extended Special Affine Operation</strong></p>
</div>
<div class="paragraph">
<p>\$ C_cT_kMa : P(ZZ_n) xx {false, true} xx ZZ xx NN -&gt; P(E) \$</p>
</div>
<div class="paragraph">
<p>\$C_cT_kMa(A) := { ({\ (ax + k) mod n \ }  forall x in A \ \ \ \ \ \ \ \  if c = false), (ZZ_n\ \\ \ {\ (ax + k) mod n \ }  forall x in A \  if c = true) :}\$</p>
</div>
</div>
</div>
<div class="paragraph">
<p>or, in condensed notation and if we use the special affine operation seen previously :</p>
</div>
<div class="openblock text-center">
<div class="content">
<div class="paragraph">
<p>\$"[C]"T_kMa(A) := { (T_kMa(A) \ \ \ \ \ \ \ \ if C " is not present"), (ZZ_n\ \\ \ T_kMa(A)  if C " is present") :}\$</p>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Examples: \$ZZ_12 = {0, 1, ..., 11}\$ and the coprimes with n=12 are {1, 5, 7, 11}:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>\$T_0M1("[0 4 7]") -&gt; "[0 4 7]"\$ &#160; (neutral op)</p>
</li>
<li>
<p>\$T_1M1("[0 4 7]") -&gt; "[1 5 8]"\$ &#160; (transposition of 1 semitone only)</p>
</li>
<li>
<p>\$T_0M11("[0 4 7]") -&gt; "[0 5 8]"\$ &#160; (inversion)</p>
</li>
<li>
<p>\$T_0M5("[0 4 7]") -&gt; "[0 8 11]"\$ &#160; (M5 only)</p>
</li>
<li>
<p>\$CT_4M5("[0 4 7]") -&gt; "[1 2 5 6 7 8 9 10 11]"\$ &#160; (affine first then complement)</p>
</li>
<li>
<p>\$T_4M11("[0 2 4 5 7 9 11]") -&gt; "[0 2 4 5 7 9 11]"\$ &#160; (Inversion then T4: C Major Diatonic &#8594; C Major Diatonic)</p>
</li>
<li>
<p>\$CT_6M1("[0 2 4 5 7 9 11]") -&gt; "[0 2 4 7 9]"\$ &#160; (T6 then Complement: C Major Diatonic &#8594; C Major Pentatonic)</p>
</li>
<li>
<p>\$CT_0M1("[0 3 6 9]") -&gt; "[1 2 4 5 7 8 10 11]"\$ &#160; (Complement only: Dim7 &#8594; Dim scale)</p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The number of versions of this operation is given by the formula: \$C^({0,1}) * T^n * M^(phi(n)) \$</p>
</div>
<div class="paragraph">
<p>With \$n=12\$&#160;, number of operations is:  \$2 xx 12 xx 4 = 96\$</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_affine_with_pivot">4. Revisited basic operations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(with pivot parameter for better basic operations)</p>
</div>
<div class="paragraph">
<p>As they stand, the generally accepted basic operations of musical set theory pose a logic problem that we raise here.</p>
</div>
<div class="sect2">
<h3 id="_whats_wrong_with_basic_operations">4.1. What&#8217;s wrong with basic operations</h3>
<div class="paragraph">
<p>Let us take the inversion operation (M11) as an example, but the problem raised here also applies to the transformations M5 and M7.</p>
</div>
<div class="paragraph">
<p>In the literature on post-tonal analysis, inversion operation can be found expressed in two forms which we will here call <em>inverseA</em> and <em>inverseB</em>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>\$"inverseA"(Pcs) = { (n - x) mod n | x ∈ Pcs }\$ // basic version <a href="#Forte">[Forte]</a></p>
</li>
<li>
<p>\$"inverseB"(Pcs) = { (n - 1) * x mod n | x ∈ Pcs }\$ // <a href="https://en.wikipedia.org/wiki/Multiplication_(music)">multiplicative version M11</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Example : C Major scale <code>[0 2 4 5 7 9 11]</code></p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>inverseA</em>(<code>[0 2 4 5 7 9 11]</code>) :</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>0</code> &#8594; <code>12 - 0</code> &#8594; <code><mark>0</mark></code></p>
</div>
<div class="paragraph">
<p><code>2</code> &#8594; <code>12 - 2</code> &#8594; <code><mark>10</mark></code></p>
</div>
<div class="paragraph">
<p><code>4</code> &#8594; <code>12 - 4</code> &#8594; <code><mark>8</mark></code></p>
</div>
<div class="paragraph">
<p><code>5</code> &#8594; <code>12 - 5</code> &#8594; <code><mark>7</mark></code></p>
</div>
<div class="paragraph">
<p><code>7</code> &#8594; <code>12 - 7</code> &#8594; <code><mark>5</mark></code></p>
</div>
<div class="paragraph">
<p><code>9</code> &#8594; <code>12 - 3</code> &#8594; <code><mark>3</mark></code></p>
</div>
<div class="paragraph">
<p><code>11</code> &#8594; <code>12 - 11</code> &#8594; <code><mark>1</mark></code></p>
</div>
<div class="paragraph">
<p>This gives : <em>inverseA</em>(<code>[0 2 4 5 7 9 11]</code>) &#8594; <code>[<mark>0 1 3 5 7 8 10</mark>]</code></p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>inverseB</em>(<code>[0 2 4 5 7 9 11]</code>) :</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>0</code> &#8594; <code>11 x 0</code> &#8594; <code><mark>0</mark></code></p>
</div>
<div class="paragraph">
<p><code>2</code> &#8594; <code>11 x 2</code> &#8594; 22 mod 12 &#8594; <code><mark>10</mark></code></p>
</div>
<div class="paragraph">
<p><code>4</code> &#8594; <code>11 x 4</code> &#8594; 44 mod 12 &#8594; <code><mark>8</mark></code></p>
</div>
<div class="paragraph">
<p><code>5</code> &#8594; <code>11 x 5</code> &#8594; 55 mod 12 &#8594; <code><mark>7</mark></code></p>
</div>
<div class="paragraph">
<p><code>7</code> &#8594; <code>11 x 7</code> &#8594; 77 mod 12 &#8594; <code><mark>5</mark></code></p>
</div>
<div class="paragraph">
<p><code>9</code> &#8594; <code>11 x 3</code> &#8594; 33 mod 12 &#8594; <code><mark>3</mark></code></p>
</div>
<div class="paragraph">
<p><code>11</code> &#8594; <code>11 x 11</code> &#8594; 121 mod 12 &#8594; <code><mark>1</mark></code></p>
</div>
<div class="paragraph">
<p>This gives : <em>inverseB</em>(<code>[0 2 4 5 7 9 11]</code>) &#8594; <code>[<mark>0 1 3 5 7 8 10</mark>]</code></p>
</div>
<div class="paragraph">
<p>In fact, from a modulo n point of view, the functions <em>inverseA</em> and <em>inverseB</em> are the same. Proof.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">inverseA</th>
<th class="tableblock halign-left valign-top">inverseB</th>
<th class="tableblock halign-left valign-top">Justification</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">(n−x)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(n−1)⋅x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">formulas</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">(12−x)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(12−1)⋅x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">n=12</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">−x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">11x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">n modulo n = 0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">-1x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">11x</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-x = x multiply by -1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>11x</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>11x</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-1 modulo 12 = 11<br></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Inverse operation transform CMajor into III degree of Ab Major, its VIb Major.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./assets/images/CMajor-M11-noPivot.png" alt="CMajor-M11">
</div>
<div class="title">Figure 2. M11 on C Major = III degree of Ab Major (VI-flat Major 'degree' of C)</div>
</div>
<div class="paragraph">
<p>Now that we have seen how the PCS Do Diatonic Major behaves, let&#8217;s take C#/Db Diatonic Major: <code>[0 1 3 5 6 8 10]</code></p>
</div>
<div class="ulist">
<ul>
<li>
<p>The inverse of C# Major, <em>inverse</em>(<code>[0 1 3 5 6 8 10]</code>) :</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>0</code> &#8594; <code>12 - 0</code> &#8594; <code><mark>0</mark></code></p>
</div>
<div class="paragraph">
<p><code>1</code> &#8594; <code>12 - 1</code> &#8594; <code><mark>11</mark></code></p>
</div>
<div class="paragraph">
<p><code>3</code> &#8594; <code>12 - 3</code> &#8594; <code><mark>9</mark></code></p>
</div>
<div class="paragraph">
<p><code>5</code> &#8594; <code>12 - 5</code> &#8594; <code><mark>7</mark></code></p>
</div>
<div class="paragraph">
<p><code>6</code> &#8594; <code>12 - 6</code> &#8594; <code><mark>6</mark></code></p>
</div>
<div class="paragraph">
<p><code>8</code> &#8594; <code>12 - 8</code> &#8594; <code><mark>4</mark></code></p>
</div>
<div class="paragraph">
<p><code>10</code> &#8594; <code>12 - 10</code> &#8594; <code><mark>2</mark></code></p>
</div>
<div class="paragraph">
<p><em>inverse</em>(<code>[0 1 3 5 6 8 10]</code>)  &#8594; <code>[<mark>0 2 4 6 7 9 11</mark>]</code></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./assets/images/DbMajor-M11-noPivot.png" alt="DbMajor-M11">
</div>
</div>
<div class="paragraph">
<p><mark>⚠</mark> <strong>Oh!</strong>, how comes the treatment of inversion for a C#/Db Major <strong>differs</strong> from that of a C Major?</p>
</div>
<div class="paragraph">
<p>The expected correct answer of Inverse(<code>[0 1 3 5 6 8 10]</code>)  should have been <code>[<mark>1 2 4 6 8 9 11</mark>]</code>, III degree of A Major (the VIb Major of Db Major) and not <code>[0 2 4 6 7 9 11]</code>.</p>
</div>
<div class="paragraph">
<p>Other example, with a <em>Limited Transposition</em> scale : <em>C Dim7</em></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./assets/images/CDim7-infos.png" alt="CDim7-infos">
</div>
</div>
<div class="paragraph">
<p>As you might expect, a diminished seventh chord is <strong>very strongly symmetrical</strong>. Observe its stabilizers, there are 16 of them and 4 are in T0 (highlighted in yellow in the screenshot above) : <code><mark>T<sub>0</sub>M1</mark></code> of course, and  <code><mark>T<sub>0</sub>M5</mark></code>, <code><mark>T<sub>0</sub>M7</mark></code> and <code><mark>T<sub>0</sub>M11</mark></code>.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s summarize the different transformation operations of two diminished seventh chords: CDim7 <span class="nowrap">(<code>[0 3 6 9]</code>)</span> and C#Dim7 <span class="nowrap">(<code>[1 4 7 10]</code>)</span>.</p>
</div>
<div class="openblock text-center">
<div class="content">
<table id="zero-fixed-problem" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. Basic operations in Musical Set Theory</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top">PCS</th>
<th class="tableblock halign-center valign-top">T<sub>0</sub>M11 (inversion)</th>
<th class="tableblock halign-center valign-top">T<sub>0</sub>M5</th>
<th class="tableblock halign-center valign-top">T<sub>0</sub>M7</th>
<th class="tableblock halign-center valign-top">Dim7 waiting as strongly invariant</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p>&#160; <br>
CDim7</p>
</div></div></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="./assets/images/clock-0369.png" alt="clock 0369"></span></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="./assets/images/clock-0369.png" alt="clock 0369"></span></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="./assets/images/clock-0369.png" alt="clock 0369"></span></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="./assets/images/clock-0369.png" alt="clock 0369"></span></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><mark>OK</mark></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">[0 3 6 9]</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">[0 3 6 9]</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">[0 3 6 9]</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">[0 3 6 9]</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><mark>OK</mark></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p>&#160; <br>
C#Dim7</p>
</div></div></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="./assets/images/clock-14710.png" alt="clock 14710"></span></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="./assets/images/clock-25811.png" alt="clock 25811"></span></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="./assets/images/clock-25811.png" alt="clock 25811"></span></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="./assets/images/clock-14710.png" alt="clock 14710"></span></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><mark>[2 5 8 11] should be [1&#160;4&#160;7&#160;10]</mark></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">[1 4 7 10]</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><mark>[2 5 8 11]</mark></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><mark>[2 5 8 11]</mark></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">[1 4 7 10]</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><mark>?!</mark></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="paragraph">
<p>Obviously [2 5 8 11] is an intruder! business logic is not good. But then why is he here???</p>
</div>
</div>
<div class="sect2">
<h3 id="_the_fixed_zero_problem">4.2. The "fixed zero problem"</h3>
<div class="paragraph">
<p>The basic operations of musical set theory, which are the standard in the field, have a peculiarity: <strong>they are always centered on <em>0</em> (zero)<sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup></strong> , thus defining it as a fixed point we call the <strong><em>"fixed zero problem"</em></strong>.</p>
</div>
<div class="paragraph">
<p>The bad result we observed comes from the fact that the algorithms confuse index and pitch-class name, both being expressed by integers (a very useful confusion, by the way).</p>
</div>
<div class="paragraph">
<p>Calculations performed directly with these values lead to a falsely controlled side effect.</p>
</div>
<div class="paragraph">
<p>Example : <code>[1 4 7 10] x 11 = [11 44 70 110] modulo 12 = [11 8 5 2] &#8658; <mark>[2 5 8 11]</mark></code></p>
</div>
<div class="paragraph">
<p>As any musician would expect, the main characteristics of a PCS <strong>should be insensitive to the transposition step</strong> : the main characteristics of a PCS remain unchanged compared to those of the same PCS transposed by a <em>k-step</em>.</p>
</div>
<div class="paragraph">
<p>Indeed, the D-Major PCS share the same structural characteristics as any Major PCS, but we have noted that, in their basic form, the transformation operations, other than transposition, do not respect this constancy across all Major PCS.</p>
</div>
<div id="Fixed-zero-problem" class="exampleblock">
<div class="content">
<div class="paragraph text-center">
<p><strong><em>"Fixed zero problem"</em></strong>.</p>
</div>
<div class="paragraph">
<p>Generally speaking, the "fixed zero" has been identified as a problem by the Musical Set Theory, particularly in tonal system, and several solutions have been proposed.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>"<em>Babbitt and Perle develop "moveable-DO" systems. The zero residue is used to label the <strong>first pitch-class</strong> of the most significant row-form in any specific musical context</em>". <a href="#LEWIN">[LEWIN]</a>. We will see, with Db Major, that this is not a good solution. However, the idea is correct from the point of consistency, but should not be imposed but proposed as a default value.</p>
</li>
<li>
<p>David Lewin proposes defining the LABEL function, which define a pitch-class reference for inversion, associates with a GIS (<a href="#LEWIN">[LEWIN]</a>, page 31).</p>
</li>
<li>
<p>Later, David Lewin "frees" the LABEL function using a parameterized inversion operator <em>I<sup>u,v</sup></em>, an inversion around an axis identified by a pair <em>(u, v)</em>, or a pitch-class <em>u</em> if <em>u</em> = <em>v</em>, then denoted by <em>I<sup>u</sup></em>. <a href="#LEWIN-1977a">[LEWIN-1977a]</a> <a href="#LEWIN-1980">[LEWIN-1980]</a>. Only deals with the case of inversion.</p>
</li>
<li>
<p>Harald Fripertinger define in <a href="#Fripertinger">[Fripertinger]</a> an <em>operator inversion, from Z to Z, with respect to r</em>  as <span class="nowrap"><em>I<sub>r</sub>(i) = r − (z − r) = <strong>2r - i</strong></em></span>. So, when <em>r = 0</em>,  <em>I(i) = -i</em>. The parameter pitch-class reference only deals with operator inversion, although quart-circle and quint-circle transformations are defined in the same paper.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="understand-fixed-point-algorithm">4.3. Idea of solution</h3>
<div class="paragraph">
<p>We are looking for a solution that allows to maintain the structural consistency of PCSs across different transformations, including inversion and transformation by cycles of fifths and fourths.</p>
</div>
<div class="paragraph">
<p>The David Lewin&#8217;s operator (<em>I<sup>u</sup></em>), and Harald Fripertinger inversion operator (<em>I<sub>r</sub></em>) partially addresses this problem, but are reserved to the inversion.</p>
</div>
<div class="paragraph">
<p>We propose to generalize this solution to the extended general affine function seen previously by adding a new parameter to designate the reference fixed point of transformation.</p>
</div>
<div class="paragraph">
<p>We start from the observation that the points fixed by the transformation operations depend essentially on <em>n</em>. For <em>n</em> = 12, these fixed points are represented by this figure :</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./assets/images/fixed-indexes-n12.png" alt="fixed-indexes-n12">
</div>
<div class="title">Figure 3. Template of transformations (n = 12)</div>
</div>
<div class="paragraph">
<p>In its basic form of the affine function <em>ax + k</em>, the first term is always fixed by <em>0</em>, whatever <em>x</em>. Zero is the guaranteed fixed point, whatever <em>n</em>. An inventory is necessary.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 4. Inventory of fixed points</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top"></th>
<th class="tableblock halign-center valign-top">ID</th>
<th class="tableblock halign-center valign-top">M11</th>
<th class="tableblock halign-center valign-top">M5</th>
<th class="tableblock halign-center valign-top">M7</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">id</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="./assets/images/M11-fixed.png" alt="M11 fixed"></span></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="./assets/images/M5-fixed.png" alt="M5 fixed"></span></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="./assets/images/M7-fixed.png" alt="M7 fixed"></span></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p>fixed-pitch-classes<br>
set</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">{0,1,2,3,4,5,6,7,8,9,10,11}</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">{0, 6}</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">{0, 3, 6, 9}</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">{0, 2, 4, 6, 8, 10}</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">Intersection of fixed-pitch-classes sets</p></td>
<td class="tableblock halign-center valign-middle" colspan="4"><p class="tableblock">{0,6}</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The axis of symmetry passing through zero, or six, denotes the canonical-axis of symmetry.</p>
</div>
<div class="paragraph">
<p>We decide to refer to this <strong>canonical axis passing through zero</strong>, in order to carry out the affine operations.</p>
</div>
<div class="paragraph">
<p>Note that, when <em>n</em> is odd, axis passing through zero doesn&#8217;t through any other pitch-class number. This is why we will only retain zero from now on.</p>
</div>
<div class="paragraph">
<p>Without calling into question the arithmetic based on pitch-class names, a general solution would be to align the PCS in question, via one of its pitch-classes, with the zero pitch-class before the transformation (M5, M7 or M11).</p>
</div>
<div class="paragraph">
<p>More precisely, this conceptually requires three operations, this is the price to pay for good consistency:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Transpose, by a step ok <em>-p</em>, the PCS to make one of its PCs coincide with zero</p>
</li>
<li>
<p>Apply the requested affine transformation (<em>ax + k</em>)</p>
</li>
<li>
<p>perform an inverse transposition (<em>p</em>)</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Some examples of inversion :</p>
</div>
<div class="paragraph">
<p>Example1 C-sharp Dim7 inversion : <code>T<sub>0</sub>M11</code> on <code>[1 4 7 10]</code></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>[1 4 7 10]</code> transpose with <code>p = -1</code> &#8658; <code>[0&#160;3&#160;6&#160;9]</code></p>
</li>
<li>
<p><code>[0 3 6 9]</code> x 11 modulo 12 &#8658; <code>[0&#160;3&#160;6&#160;9]</code></p>
</li>
<li>
<p><code>[0 3 6 9]</code> transpose with <code>p = 1</code> &#8658; <code><mark>[1&#160;4&#160;7&#160;10]</mark></code></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Example2 D Major scale inversion : <code>M11-T0</code> on  <code>[1&#160;2&#160;4&#160;6&#160;7&#160;9&#160;11]</code></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>[1&#160;2&#160;4&#160;6&#160;7&#160;9&#160;11]</code> transpose with <code>p = -2</code> &#8658; <code>[0&#160;2&#160;4&#160;5&#160;7&#160;9&#160;11]</code></p>
</li>
<li>
<p><code>[0&#160;2&#160;4&#160;5&#160;7&#160;9&#160;11]</code> x 11 modulo 12 &#8658;
<code>[&#160;1&#160;3&#160;5&#160;7&#160;8&#160;10]</code></p>
</li>
<li>
<p><code>[0&#160;1&#160;3&#160;5&#160;7&#160;8&#160;10]</code> transpose with <code>p = 2</code> &#8658; <code><mark>[0&#160;2&#160;3&#160;5&#160;7&#160;9&#160;10]</mark></code></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This solution is correct for all affine operations, but raises another problem: How to determine the value of <em>p</em> ?</p>
</div>
<div class="paragraph">
<p>More possibilities:</p>
</div>
<div class="olist upperalpha">
<ol class="upperalpha">
<li>
<p><strong>Choosing the "smallest PC"</strong>.
<br>
This choice is the same as first pitch-class of PCS in normal order. This is technically correct, but it is not always the right one: It works in the case of C# dim7, but not on D Major, <span class="nowrap">[1 2 4 6 7 9 11]</span>, because its first and minimum pitch-class is 1 (C#), the seventh of the scale, and not the root of D major.</p>
</li>
<li>
<p><strong>Any PC from chromatic circle</strong>
<br>
"<em>There are twelve ways of inverting the total pc chromatic into itself, and any one of these twelve inversions may assume priority in a given musical context.</em>" <a href="#LEWIN-1977a">[LEWIN-1977a]</a>.
<br>
But this choice does not guarantee the consistency of transformation operations: Take a pitch-class that are not part of the pcs to be transformed cause a side effect. Such a pitch-class pollutes the pcs to be transformed during the transformation. See <a href="#_whats_wrong_with_basic_operations">What&#8217;s wrong with basic operations</a> when zero in not a pitch-class of the given pcs.</p>
</li>
<li>
<p><strong>Any PC belonging to PCS to be transformed</strong>
<br>
This ensures that the transformation will be based on a pitch-class of the relevant PCS (acting as a "fixed zero").
<br>
This solution is compatible with the idea of the solution, leaving the choice of the reference pitch-class, among <em>m</em> choices, <em>m</em> being the cardinal of the pcs concerned by the transformation. If pcs is seen as a chord, it can be the root position or an inverted chord, if pcs is seen as a scale, it is a degree of that scale. (we will apply solution A to define a default value)</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>It seems clear that solution C prevails. The pivot <em>p</em> must be chosen from the PCS pitch-classes.</p>
</div>
</div>
<div class="sect2">
<h3 id="design-affine-pivot">4.4. Affine operation with pivot</h3>
<div class="paragraph">
<p>A solution to resolve mismatch basic operations is to add a parameter <em>p</em> (pivot) to Extended Special Affine Operation.</p>
</div>
<div class="paragraph">
<p>The p-value consists, for a given PCS, of selecting a pitch-class that:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Acts as a fixed point in affine operations (not necessarily "zero" or the first pitch-class)</p>
</li>
<li>
<p>Belongs to the pitch-class set under study, expected the empty set.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>We have seen that when we want to control the fixed point of a transformation operation of a PCS, a series of three operations is required: M1-T-p, [C]Ma-Tk and M1-Tp. We call this operation <em>"AffinePivot"</em>, a right action.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="openblock text-center">
<div class="content">
<div class="paragraph">
<p><strong><em>AffinePivot</em><sub>p,c,a,k</sub></strong><br>
<em>A composition of 3 affine operations</em></p>
</div>
<div class="paragraph">
<p>\$"AffinePivot"_(p,c,a,k)  : P(ZZ_n) xx NN xx bbb"B" xx NN xx ZZ -&gt; P(ZZ_n)\$</p>
</div>
<div class="paragraph">
<p>\$"AffinePivot"_(p,c,a,k)(A) := T_pM1(A) @ C_cT_kMa(A) @ T_-pM1(A)\$</p>
</div>
<div class="paragraph">
<p><em>Where <strong>a</strong> is coprime with n, <strong>k</strong> a step of transposition, <strong>c</strong> if complement<br>
and a pivot value <strong>p</strong>, element of A or 0 if A is empty</em></p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_affinepivot_reduced">4.5. AffinePivot reduced</h3>
<div class="paragraph">
<p>We are now preparing to establish a condensed version of the function.</p>
</div>
<div class="paragraph">
<p>\$"AffinePivot"_(c,p,a,k)(A) := T_pM1(A) @ C_cT_kMa(A) @ T_-pM1(A)\$</p>
</div>
<div class="paragraph">
<p>The extended affine composition function, that define one single function from composition of two functions, \$@\$,  is \$(c,a,k) @ (c',a',k') = (c oplus c', aa', ak' + k)\$</p>
</div>
<div class="paragraph">
<p>We will use this affine reduction to reduce the composition of 3 functions, \$T_pM1(A) @ C_cT_kMa(A) @ T_-pM1(A)\$, to a single one.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>\$(false, 1, p) @ (c, a, k) @ (false, 1, -p)\$</p>
</li>
<li>
<p>= \$(false, 1, p) @ (c oplus false, a, -ap + k)\$</p>
</li>
<li>
<p>= \$(false, 1, p) @ (c, a, -ap + k)\$ // c ⊕ false = c</p>
</li>
<li>
<p>= \$(false oplus c, a, -ap + k + p)\$</p>
</li>
<li>
<p>= \$(c, a, -ap + k + p)\$</p>
</li>
<li>
<p>= <mark>\$(c, a, p(1 - a) + k)\$</mark>  &#8656; solution</p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Unsurprisingly, only the transposition step is affected.<br>
We will call this simplified function: <strong>[C]T<sub>k</sub>Ma<sub>p</sub></strong><br>
<br>
<strong><em>C</em></strong>, for complement, is optional. We will see that <strong><em>p</em></strong> can also be, provided that a default value is applied by a deterministic algorithm.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>We can now define the operation that acts on PCS.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="openblock text-center">
<div class="content">
<div class="paragraph">
<p><strong>Affine with pivot : An action on PCS</strong></p>
</div>
<div class="paragraph">
<p>\$T_kMa_p  :  P(ZZ_n) xx ZZ xx NN xx NN -&gt; P(ZZ_n)\$</p>
</div>
<div class="paragraph">
<p>\$T_kMa_p(A) := {\ (ax + p(1 - a) + k) mod n \ },  forall  x in A\$</p>
</div>
<div class="paragraph">
<p><em>Where <strong>a</strong> is coprime with n, <strong>k</strong> a step of transposition, <strong>p</strong> an element of A or 0 if A is empty</em></p>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>So, we can redefine special affine function with complement and pivot:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="openblock text-center">
<div class="content">
<div class="paragraph">
<p><strong>Extended special affine function with pivot</strong></p>
</div>
<div class="stemblock">
<div class="content">
\$[C]T_kMa_p(A) := { (Ma_pTk(A) \ \ \ \ \ \ \ if C " is not present"), (E\  \\ \ T_kMa_p(A)  if C " is present") :}\$
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_default_pivot_value">4.6. Default pivot value</h3>
<div class="paragraph">
<p>For compatibility with the usual affine function, as well as for practical reasons, we define the concept of default pivot value.</p>
</div>
<div id="default-p-value-logic" class="exampleblock">
<div class="content">
<div class="openblock text-center">
<div class="content">
<div class="paragraph">
<p><strong>Default pivot value when AffinePivot act on a PCS</strong></p>
</div>
<div class="paragraph">
<p>The default p-value is the first pitch-class of the PCS or pitch-class zero if the PCS is empty set.</p>
</div>
<div class="paragraph">
<p>\$p = {(a | a in A, if A != emptyset), (0, if A = emptyset) :}\$</p>
</div>
<div class="paragraph">
<p>By correlation, any pitch-class set in prime form has the default p-value equals to zero.</p>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>With the default pivot-value defined, we can simplify the writing of the affine transformation <code>T<sub>k</sub>Ma<sub>p</sub></code> as <code>T<sub>k</sub>Ma</code> when <code>T<sub>k</sub>Ma<sub>p</sub></code> acts on a PCS whose first pitch-class is equal to <em>p</em>.</p>
</div>
<div class="paragraph">
<p>Examples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>(CMaj &#8594; Fmin) <code>T<sub>0</sub>M11<sub>0</sub>([0 4 7])</code> =  <code>T<sub>0</sub>M11([0 4 7])</code> = <code>[0 5 8]</code>, pivot=0 and it is the first pitch-class</p>
</li>
<li>
<p>(Fmaj &#8594; Bbmin) <code>T<sub>0</sub>M11<sub>5</sub>([0 5 9])</code> =  <code>[1 5 10]</code>, pivot=5 is NOT the first pitch-class and must be specified.</p>
</li>
<li>
<p>(FMaj/5th &#8594; Cmin) <code>T<sub>0</sub>M11<sub>0</sub>([0 5 9])</code> = <code>T<sub>0</sub>M11([0 5 9])</code> =  <code>[0 3 7]</code></p>
</li>
<li>
<p>(C#dim7 &#8594; C#dmin7) <code>T<sub>0</sub>M11<sub>1</sub>([1 4 7 10])</code> = <code>T<sub>0</sub>M11([1 4 7 10])</code> = <code>[1 4 7 10]</code>, pivot=1 and it is the first pitch-class</p>
</li>
<li>
<p>(Db Major inversion) <code>T<sub>0</sub>M11<sub>2</sub>([1 2 4 6 7 9 11])</code> = <code>[1 2 4 6 8 9 11]</code>, The pivot must be specified, because the root is not the first pitch-class of the pcs.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_simplified_notation_of_the_affine_expression">4.7. Simplified notation of the affine expression</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">operation type</th>
<th class="tableblock halign-left valign-top">affine</th>
<th class="tableblock halign-left valign-top">simplification</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Neutral operation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>T<sub>0</sub>M1</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>M1</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Multiplication</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>T<sub>0</sub>Ma<sub>p</sub></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Ma<sub>p</sub></code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transposition</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>T<sub>k</sub>M1</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>T<sub>k</sub></code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Complement</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CT<sub>0</sub>M1</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>C</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Affine no complement k&gt;0, x&gt;1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>T<sub>k</sub>Ma<sub>p</sub></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>T<sub>k</sub>Ma<sub>p</sub></code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Affine with complement k=0, x&gt;1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CT<sub>0</sub>Ma<sub>p</sub></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CMa<sub>p</sub></code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Affine with complement k&gt;0, x=1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CT<sub>k</sub>M1</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CT<sub>k</sub></code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Affine with complement k&gt;0, x&gt;1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CT<sub>k</sub>Ma<sub>p</sub></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CT<sub>k</sub>Ma<sub>p</sub></code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><mark>TODO REVIEW TABLE BELOW</mark></p>
</div>
<div class="paragraph">
<p>Some main characteristics of \$(c,p,a,k)\$ |&#8594; \$c cdot (a, p(1 - a) + k)\$</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 5. AffinePivot analysis : [C]T<sub>k</sub>Ma<sub>p</sub>(A)</caption>
<colgroup>
<col style="width: 12.5%;">
<col style="width: 12.5%;">
<col style="width: 12.5%;">
<col style="width: 12.5%;">
<col style="width: 12.5%;">
<col style="width: 12.5%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-middle">\$c\$</th>
<th class="tableblock halign-center valign-middle">\$p\$</th>
<th class="tableblock halign-center valign-middle">\$a\$</th>
<th class="tableblock halign-center valign-middle">\$k\$</th>
<th class="tableblock halign-left valign-bottom">\$c cdot (ax + p(1 - a) + k)\$</th>
<th class="tableblock halign-left valign-middle">[C]T<sub>k</sub>Ma<sub>p</sub></th>
<th class="tableblock halign-left valign-middle">designation</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock">no present</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">no present</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>\$x\$</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><code>T<sub>0</sub>M1(A)</code> or<br>
<code>M1(A)</code></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">neutral operation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock">no present</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">no present</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">a</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>\$ax\$</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><code>T<sub>0</sub>Ma(A)</code> or<br>
 <code>Ma(A)</code></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Mx transformation (*)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock">no present</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">no present</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">k</p></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>\$x + k\$</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><code>T<sub>k</sub>M1(A)</code>
or<br>
<code>T<sub>k</sub>(A)</code></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">transposition</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock">present</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">no present</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>E - A</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><code>CT<sub>0</sub>M1(A)</code> or<br>
 <code>C(A)</code></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">complement</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock">no present</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">p</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">11</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="ulist">
<ul>
<li>
<p>ax + p(1 - a) + k</p>
</li>
<li>
<p>11x + p(1 - 11)</p>
</li>
<li>
<p>11x -10p</p>
</li>
<li>
<p>-1x + 2p (equiv. mod 12)</p>
</li>
<li>
<p><strong>2p - x</strong><br>
(Fripentinger solution <a href="#Fixed-zero-problem">[Fixed-zero-problem]</a>)</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><code>T<sub>0</sub>M11<sub>p</sub>(A)</code> or<br>
<code>M11<sub>p</sub>(A)</code></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">inversion</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock">no present</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">no present</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">a</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">k</p></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p>\$ax + k\$</p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><code>T<sub>k</sub>Ma(A)</code></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">initial affine function (*)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle"><p class="tableblock">no present</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">11</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="ulist">
<ul>
<li>
<p>\$(a, p(1 - a) + k)\$</p>
</li>
<li>
<p>\$(11, 2 * (1 - 11) + 3)\$</p>
</li>
<li>
<p>\$(11, -17)\$</p>
</li>
<li>
<p>\$(11, 7)\$ // eq. modulo 12</p>
</li>
<li>
<p>\$11x + 7\$</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><code class="nowrap">T<sub>3</sub>M11<sub>2</sub>(A)</code></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">example of traditional affine use, with pivot value = 2 (2 ∈ A)</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>(*) <em>a</em> coprime with <em>n</em></p>
</div>
<div class="paragraph">
<p>If we assume that the pitch-class set, in normal order, represents a scale, <em>p</em> designates the degree from which the <code>T<sub>k</sub>Ma<sub>p</sub></code> transformation will be applied. Not specifying <em>p</em> in the affine <code>T<sub>k</sub>Ma</code> function triggers the default pivot value assignment logic (<a href="#default-p-value-logic">[default-p-value-logic]</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_free_axis_of_symmetry">4.8. Free axis of symmetry</h3>
<div class="paragraph">
<p>We have seen that any affine transformation, based on the pivot value, is guaranteed to operate "around" an axis passing through the <strong>pitch-class-pivot</strong>, in complete coherence.</p>
</div>
<div class="paragraph">
<p>The question is: Can we maintain this consistency while being free to select another axis of symmetry than the one passing through the pivot value? The answer is YES, and we will see how.</p>
</div>
<div class="paragraph">
<p>Let us first start by knowing what are the different types of axes of symmetry of a circle having a homogeneous distribution of even and odd pitch-class numbers.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top">n = 7</th>
<th class="tableblock halign-center valign-top">n = 5</th>
<th class="tableblock halign-center valign-top">n = 8</th>
<th class="tableblock halign-center valign-top">n = 12</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="./assets/images/pcs-emptyset-n7.png" alt="pcs emptyset n7"></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="./assets/images/pcs-emptyset-n5.png" alt="pcs emptyset n5"></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="./assets/images/pcs-emptyset-n8.png" alt="pcs emptyset n8"></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="./assets/images/pcs-emptyset-n12.png" alt="pcs emptyset n12"></span></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>We see that there are two ways to divide such a circle in two:</p>
</div>
<div class="olist upperalpha">
<ol class="upperalpha">
<li>
<p><strong>Median axis</strong>, passing <em>through</em> at least one pitch-class number</p>
</li>
<li>
<p><strong>Intercalary axis</strong>, passing <em>between</em> two pitch-class numbers.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="./assets/images/axis-symmetry-n8.png" alt="axis symmetry n8">
</div>
<div class="title">Figure 4. Two symmetry axis types (n=8) A through 0, B between 0 and 1</div>
</div>
<div class="paragraph">
<p>Note that when n is odd, there is only one type of axis that is both intercalary <span class="underline">and</span> median.</p>
</div>
<div class="paragraph">
<p>We immediately see that the pivot value only allows you to define median axes (type A).</p>
</div>
<div class="paragraph">
<p>Examples: <code>T<sub>0</sub>M11<sub>2</sub>([24567]) = [0291011]</code></p>
</div>
<div class="paragraph">
<p><span class="image"><img src="./assets/images/pcs-24567-axe.png" alt="pcs 24567 axe"></span> <code>T<sub>0</sub>M11<sub>2</sub></code> &#8594; <span class="image"><img src="./assets/images/pcs-0291011-axe.png" alt="pcs 0291011 axe"></span></p>
</div>
<div class="paragraph">
<p>We have as many choices of axis type <strong><em>A</em></strong> as there are pitch-classes in the pitch-class set (given by its cardinal). But what about the other axes of type <strong><em>A</em></strong> and  <strong><em>B</em></strong>?</p>
</div>
</div>
<div class="sect2">
<h3 id="_more_than_one_bowstring_to_his_axis">4.9. More than one bowstring to his axis.</h3>
<div class="paragraph">
<p>A type <strong><em>B</em></strong> axis passes through the midpoint of the segment defined by two pitch-class numbers.</p>
</div>
<div class="paragraph">
<p>For example, see below axis passing through pitch-class numbers <strong><em>2</em></strong> and <strong><em>3</em></strong>.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="./assets/images/pcs-24567-axe-B.png" alt="pcs 24567 axe B"></span> <code>??</code> &#8594; <span class="image"><img src="./assets/images/pcs-0131011-axe-B.png" alt="pcs 0131011 axe B"></span></p>
</div>
<div class="paragraph">
<p>To solve this case, let&#8217;s take a look at D. Lewin&#8217;s inversion operator \$I^(u v)\$ (<a href="#LEWIN-1980">[LEWIN-1980]</a>).</p>
</div>
<div class="paragraph">
<p>This operator allows you to specify a pivot symmetry axis for inversion, by designating a pair \$(a,b)\$ of pitch-class numbers<sup class="footnote">[<a id="_footnoteref_2" class="footnote" href="#_footnotedef_2" title="View footnote.">2</a>]</sup>.</p>
</div>
<div class="paragraph text-center">
<p>\$I^(a b)\$ an "<em>inversion taking a to b</em>".</p>
</div>
<div class="paragraph">
<p>Defining an axis of symmetry by a pair of numbers \$(a,b)\$ allows us to designate an axis passing through the center of the circle and the middle of the segment formed by \$a\$ and \$b\$ : \$"midpoint("bar(ab)")" = (a+b) / 2 \$.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The line perpendicular to segment (a,b) passing through its midpoint, through the circle&#8217;s center, forming a symmetry axis.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This works for axes of symmetry of type A and B. Indeed, if a = b, then the axis will pass through \$a\$, from \$(2a)/2 = a\$, and Lewin suggests denoting such segments \$(a,a)\$, for an axis of type A, simply by \$a\$, which is then synonymous with <em>p</em> (pivot value):</p>
</div>
<div class="paragraph text-center">
<p>\$I^(a,a) |-&gt; I^a\$</p>
</div>
<div class="paragraph">
<p>In the given example, the B-type axis passes between two pitch-class numbers, 2 and 3. Therefore, a solution to the problem posed is: <code>I<sup>2,3</sup></code></p>
</div>
<div class="paragraph text-center">
<p><code>I<sup>2,3</sup>([2 4 5 6 7]) = [0 1 3 10 11]</code></p>
</div>
<div class="paragraph">
<p>There are multiple possible expressions of (<em>a,b</em>) to specify a same axis: (<em>a,b</em>) and their inverse (<em>b,a</em>).</p>
</div>
<div class="exampleblock">
<div class="title">Example: 6 line segments perpendicular of a symmetry axis</div>
<div class="content">
<div class="paragraph">
<p><span class="image"><img src="./assets/images/pcs-24567-axe-segments.png" alt="pcs 24567 axe segments"></span>&#160;&#160; \$I^(a,b) |-&gt;  I^(2,3) = I^(1,4) ... = I^(9,8)\$ and their inverse \$I^(3,2) = I^(4,1)\$ etc.</p>
</div>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
With <em>n = 12</em> there are 6  line segments perpendicular of a symmetry axis, one of which is self-inverse (triton 6,6). We therefore have 5*12 + 6 = 66  different pairs (a,b) + <em>n</em> "self  pair" = 78 cases.<br>
 66 is the number of 2-combinations in 12, so:  \$((12),(2)) = (12!) / (2(10!)) = 66\$
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Brought back to our example problem, here are some other solutions:</p>
</div>
<div class="paragraph text-center">
<p><code>I<sup>2,3</sup>([2 4 5 6 7]) = I<sup>4,1</sup>([2 4 5 6 7]) = I<sup>5,0</sup>([2 4 5 6 7]) = [0 1 3 10 11]</code></p>
</div>
<div class="paragraph">
<p>Now we will see how to integrate this functionality into the affine system with pivot, and we will have good news.</p>
</div>
</div>
<div class="sect2">
<h3 id="_free_axis_into_affine_pivot">4.10. Free axis into affine pivot</h3>
<div class="paragraph">
<p>We begin our analysis with a characteristic of \$I^(u v)\$, highlighted by David Lewin in <em>A label-free development</em> p. 36 and proof p. 45 <a href="#LEWIN-1977a">[LEWIN-1977a]</a> (and <a href="#LEWIN-1980">[LEWIN-1980]</a>), and which happens to be the key to resolve our problem.</p>
</div>
<div class="paragraph text-center">
<p>\$T_iI^(u,v) = I^(u,w)\$ where \$w = T_i(v)\$<br>
 (<em>we&#8217;ve added a separator between <strong>u</strong> and <strong>v</strong> for clarity</em>)</p>
</div>
<div class="paragraph">
<p>Let us rewrite this formula, assuming that we are in modulo <em>n</em> logic, and rename <em>u v</em> by <em>a b</em>.</p>
</div>
<div class="paragraph text-center">
<p>\$T_iI^(a,b) = I^(a,b+i)\$</p>
</div>
<div class="paragraph">
<p>Let&#8217;s look at the special case where \$a=b\$:</p>
</div>
<div class="paragraph text-center">
<p>\$I^(a,a+i) = T_iI^(a)\$</p>
</div>
<div class="paragraph">
<p>We know that expression \$T_iI^a\$ is denoted \$T_iM11_a\$ in affine pivot system version ("<em>a</em>" designated the pivot-value "<em>p</em>" for A-type symmetry axis).</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>From equation \$I^(p,p+k) = T_kM11_p\$, It becomes clear that role of <em>k</em> is to assign a length to the segment <span class="nowrap">(<em>p, p + k</em>)</span>. It is this length which makes it possible to identify the axis of symmetry of the function.</p>
</div>
<div class="paragraph">
<p>In other words, <em>k</em> is an offset value of the symmetry axis relative to the pitch-class-pivot.</p>
</div>
<div class="paragraph text-center">
<p>\$ubrace(I^(p,p+k) = T_kI^p)_"Lewin syntax"\ \  &lt;=&gt; ubrace(T_kM11_p)_"Affine pivot syntax"\$</p>
</div>
<div class="paragraph">
<p>The midpoint of \$(p,p+k)\$ is \$(2p+k)/2 = p + k/2\$</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The type of the symmetry axis (A or B) depends essentially on <em>k</em>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>When <em>k</em> = <em>0</em>, the midpoint is \$p + 0 = p\$, thefore, the operation \$T_0M11_p\$ denote an inversion around an axis passing through <em>p</em> (axis of type A)</p>
</li>
<li>
<p>When <em>k</em> is odd, the midpoint is \$ p + k/2 = p + 1/2 + (k-1)/2 = 1/2 + (2p - 1 + k ) /2\$,<br>
Since <em>(2p - 1)</em> and <em>k</em> have the same parity (odd), the value of <em>(2p - 1 + k)</em> is always even, so an odd <em>k</em> always denotes a type B axis.</p>
</li>
<li>
<p>When <em>k</em> is even, the midpoint is \$p + k/2\$ always denote an even value, so an axis of type A.</p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
When <em>k</em> is even, the axis is type of A, otherwise the axis is of type B.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Examples of median (A) and inter (B) axis at \$p + k/2\$ :</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">(k even)<br>
midpoint = \$p + k/2\$</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">(k odd)<br>
midpoint = \$1/2 + (2p - 1 + k ) /2\$</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">k=0</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">k=1</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="./assets/images/pcs-2-axe0.png" alt="pcs 2 axe0"></span></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="./assets/images/pcs-2-axe1.png" alt="pcs 2 axe1"></span></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><code>T<sub>0</sub>M11<sub>2</sub>([2]) &#8594; [2]</code> &#160; &#160; midpoint: \$ 2 + 0/2 = 2\$</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><code>T<sub>1</sub>M11<sub>2</sub>([2]) &#8594; [3]</code> &#160; &#160; midpoint: \$1/2 + 2 \$</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">k=2</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">k=3</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="./assets/images/pcs-2-axe2.png" alt="pcs 2 axe2"></span></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="./assets/images/pcs-2-axe3.png" alt="pcs 2 axe3"></span></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><code>T<sub>2</sub>M11<sub>2</sub>([2]) &#8594; [4]</code>&#160;  midpoint: \$2 + 2/2 = 3\$</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p><code>T<sub>3</sub>M11<sub>2</sub>([2]) &#8594; [5]</code>&#160; midpoint: \$1/2 + 3\$</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Let <em>s</em> be the midpoint of (p, p + k).</p>
</div>
<div class="ulist">
<ul>
<li>
<p>\$ s = p + k/2\$</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Depending on the needs, we can then determine each of the variables in this equation as a function of the other two, from this equation &#160;\$p +k/2 - s = 0\$</p>
</div>
<div class="ulist">
<ul>
<li>
<p>\$ k = 2(s-p)\$</p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p>\$ p  = s - k/ 2\$</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_summary">4.10.1. Summary</h4>
<div class="paragraph">
<p><strong>The axis of symmetry is defined by the line segment it crosses at its midpoint. This line segment is defined by <em>p</em> and <em>k</em> by the pair <em>p, p + k</em></strong>.</p>
</div>
<div class="paragraph">
<p>In the example below, starting from <em>p = 2</em>, the step <strong><em>k = -3</em></strong> defines the line segment (<em>p, p + k</em>) by  <em>(2, -1)</em>, or (2,11) (modulo 12), and thus determines the axis of symmetry passing between (2, 11), or (0,1) , (3,10), (4,9), (5,8), (6,7).</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="./assets/images/pcs-256-M11-free-axe.png" alt="pcs 256 M11 free axe"></span> : <code>T<sub>-3</sub>M11<sub>2</sub>([256])</code> &#8594; <code>[7811]</code></p>
</div>
<div class="paragraph">
<p>Others expressions with valid p-value :
<code>T<sub>-3</sub>M11<sub>2</sub>([256])</code> = <code>T<sub>3</sub>M11<sub>5</sub>([256])</code> = <code>T<sub>1</sub>M11<sub>6</sub>([256])</code> &#8594; <code>[7811]</code></p>
</div>
<div class="paragraph">
<p>k=0 is a special case, where line segment (<em>p,p</em>) distance is zero.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="./assets/images/pcs-256-M11axis0.png" alt="pcs 256 M11axis0"></span> : <code>T<sub>0</sub>M11<sub>2</sub>([2 5 6])</code> &#8594; <code>[2 10 11]</code></p>
</div>
<div class="paragraph">
<p>Others expressions with valid p-value :
<code>T<sub>0</sub>M11<sub>2</sub>([256])</code> = <code>T<sub>6</sub>M11<sub>5</sub>([256])</code> = <code>T<sub>4</sub>M11<sub>6</sub>([256])</code> &#8594; <code>[21011]</code></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_examples_of_transformations_with_affinepivot">4.11. Examples of transformations with affinePivot</h3>
<div class="paragraph">
<p>Examples with p-value specified, or not.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 6. Revisited basic operations of Musical Set Theory, with pivot value (in red)</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top">pcs<br>
source</th>
<th class="tableblock halign-center valign-top">T<sub>0</sub>M11<sub>0</sub><br>
or<br>
T<sub>0</sub>M11<br>
(inversion)</th>
<th class="tableblock halign-center valign-top">T<sub>0</sub>M5<sub>0</sub><br>
or<br>
T<sub>0</sub>M5</th>
<th class="tableblock halign-center valign-top">T<sub>0</sub>M7<sub>0</sub><br>
or<br>
T<sub>0</sub>M7</th>
<th class="tableblock halign-center valign-top">dim7 expected as strongly invariant</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="./assets/images/pcs-0369-pivot0.png" alt="pcs 0369 pivot0"></span></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="./assets/images/pcs-0369-pivot0.png" alt="pcs 0369 pivot0"></span></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="./assets/images/pcs-0369-pivot0.png" alt="pcs 0369 pivot0"></span></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="./assets/images/pcs-0369-pivot0.png" alt="pcs 0369 pivot0"></span></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">Cdim7</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">[0 3 6 9]</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">[0 3 6 9]</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">[0 3 6 9]</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">[0 3 6 9]</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><mark>OK</mark></p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-middle">(default p-value = 1)</th>
<th class="tableblock halign-center valign-middle">M11<sub>1</sub>T0<br>
or<br>
T<sub>0</sub>M11</th>
<th class="tableblock halign-center valign-middle">T<sub>0</sub>M5<sub>1</sub><br>
or<br>
T<sub>0</sub>M5</th>
<th class="tableblock halign-center valign-middle">T<sub>0</sub>M7<sub>1</sub><br>
or<br>
T<sub>0</sub>M7</th>
<th class="tableblock halign-center valign-top">dim7 expected as strongly invariant</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="./assets/images/pcs-14710-pivot1.png" alt="pcs 14710 pivot1"></span></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="./assets/images/pcs-14710-pivot1.png" alt="pcs 14710 pivot1"></span></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="./assets/images/pcs-14710-pivot1.png" alt="pcs 14710 pivot1"></span></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="./assets/images/pcs-14710-pivot1.png" alt="pcs 14710 pivot1"></span></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">C#dim7</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">[1 4 7 10]</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">[1 4 7 10]</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">[1 4 7 10]</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">[1 4 7 10]</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><mark>OK</mark>
+
C#dim7 has same treatment as Cdim7</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-middle">CMajor<br>
 p-value = 0</th>
<th class="tableblock halign-center valign-middle">T<sub>0</sub>M11</th>
<th class="tableblock halign-center valign-middle">T<sub>0</sub>M5</th>
<th class="tableblock halign-center valign-middle">T<sub>0</sub>M7</th>
<th class="tableblock halign-center valign-top">CMajor transformations (default pivot)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="./assets/images/pcs-CMaj-pivot0.png" alt="pcs CMaj pivot0"></span></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="./assets/images/pcs-CMaj-M11-pivot0.png" alt="pcs CMaj M11 pivot0"></span></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="./assets/images/pcs-CMaj-M5-pivot0.png" alt="pcs CMaj M5 pivot0"></span></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="./assets/images/pcs-CMaj-M7-pivot0.png" alt="pcs CMaj M7 pivot0"></span></p></td>
<td class="tableblock halign-center valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">[0 2 4 5 7 9 11]</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">[0 1 3 5 7 8 10]</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">[0 1 7 8 9 10 11]</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">[0 1 2 3 4 5 11]</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">ok</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-middle">C Major<br>
p-value = 4</th>
<th class="tableblock halign-center valign-middle">T<sub>0</sub>M11<sub>4</sub></th>
<th class="tableblock halign-center valign-middle">T<sub>0</sub>M5<sub>4</sub></th>
<th class="tableblock halign-center valign-middle">T<sub>0</sub>M7<sub>4</sub></th>
<th class="tableblock halign-center valign-top">C Major transformations (pivot=4)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="./assets/images/pcs-02457911-p4-clock.png" alt="pcs 02457911 p4 clock"></span></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="./assets/images/pcs-02457911-p4-clock-M11.png" alt="pcs 02457911 p4 clock M11"></span></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="./assets/images/pcs-02457911-p4-clock-M5.png" alt="pcs 02457911 p4 clock M5"></span></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="./assets/images/pcs-02457911-p4-clock-M7.png" alt="pcs 02457911 p4 clock M7"></span></p></td>
<td class="tableblock halign-center valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p>[0 2 4 5 7 9 11]<br>
C Maj/E</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p>[0 3 4 6 8 9 11]<br>
E Maj</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">[3 4 5 6 7 8 9]</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">[0 1 2 3 4 5 11]</p></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p>ok<br>
 M11<sub>4</sub>(CMajor)<br>
 map to EMajor</p>
</div></div></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-middle">(default p-value = 1)<br>
but p-value = 2</th>
<th class="tableblock halign-center valign-middle">T<sub>0</sub>M11<sub>2</sub></th>
<th class="tableblock halign-center valign-middle">T<sub>0</sub>M5<sub>2</sub></th>
<th class="tableblock halign-center valign-middle">T<sub>0</sub>M<sub>2</sub>7</th>
<th class="tableblock halign-center valign-top">DMajor transformations</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="./assets/images/pcs-DMajor-pivot2.png" alt="pcs DMajor pivot2"></span></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="./assets/images/pcsDMaj-M11-Pivot2.png" alt="pcsDMaj M11 Pivot2"></span></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="./assets/images/pcsDMaj-M5-Pivot2.png" alt="pcsDMaj M5 Pivot2"></span></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="./assets/images/pcsDMaj-M7-Pivot2.png" alt="pcsDMaj M7 Pivot2"></span></p></td>
<td class="tableblock halign-center valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">[1 2 4 6 7 9 11]</p></td>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p>[0 2 3 5 7 9 10]<br>
 Become III degree of Bb Major</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">[0 1 2 3 9 10 11]</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">[1 2 3 4 5 6 7]</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">OK DMajor with pivot=2 has same treatment as CMajor</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-middle"></th>
<th class="tableblock halign-center valign-middle">T<sub>4</sub>CM11<sub>0</sub></th>
<th class="tableblock halign-center valign-middle">T<sub>4</sub>CM5<sub>0</sub></th>
<th class="tableblock halign-center valign-middle">T<sub>4</sub>CM7<sub>0</sub></th>
<th class="tableblock halign-center valign-top"></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="./assets/images/pcs-047-pivot-0.png" alt="pcs 047 pivot 0"></span></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="./assets/images/pcs-047-pivot-0-CM11-T4.png" alt="pcs 047 pivot 0 CM11 T4"></span></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="./assets/images/pcs-047-pivot-0-CM5-T4.png" alt="pcs 047 pivot 0 CM5 T4"></span></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="./assets/images/pcs-047-pivot-0-CM7-T4.png" alt="pcs 047 pivot 0 CM7 T4"></span></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">CMaj transformations</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">[0 4 7]</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">[12356781011]</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">[12567891011]</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">[01236791011]</p></td>
<td class="tableblock halign-center valign-top"></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top">CMaj<br>
pivot on 3rd</th>
<th class="tableblock halign-center valign-middle">T<sub>4</sub>CM11<sub>4</sub></th>
<th class="tableblock halign-center valign-middle">T<sub>4</sub>CM5<sub>4</sub></th>
<th class="tableblock halign-center valign-middle">T<sub>4</sub>CM7<sub>4</sub></th>
<th class="tableblock halign-center valign-top"></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="./assets/images/pcs-047-pivot-4.png" alt="pcs 047 pivot 4"></span></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="./assets/images/pcs-047-pivot-4-CM11-T4.png" alt="pcs 047 pivot 4 CM11 T4"></span></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="./assets/images/pcs-047-pivot-4-CM5-T4.png" alt="pcs 047 pivot 4 CM5 T4"></span></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="./assets/images/pcs-047-pivot-4-CM7-T4.png" alt="pcs 047 pivot 4 CM7 T4"></span></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">CMaj transformations</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">[0 4 7]</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">[12346791011]</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">[1234567910]</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">[01236791011]</p></td>
<td class="tableblock halign-center valign-top"></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top">D#/Eb Schoenberg Hexachord<br>
(pivot on root)</th>
<th class="tableblock halign-center valign-middle">T<sub>0</sub>CM11<sub>3</sub></th>
<th class="tableblock halign-center valign-middle">T<sub>0</sub>CM5<sub>3</sub></th>
<th class="tableblock halign-center valign-middle">T<sub>0</sub>CM7<sub>3</sub></th>
<th class="tableblock halign-center valign-top"></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="./assets/images/pcs-034589-pivot3.png" alt="pcs 034589 pivot3"></span></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="./assets/images/pcs-034589-pivot-3-CM11T0.png" alt="pcs 034589 pivot 3 CM11T0"></span></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="./assets/images/pcs-034589-pivot-3-CM5T0.png" alt="pcs 034589 pivot 3 CM5T0"></span></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img src="./assets/images/pcs-034589-pivot-3-CM7T0.png" alt="pcs 034589 pivot 3 CM7T0"></span></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">D#/Eb Schoenberg Hexachord transformations</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="content"><div class="paragraph">
<p>[0 3 4 5 8 9]</p>
</div></div></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">[0 4 5 7 8 11]</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">[2 5 6 7 10 11]</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">[0 1 4 7 8 11]</p></td>
<td class="tableblock halign-center valign-top"></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_affinepivot_typescript_implementation">4.12. AffinePivot typescript implementation</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span style="color:#777">/** extended affinePivot transformation implementation
 * c . (ax + b) |-&gt; c . (ax + p(1 − a) + k)
 */</span>
<span style="color:#080;font-weight:bold">function</span> <span style="color:#06B;font-weight:bold">affinePivot</span>(
  p: number, <span style="color:#777">// integer in [0..this.n-1],</span>
             <span style="color:#777">// assert: vectorIn[p] equals 1 if vectorIn not image of empty set else 0</span>
  <span style="color:#606">a</span>: number, <span style="color:#777">// integer, assert: a is coprime with 'n'</span>
  <span style="color:#606">k</span>: number, <span style="color:#777">// integer in Z</span>
  <span style="color:#606">vectorIn</span>: number[], <span style="color:#777">// array of 0 | 1, a vector image of a pcs</span>
             <span style="color:#777">// ex: [1,0,0,0,1,0,0,1,0,0,0,0] for {0 4 7} (C E G)</span>
  <span style="color:#606">c</span>: <span style="color:#080;font-weight:bold">boolean</span> = <span style="color:#069">false</span> <span style="color:#777">// if true, return complement of permutedVector (false by default)</span>
) : number[] <span style="color:#777">// new vector &quot;affinePivot&quot; transformed</span>
{
    const n = vectorIn.length
    let permutedVector : number[] = Array(n)
    <span style="color:#777">// c . (ax + b) |-&gt; c . (a * i + p(1 − a) + k)</span>
    const b = p * (<span style="color:#00D">1</span>-a) + k
    <span style="color:#080;font-weight:bold">for</span> (let i = <span style="color:#00D">0</span>, j; i &lt; n; i++) {
      <span style="color:#777">// j and i play the role of both index and pitch-class number</span>
      j = (n + (a * i + b) % n) % n <span style="color:#777">// force modulo to get value in [0..n-1]</span>
      <span style="color:#777">// if c then inverse vectorPcs[i] (0 &lt;-&gt; 1)</span>
      permutedVector[j] = c ? <span style="color:#00D">1</span> - vectorPcs[i] : vectorPcs[i]
    }
    <span style="color:#080;font-weight:bold">return</span> permutedVector
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This function is extracted from a POC (and more) available on GitHub (code open source: <a href="https://github.com/ocapuozzo/musaicbox-app" class="bare">https://github.com/ocapuozzo/musaicbox-app</a>) and the latest demo version, runnable via a browser (front-end application) is available here: <a href="https://musaicsbox.org" class="bare">https://musaicsbox.org</a></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_conclusion">5. Conclusion</h2>
<div class="sectionbody">
<div class="paragraph">
<p>After observing the so-called "fixed zero" problem, we propose a general solution to the affine function.</p>
</div>
<div class="paragraph">
<p>To this end, we introduced a new parameter to the affine function acting on PCS to improve its consistency, particularly with respect to inversion (M11) and transformation by cycles of fifths and fourths (M5 and M7).</p>
</div>
<div class="paragraph">
<p>The general form of the function, without complementarity, is <code>T<sub>k</sub>Ma<sub>p</sub></code>.</p>
</div>
<div class="paragraph">
<p>The concept of a default value for the pivot has been introduced, allowing the parameterized affine function to substitute for the usual affine function. The form of this new operation is <code>T<sub>k</sub>Ma</code> (or <code>[C]T<sub>k</sub>Ma</code> with complementarity). This provides general consistency, and allows and thus to blend into existing frameworks and allows the latter to increase their accuracy by specifying, as needed, an adequate pivot value.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_references">References</h2>
<div class="sectionbody">
<div class="ulist bibliography">
<ul class="bibliography">
<li>
<p><a id="Forte"></a>[Forte] Forte, Allen. 1973. The Structure of Atonal Music. New Haven: Yale University Press.</p>
</li>
<li>
<p><a id="Fripertinger"></a>[Fripertinger] Fripertinger, Harald. 1999. On line <a href="https://www.researchgate.net/publication/249910897_Enumeration_and_construction_in_music_theory">Enumeration and construction in music theory</a></p>
</li>
<li>
<p><a id="Knuth"></a>[Knuth] Knuth, Donald. E. 1972. The Art of Computer Programming. Addison-Wesley.</p>
</li>
<li>
<p><a id="modulo"></a>[modulo] <a href="https://en.wikipedia.org/wiki/Modulo" class="bare">https://en.wikipedia.org/wiki/Modulo</a></p>
</li>
<li>
<p><a id="LEWIN"></a>[LEWIN] David Lewin, Generalized musical intervals and transformations, Oxford University Press, 2007-1987</p>
</li>
<li>
<p><a id="LEWIN-1977a"></a>[LEWIN-1977a] David Lewin, "A Label-Free Development for 12-Pitch-Class Systems" Journal of Music Theory 21 (1977), pp. 29-48.</p>
</li>
<li>
<p><a id="LEWIN-1980"></a>[LEWIN-1980] David Lewin, "On Generalized Intervals and Transformations" Journal of Music Theory, Vol. 24, No. 2 (Autumn, 1980), 243-251. (lewin-git-1980.pdf)</p>
</li>
<li>
<p><a id="Moreno-Argon"></a>[Moreno-Argon] Moreno Andreatta, Carlos Agon. Formalisation algébrique des structures musicales à l&#8217;aide de la Set-Theory (on line)  <a href="http://recherche.ircam.fr/equipes/repmus/moreno/AndreattaAgonjim2003.pdf">ircam.fr</a></p>
</li>
<li>
<p><a id="Morris"></a>[Morris] Moris, Robert. 1987. Composition With Pitch-Classes: A Theory of Compositional Design, Yale University Press</p>
</li>
<li>
<p><a id="Rahn"></a>[Rahn] Rahn, John. 1980. Basic Atonal Theory. New York: Longman.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. if <em>n</em> is even, fixed points are <em>0</em> and <em>n/2</em>
</div>
<div class="footnote" id="_footnotedef_2">
<a href="#_footnoteref_2">2</a>. Lewin most often uses the names <em>u</em> and <em>v</em> to denote this pair. We us <em>ab</em> for to emphasize the notion of linear segment
</div>
</div>
<div id="footer">
<div id="footer-text">
Version <br>
Last updated 2025-07-25 18:58:46 +0200
</div>
</div>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [["\\(", "\\)"]],
    displayMath: [["\\[", "\\]"]],
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },
  TeX: { equationNumbers: { autoNumber: "none" } }
})
MathJax.Hub.Register.StartupHook("AsciiMath Jax Ready", function () {
  MathJax.InputJax.AsciiMath.postfilterHooks.Add(function (data, node) {
    if ((node = data.script.parentNode) && (node = node.parentNode) && node.classList.contains("stemblock")) {
      data.math.root.display = "block"
    }
    return data
  })
})
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
<script>
;(function () { /*! Asciidoctor Tabs | Copyright (c) 2018-present Dan Allen | MIT License */
  'use strict'

  var config = (document.currentScript || {}).dataset || {}
  var forEach = Array.prototype.forEach

  init(document.querySelectorAll('.tabs'))

  function init (tabsBlocks) {
    if (!tabsBlocks.length) return
    forEach.call(tabsBlocks, function (tabs) {
      var syncIds = tabs.classList.contains('is-sync') ? {} : undefined
      var tablist = tabs.querySelector('.tablist ul')
      tablist.setAttribute('role', 'tablist')
      var start
      forEach.call(tablist.querySelectorAll('li'), function (tab, idx) {
        tab.tabIndex = -1
        tab.setAttribute('role', tab.classList.add('tab') || 'tab')
        var id, anchor, syncId
        if (!(id = tab.id) && (anchor = tab.querySelector('a[id]'))) {
          id = tab.id = anchor.parentNode.removeChild(anchor).id
        }
        var panel = id && tabs.querySelector('.tabpanel[aria-labelledby~="' + id + '"]')
        if (!panel) return idx ? undefined : toggleSelected(tab, true) // invalid state
        syncIds && (((syncId = tab.textContent.trim()) in syncIds) ? (syncId = undefined) : true) &&
        (syncIds[(tab.dataset.syncId = syncId)] = tab)
        idx || (syncIds && (start = { tab: tab, panel: panel })) ? toggleHidden(panel, true) : toggleSelected(tab, true)
        tab.setAttribute('aria-controls', panel.id)
        panel.setAttribute('role', 'tabpanel')
        var onClick = syncId === undefined ? activateTab : activateTabSync
        tab.addEventListener('click', onClick.bind({ tabs: tabs, tab: tab, panel: panel }))
      })
      if (!tabs.closest('.tabpanel')) {
        forEach.call(tabs.querySelectorAll('.tabpanel table.tableblock'), function (table) {
          var container = Object.assign(document.createElement('div'), { className: 'tablecontainer' })
          table.parentNode.insertBefore(container, table).appendChild(table)
        })
      }
      if (start) {
        var syncGroupId
        for (var i = 0, lst = tabs.classList, len = lst.length, className; i !== len; i++) {
          if (!(className = lst.item(i)).startsWith('data-sync-group-id=')) continue
          tabs.dataset.syncGroupId = syncGroupId = lst.remove(className) || className.slice(19).replace(/\u00a0/g, ' ')
          break
        }
        if (syncGroupId === undefined) tabs.dataset.syncGroupId = syncGroupId = Object.keys(syncIds).sort().join('|')
        var preferredSyncId = 'syncStorageKey' in config &&
          window[(config.syncStorageScope || 'local') + 'Storage'].getItem(config.syncStorageKey + '-' + syncGroupId)
        var tab = preferredSyncId && syncIds[preferredSyncId]
        tab && Object.assign(start, { tab: tab, panel: document.getElementById(tab.getAttribute('aria-controls')) })
        toggleSelected(start.tab, true) || toggleHidden(start.panel, false)
      }
    })
    onHashChange()
    toggleClassOnEach(tabsBlocks, 'is-loading', 'remove')
    window.setTimeout(toggleClassOnEach.bind(null, tabsBlocks, 'is-loaded', 'add'), 0)
    window.addEventListener('hashchange', onHashChange)
  }

  function activateTab (e) {
    var tab = this.tab
    var tabs = this.tabs || (this.tabs = tab.closest('.tabs'))
    var panel = this.panel || (this.panel = document.getElementById(tab.getAttribute('aria-controls')))
    querySelectorWithSiblings(tabs, '.tablist .tab', 'tab').forEach(function (el) {
      toggleSelected(el, el === tab)
    })
    querySelectorWithSiblings(tabs, '.tabpanel', 'tabpanel').forEach(function (el) {
      toggleHidden(el, el !== panel)
    })
    if (!this.isSync && 'syncStorageKey' in config && 'syncGroupId' in tabs.dataset) {
      var storageKey = config.syncStorageKey + '-' + tabs.dataset.syncGroupId
      window[(config.syncStorageScope || 'local') + 'Storage'].setItem(storageKey, tab.dataset.syncId)
    }
    if (!e) return
    var loc = window.location
    var hashIdx = loc.hash ? loc.href.indexOf('#') : -1
    if (~hashIdx) window.history.replaceState(null, '', loc.href.slice(0, hashIdx))
    e.preventDefault()
  }

  function activateTabSync (e) {
    activateTab.call(this, e)
    var thisTabs = this.tabs
    var thisTab = this.tab
    var initialY = thisTabs.getBoundingClientRect().y
    forEach.call(document.querySelectorAll('.tabs'), function (tabs) {
      if (tabs === thisTabs || tabs.dataset.syncGroupId !== thisTabs.dataset.syncGroupId) return
      querySelectorWithSiblings(tabs, '.tablist .tab', 'tab').forEach(function (tab) {
        if (tab.dataset.syncId === thisTab.dataset.syncId) activateTab.call({ tabs: tabs, tab: tab, isSync: true })
      })
    })
    var shiftedBy = thisTabs.getBoundingClientRect().y - initialY
    if (shiftedBy && (shiftedBy = Math.round(shiftedBy))) window.scrollBy({ top: shiftedBy, behavior: 'instant' })
  }

  function querySelectorWithSiblings (scope, selector, siblingClass) {
    var el = scope.querySelector(selector)
    if (!el) return []
    var result = [el]
    while ((el = el.nextElementSibling) && el.classList.contains(siblingClass)) result.push(el)
    return result
  }

  function toggleClassOnEach (elements, className, method) {
    forEach.call(elements, function (el) {
      el.classList[method](className)
    })
  }

  function toggleHidden (el, state) {
    el.classList[(el.hidden = state) ? 'add' : 'remove']('is-hidden')
  }

  function toggleSelected (el, state) {
    el.setAttribute('aria-selected', '' + state)
    el.classList[state ? 'add' : 'remove']('is-selected')
    el.tabIndex = state ? 0 : -1
  }

  function onHashChange () {
    var id = window.location.hash.slice(1)
    if (!id) return
    var tab = document.getElementById(~id.indexOf('%') ? decodeURIComponent(id) : id)
    if (!(tab && tab.classList.contains('tab'))) return
    'syncId' in tab.dataset ? activateTabSync.call({ tab: tab }) : activateTab.call({ tab: tab })
  }
})()
</script>
</body>
</html>